<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Cisco Intersight ICO - Post-conversion Cleanup | Cisco Intersight Help Center</title>
<meta name="description" content="Cisco Intersight ICO">
<meta property="og:title" content="Cisco Intersight ICO - Post-conversion Cleanup" />
<meta property="og:description" content="Cisco Intersight ICO" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:8080/docs/ico/ico-cleanup/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2022-01-28T15:53:12+00:00" />
<meta property="article:modified_time" content="2022-01-28T15:53:12+00:00" /><meta property="og:site_name" content="Cisco Intersight Help Center" />
<meta itemprop="name" content="Cisco Intersight ICO - Post-conversion Cleanup">
<meta itemprop="description" content="Cisco Intersight ICO"><meta itemprop="datePublished" content="2022-01-28T15:53:12+00:00" />
<meta itemprop="dateModified" content="2022-01-28T15:53:12+00:00" />
<meta itemprop="wordCount" content="43953">
<meta itemprop="keywords" content="Workflow," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cisco Intersight ICO - Post-conversion Cleanup"/>
<meta name="twitter:description" content="Cisco Intersight ICO"/>




<link rel="preload" href="/scss/main.min.e11efc06b81857df9076372682bad7c32557f08e26a3110dc68e0400e7c28a9c.css" as="style">
<link href="/scss/main.min.e11efc06b81857df9076372682bad7c32557f08e26a3110dc68e0400e7c28a9c.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-00000000-0');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">Cisco Intersight Help Center</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/no/">Norsk</a>
	
	<a class="dropdown-item" href="/fa/">فارسی</a>
	
</div></li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.be7c0104b838904556a506e9b6669232.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.be7c0104b838904556a506e9b6669232.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <div class="nav-item dropdown d-block d-lg-none">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/no/">Norsk</a>
	
	<a class="dropdown-item" href="/fa/">فارسی</a>
	
</div>
    </div>
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docshome-li">
  <a href="/docs/home/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docshome"><span class="">Home</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgetting-started-li">
  <a href="/docs/getting-started/" title="Overview" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsgetting-started"><span class="">Getting Started</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsgetting-startedaccount_creation-li">
  <a href="/docs/getting-started/account_creation/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedaccount_creation"><span class="">Account Creation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsgetting-startedclaimntarget-li">
  <a href="/docs/getting-started/claimntarget/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedclaimntarget"><span class="">Claim Target</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docswhats_new-li">
  <a href="/docs/whats_new/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docswhats_new"><span class="">What&#39;s New</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhats_new2023-li">
  <a href="/docs/whats_new/2023/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhats_new2023"><span class="">2023</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhats_new2022-li">
  <a href="/docs/whats_new/2022/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhats_new2022"><span class="">2022</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhats_new2021-li">
  <a href="/docs/whats_new/2021/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhats_new2021"><span class="">2021</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhats_newtestdata-li">
  <a href="/docs/whats_new/testdata/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhats_newtestdata"><span class="">New What&#39;s New</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsico-li">
  <a href="/docs/ico/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsico"><span class="">Intersight Cloud Ochestrator</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsicowokflowdesigner-li">
  <a href="/docs/ico/wokflowdesigner/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicowokflowdesigner"><span class="">Workflow Designer</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsicotaskdesigner-li">
  <a href="/docs/ico/taskdesigner/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicotaskdesigner"><span class="">Task Designer</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsicodatatype-li">
  <a href="/docs/ico/datatype/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicodatatype"><span class="">Data Type</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsicowokflowdesigner-copy-li">
  <a href="/docs/ico/wokflowdesigner-copy/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicowokflowdesigner-copy"><span class="">Sample Topic</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsicocheatsheet-li">
  <a href="/docs/ico/cheatsheet/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicocheatsheet"><span class="">Template Syntax (Go Template)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsicoico-li">
  <a href="/docs/ico/ico/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoico"><span class="">Cisco Intersight ICO</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsicoico-cleanup-li">
  <a href="/docs/ico/ico-cleanup/" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-docsicoico-cleanup"><span class="td-sidebar-nav-active-item">Cisco Intersight ICO - Post-conversion Cleanup</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsicoexecutors-li">
  <a href="/docs/ico/executors/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsicoexecutors"><span class="">Executors</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorsansible-li">
  <a href="/docs/ico/executors/ansible/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorsansible"><span class="">Ansible</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorsansible-resuable-li">
  <a href="/docs/ico/executors/ansible-resuable/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorsansible-resuable"><span class="">Ansible Resuable</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorspowershell-li">
  <a href="/docs/ico/executors/powershell/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorspowershell"><span class="">Powershell</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorsssh-li">
  <a href="/docs/ico/executors/ssh/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorsssh"><span class="">SSH Commands</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorsssh-reusable-li">
  <a href="/docs/ico/executors/ssh-reusable/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorsssh-reusable"><span class="">SSH Commands - Reusable</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorssamplefile-li">
  <a href="/docs/ico/executors/samplefile/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorssamplefile"><span class="">Sample File</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsicoexecutorswebapi-li">
  <a href="/docs/ico/executors/webapi/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsicoexecutorswebapi"><span class="">WebAPI</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsico_new-li">
  <a href="/docs/ico_new/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsico_new"><span class="">Hulk 2.0</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsico_newnewfeatues1-li">
  <a href="/docs/ico_new/newfeatues1/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsico_newnewfeatues1"><span class="">New Features 1</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsico_newnewfeatues3-li">
  <a href="/docs/ico_new/newfeatues3/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsico_newnewfeatues3"><span class="">New Features 2</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsico_newnewfeatures2-li">
  <a href="/docs/ico_new/newfeatures2/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsico_newnewfeatures2"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscaveats-li">
  <a href="/docs/caveats/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docscaveats"><span class="">Caveats</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqs-li">
  <a href="/docs/faqs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqs"><span class="">FAQs</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsvidoes-li">
  <a href="/docs/vidoes/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsvidoes"><span class="">Videos</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/google/docsy-example/tree/master/content/en/docs/ICO/ICO-CleanUp.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/google/docsy-example/edit/master/content/en/docs/ICO/ICO-CleanUp.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/google/docsy-example/new/master/content/en/docs/ICO/ICO-CleanUp.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/google/docsy-example/issues/new?title=Cisco%20Intersight%20ICO%20-%20Post-conversion%20Cleanup" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/google/docsy/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="http://localhost:8080/docs/ico/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#workflow-designer">Workflow Designer</a>
      <ul>
        <li><a href="#creating-a-workflow">Creating a Workflow</a></li>
        <li><a href="#defining-a-workflow">Defining a Workflow</a></li>
        <li><a href="#requests">Requests</a></li>
      </ul>
    </li>
    <li><a href="#defining-workflow-inputs-variables-and-outputs">Defining Workflow Inputs, Variables, and Outputs</a>
      <ul>
        <li></li>
        <li><a href="#workflow-variables">Workflow Variables</a></li>
        <li><a href="#operations---conditional-task">Operations - Conditional Task</a></li>
        <li><a href="#managing-the-lifecycle-of-a-workflow">Managing the Lifecycle of a Workflow</a></li>
      </ul>
    </li>
    <li><a href="#task-designer">Task Designer</a></li>
  </ul>
</nav>
      </div>
    
            

	
		
			
				
			
			



  
  
    <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      
        <h5 class="taxonomy-title">Tag Cloud</h5>
      
      <ul class="taxonomy-terms">
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/data-type/" data-taxonomy-term="data-type"><span class="taxonomy-label">Data Type</span><span class="taxonomy-count">2</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/docs/" data-taxonomy-term="docs"><span class="taxonomy-label">docs</span><span class="taxonomy-count">3</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/executors/" data-taxonomy-term="executors"><span class="taxonomy-label">Executors</span><span class="taxonomy-count">4</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/sample/" data-taxonomy-term="sample"><span class="taxonomy-label">sample</span><span class="taxonomy-count">2</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/ssh/" data-taxonomy-term="ssh"><span class="taxonomy-label">SSH</span><span class="taxonomy-count">2</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/task/" data-taxonomy-term="task"><span class="taxonomy-label">Task</span><span class="taxonomy-count">1</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/test/" data-taxonomy-term="test"><span class="taxonomy-label">test</span><span class="taxonomy-count">3</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/webapi/" data-taxonomy-term="webapi"><span class="taxonomy-label">WebAPI</span><span class="taxonomy-count">1</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/whats-new/" data-taxonomy-term="whats-new"><span class="taxonomy-label">What&#39;s New</span><span class="taxonomy-count">1</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/tags/workflow/" data-taxonomy-term="workflow"><span class="taxonomy-label">Workflow</span><span class="taxonomy-count">9</span></a></li>
        
      </ul>
    </div>
  

		
			
				
			
			



  
  
    <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      
        <h5 class="taxonomy-title">Categories</h5>
      
      <ul class="taxonomy-terms">
        
          <li><a class="taxonomy-term" href="http://localhost:8080/categories/examples/" data-taxonomy-term="examples"><span class="taxonomy-label">Examples</span><span class="taxonomy-count">3</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/categories/executors/" data-taxonomy-term="executors"><span class="taxonomy-label">executors</span><span class="taxonomy-count">3</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/categories/ico/" data-taxonomy-term="ico"><span class="taxonomy-label">ICO</span><span class="taxonomy-count">17</span></a></li>
        
          <li><a class="taxonomy-term" href="http://localhost:8080/categories/placeholders/" data-taxonomy-term="placeholders"><span class="taxonomy-label">Placeholders</span><span class="taxonomy-count">1</span></a></li>
        
      </ul>
    </div>
  

		
	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="http://localhost:8080/docs/">Documentation</a>
  </li>
  <li class="breadcrumb-item">
    <a href="http://localhost:8080/docs/ico/">Intersight Cloud Ochestrator</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="http://localhost:8080/docs/ico/ico-cleanup/" aria-disabled="true" class="btn-link disabled">Cisco Intersight ICO - Post-conversion Cleanup</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Cisco Intersight ICO - Post-conversion Cleanup</h1>
	<div class="lead">Cisco Intersight ICO</div>
	<header class="article-meta">
		

  
    
      


<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    
      <li><a class="taxonomy-term" href="http://localhost:8080/tags/workflow/" data-taxonomy-term="workflow"><span class="taxonomy-label">Workflow</span></a></li>
    
  </ul>
</div>

    
      


<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    
      <li><a class="taxonomy-term" href="http://localhost:8080/categories/ico/" data-taxonomy-term="ico"><span class="taxonomy-label">ICO</span></a></li>
    
  </ul>
</div>

    
  

		
	</header>    
	<h2 id="workflow-designer">Workflow Designer</h2>
<p>The Workflow Designer helps you create new workflows (as well as tasks
and data types) and also edit existing workflows to manage targets in
Cisco Intersight.</p>
<p><strong>Note:</strong> To execute the new tasks for VMware vCenter networking
operations, you should upgrade to Intersight Assist version 1.0.9-278.</p>
<ul>
<li>
<p><strong>Important:</strong> The Orchestration option is visible in the left panel
only if you have installed the Intersight Premier license.</p>
</li>
<li>
<p>Only an Account Administrator or a user with the Workflow Designer
privilege can use the Workflow Designer to create and edit
workflows.</p>
</li>
<li>
<p>The Orchestration option is visible in the left panel only if you
have installed the Intersight Premier license.</p>
</li>
<li>
<p>Only an Account Administrator or a user with the Workflow Designer
privilege can use the Workflow Designer to create and edit
workflows.</p>
</li>
</ul>
<p>To launch the Workflow Designer, choose Orchestration <strong>&gt;</strong>
Workflows. A dashboard displays the following details under these tabs,
namely, My Workflows, Sample Workflows, and All Workflows:</p>
<ul>
<li>
<p>Validation Status</p>
</li>
<li>
<p>Last Execution Status</p>
</li>
<li>
<p>Top Workflows by Execution Count</p>
</li>
<li>
<p>Top Workflow Categories</p>
</li>
<li>
<p>Number of System Defined Workflows</p>
</li>
<li>
<p>Top Workflows by Targets</p>
</li>
</ul>
<p>Using the dashboard, you can create, edit, clone, or delete a tab. To
create your own custom view tab, click + and specify a name and then
choose the required parameters that need to be displayed in the columns,
tag columns, and widgets. You can rename the tabs if it does not have a
Lock icon.</p>
<p>Below the dashboard is a tabular list of workflows displaying the
following information:</p>
<ul>
<li>
<p>Display Name</p>
</li>
<li>
<p>Description</p>
</li>
<li>
<p>System Defined</p>
</li>
<li>
<p>Default Version</p>
</li>
<li>
<p>Executions</p>
</li>
<li>
<p>Last Execution Status</p>
</li>
<li>
<p>Validation Status</p>
</li>
<li>
<p>Last Update</p>
</li>
<li>
<p>Organization</p>
</li>
</ul>
<p>The Actions column allows you to do the following actions:</p>
<ul>
<li>
<p>Execute—Executes the workflow.</p>
</li>
<li>
<p>History—Displays workflow execution history.</p>
</li>
<li>
<p>Manage Versions—create and manage versions for workflows. See
<em>Managing Versions for Workflows</em> later in this document.</p>
</li>
<li>
<p>Delete—Delete a workflow.</p>
</li>
<li>
<p>Retry—Retry a failed workflow.</p>
</li>
</ul>
<h3 id="creating-a-workflow">Creating a Workflow</h3>
<p>Workflow creation can be broken down into the following sequence of
steps:</p>
<ol>
<li>
<p>Defining a workflow—you specify the display name, description, and
other important attributes.</p>
</li>
<li>
<p>Defining workflow inputs, workflow variables, and workflow
outputs—you can specify which input parameters are mandatory for the
workflow execution, define variable(s) for workflow, and the
output(s) generated on successful execution.</p>
</li>
<li>
<p>Adding workflow tasks—you can add one or more workflow tasks in the
Workflow Designer that are needed for the workflow to carry out its
function.</p>
</li>
<li>
<p>Validate the workflow—you can validate a workflow to ensure that
there are no errors in connecting task inputs and outputs.</p>
</li>
</ol>
<h3 id="defining-a-workflow">Defining a Workflow</h3>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Choose Create Workflow. The Create Workflow screen is categorized
into the following areas to help you create a workflow:</p>
</li>
</ol>
<!-- -->
<ol>
<li>The following table describes the options available to you while
creating a workflow:</li>
</ol>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 24%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="header">
<th>Workflow Designer Area/Option</th>
<th>Description</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General Tab</td>
<td>Displays workflow details, and also inputs, variables, and outputs of the workflow.</td>
<td><p>You can add a user-friendly short name, reference name, description, and assign an organization to the workflow. You can also specify a version or set a tag to the workflow. In order to categorize your workflow, use the tag key Category and provide an appropriate category value. Use the following checkboxes to:</p>
<p>Set as Default Version—Sets this version as the default version for the workflow.</p>
<p>Failed/Terminated Actions—Sets the post execution settings for the workflow.</p>
<ul>
<li><p>Enable Retry—Execute the workflow from the point of a failure or retry the execution of the entire workflow. You can retry the execution of the workflow for up to two weeks after the last update to the workflow.</p></li>
<li><p>Enable Auto Rollback—Rollback workflow will be initiated automatically when this option is enabled. You can select one of the following rollback conditions:</p>
<ul>
<li><p>On Failure</p></li>
<li><p>On Cancel</p></li>
<li><p>On Failure or Cancel.</p></li>
</ul></li>
</ul>
<p>Enable Debug Logs—Collects the workflow logs for each tasks. You can analyze and debug the workflow execution.</p>
<p>Workflow Inputs—You can click Add Workflow Input and add workflow inputs. Each input has a user-friendly display name, a reference name, description, restrictions, and data type. Also, you can set a default value and encrypt it. For more information, see [Test](#creating-a-workflow) 
[Test](#creating-a-workflow).</p>
<p>Workflow Variable—You can click Add Workflow Variable and add a workflow variable. Each workflow variable has a reference name, data type, and so on. Also, you can set a default value. For more information, see <a href="file://E:\\help\\resources\\Workflow_Designer">Defining Workflow Inputs, Variables, and Outputs</a>.</p>
<p>Workflow Outputs—You can click Add Workflow Output and add workflow outputs. Each output has a user-friendly display name, a reference name, description, restrictions, and data type. Also, you can encrypt a value and map it to task output.</p></td>
</tr>
<tr class="even">
<td>Designer Tab</td>
<td>Displays the design area where you synthesize your workflow.</td>
<td><p>Categorized into the following areas to help you create a workflow:</p>
<ul>
<li><p>Tools Area—lists all the tasks, workflows, and operations that are currently available in Intersight. You can drag and drop a task or a workflow to the canvas to create or edit the workflow. You can collapse or expand the Tools area. You can use the Search feature to find a specific task or workflow.</p></li>
<li><p>Design Area—where you can build your workflow. Drag and drop tasks and workflows from the Tools area to this area of the screen. This area includes the following options that you can use while creating the workflow:</p>
<ul>
<li><p>Zoom in and Zoom out—Magnify or reduce the view of the workflow.</p></li>
<li><p>Auto Align Workflow—Automatically align the workflow tasks in the design area.</p></li>
<li><p>Auto Align Selected Workflow Entities—Align selected workflow entities in the design area.</p></li>
<li><p>Toggle Task Search—Search for a specific task within the workflow. This is useful when you have several tasks within the workflow.</p></li>
<li><p>Auto Connect Selected Workflow Entity—Add the workflow entity in the design area. You can drag and drop a task in between the tasks. The possible locations where the selected task can be added is denoted with + icon.</p></li>
</ul></li>
<li><p>Task Properties Area—where you define the task properties, inputs, outputs, and variables. Click the <strong>Task</strong> in Designer Area, to view the Task Properties area.</p>
<ul>
<li><p>General—Specify the general details for the task such as name, description, version, and so on.</p></li>
</ul></li>
</ul>
<blockquote>
<p><strong>Note:</strong> The task name should be unique.</p>
</blockquote>
<ul>
<li><blockquote>
<p>Use the <strong>Enable Rollback</strong> option to enable or disable rollback for the selected task.:</p>
</blockquote></li>
</ul>
<blockquote>
<p><strong>Note:</strong> The Enable Rollback option is visible only if the task is rollback capable.</p>
</blockquote>
<ul>
<li><p>Inputs—Specify the task input parameter value that are required to execute the task. You can specify the input as a static value, map it to a workflow input or task output, use transformation or advanced mapping, or map it to a workflow variable.</p></li>
<li><p>Outputs—Displays the task outputs. Click Add Worfklow Output button to map the task output to the workflow output.</p></li>
<li><p>Variables—Specify the workflow variables that can be used across tasks in the workflow. For more information, see <a href="file://E:\\help\\resources\\Workflow_Designer">Worfklow Variables</a>.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Mapping Tab</td>
<td><p>Displays the relationship between the task inputs and the outputs of the selected workflow.</p>
<p>Information on workflow inputs and workflow outputs is also displayed.</p></td>
<td>Expand and collapse the Task Inputs and Task Outputs pane.</td>
</tr>
<tr class="even">
<td>Code Tab</td>
<td>Displays the code view of the workflow definition</td>
<td>Read-only view of the workflow. You can copy the code, use this as a sample to create a workflow using Intersight APIs.</td>
</tr>
<tr class="odd">
<td>History Tab</td>
<td>Status of the executed/in-progress workflows. This tab appears after executing a workflow.</td>
<td><p>View workflow execution history, retry or clone a previous execution. The system displays a maximum of 100 instances of the workflow execution. The workflow execution is populated for each version of the workflow.</p>
<p><strong>Note:</strong> When a workflow is successfully executed, the options for retrying the workflow are not displayed. You can retry a failed workflow only when the Enable Retry option is enabled in the General tab.</p></td>
</tr>
<tr class="even">
<td>Execute</td>
<td>Launches the Enter Workflow Inputs window.</td>
<td><p>Choose the Organization and the Workflow instance name to execute the workflow.</p>
<p>For user-created workflows, the organization must match where it was created.</p></td>
</tr>
<tr class="odd">
<td>Save Workflow</td>
<td>Validates and saves the workflow.</td>
<td>Review validation errors, if any, and rectify them.</td>
</tr>
<tr class="even">
<td>Close Designer</td>
<td>Closes the Workflow Designer.</td>
<td>Closes the Workflow Designer and displays the table view of available workflows.</td>
</tr>
</tbody>
</table>
<h3 id="requests">Requests</h3>
<p>Requests are closely related to workflows. You create requests by
running workflows; a request is generated every time you execute a
workflow in Cisco Intersight. A request is a process under the control
of Cisco Intersight.</p>
<p>You can schedule a workflow for later execution, and Cisco Intersight
stores details of completed requests. To view the detailed information
of a request, choose a request. The following information is displayed
in the <strong>Requests</strong> screen:</p>
<ul>
<li>
<p>Status—Displays the status of a workflow. Request can have one of
several states depending on its execution status:</p>
<ul>
<li>
<p>Running</p>
</li>
<li>
<p>Blocked (for example, awaiting an approval)</p>
</li>
<li>
<p>Completed</p>
</li>
<li>
<p>Failed (a request can fail when one of its component tasks fails
to execute properly)</p>
</li>
</ul>
</li>
<li>
<p>Details—Displays the request details such as name, request ID,
target name and type, source name and type, name of the user who has
executed the request along with the start time and end time, and
duration of the request.</p>
</li>
<li>
<p>Inputs—Displays the workflow input details</p>
</li>
<li>
<p>Outputs—Displays the workflow output details</p>
</li>
<li>
<p>Execution Flow—Enable Show Additional Details to view the logs,
input, and output mapping details of the user-defined workflows.
Displays the workflow execution history details similar to the
details displayed in the History tab.</p>
</li>
</ul>
<h2 id="defining-workflow-inputs-variables-and-outputs">Defining Workflow Inputs, Variables, and Outputs</h2>
<p>Workflows can have any number of tasks, inputs, variables, and outputs.</p>
<p>Any task or workflow input can be either mandatory or optional. A task
or workflow cannot run without all of its mandatory inputs. You define
whether an input is mandatory or optional when you create the task or
workflow.</p>
<p>After specifying the generic properties for a task or workflow, you
define the input parameters and variables required for task or workflow
execution. In addition, you can set workflow input Parameter Set or
Progressive Disclosure rules. These rules control the availability of
workflow inputs or filter the data based on the preceding selection
during the workflow execution. The Task Designer uses the same
parameters and information types as the workflow designer to validate
the mappings of task input and output parameters when a task is used in
a workflow along with other tasks. Task designer uses the same form as
workflow designer to obtain the parameter and information type so as
provide same user experience between workflow designer and task
designer.</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane and click Create
Workflow.</p>
</li>
<li>
<p>In the General tab, click Add Workflow Input in the Workflow Inputs
tab.</p>
</li>
<li>
<p>In the Add Workflow Input screen, enter the following details:</p>
<ol>
<li>
<p>Display Name—Enter user-friendly short name.</p>
</li>
<li>
<p>Reference Name</p>
</li>
<li>
<p>Description—Detailed description of the input</p>
</li>
<li>
<p>Value Restrictions—Choose Required, Collection/Multiple, or can
be left blank</p>
</li>
<li>
<p>Type—Select a data type. For example, String, Integer, Float,
Boolean, Json, Enum, MoReference, Target Data Type, or a custom
data type.</p>
</li>
</ol>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>The fields displayed depend on the value you select for the Type</p>
<blockquote>
<p>field.</p>
</blockquote>
<ol>
<li>
<p>If you select the data type as Enum, specify the following:</p>
<ol>
<li>
<p>Enum List—Label for the Enum value.</p>
</li>
<li>
<p>Widget type.</p>
</li>
<li>
<p>Set Default Value—Select the checkbox and select the
corresponding default value.</p>
</li>
<li>
<p>Override—Allow the user to override the default value.</p>
</li>
</ol>
</li>
<li>
<p>If you select the data type as String, specify the following:</p>
<ol>
<li>
<p>Minimum and Maximum Range</p>
</li>
<li>
<p>Regex—Validates the regular expression when you select
String in the Type field.</p>
</li>
<li>
<p>Secure—Indicates that the values of these properties are
encrypted and stored in Cisco Intersight.</p>
</li>
<li>
<p>Object Selector—Enable to configure the Intersight managed
object selectors. This attribute is available only when the
primitive data is String.</p>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Specify the Intersight API Reference and selector attributes to feed</p>
<blockquote>
<p>the input from the table selection. Value will be passed according
to the configuration set in the Value attribute.</p>
</blockquote>
<ol>
<li>
<p>If you select the data type as Integer or Float, specify the
following:</p>
<ol>
<li>
<p>Minimum and Maximum Range</p>
</li>
<li>
<p>Set Default Value—Select the checkbox and the corresponding
default value.</p>
</li>
</ol>
</li>
<li>
<p>If you select the data type as Target Data Type or MoReference,
specify the following:</p>
<ol>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to
be displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
</ol>
</li>
<li>
<p>If you select the data type as Composite Data Type, you can
specify the field mapping for the input field. With field
mapping, you can pass the value of workflow input to a composite
data field.</p>
</li>
</ol>
</li>
<li>
<p>To pass the value from the parent composite data type to a child</p>
<blockquote>
<p>composite data type, you must specify the field mapping in the
composite data type field. For more information, see <a href="file://E:%5Chelp%5Cresources%5CData_Types">Creating a
Data Type</a>.</p>
</blockquote>
</li>
<li>
<p>To specify the field mapping, do the following:</p>
<ol>
<li>
<p>Key—The input field that you want to hide.</p>
</li>
<li>
<p>Value Attribute—The value in a template style to be passed
dynamically during the execution.</p>
</li>
</ol>
</li>
<li>
<p>If the data type is Object Selector, Enum, or Boolean then the input</p>
<blockquote>
<p>is referenced as ${workflow.input.InputReferenceName}.</p>
</blockquote>
</li>
<li>
<p>If the data type is MoReference or Target Data Type the input is</p>
<blockquote>
<p>referenced as ${workflow.input.InputReferenceName.AttributeName}.</p>
</blockquote>
</li>
<li>
<p>The InputReferenceName is the Reference Name given to the input</p>
<blockquote>
<p>field and not the Display Name or Label.</p>
</blockquote>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Repeat this procedure to create multiple inputs.</p>
</li>
<li>
<p>To add a Parameter Set rule, click Add Rule &gt; Parameter Set.</p>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>For more information, see Workflow <a href="file://E:%5Chelp%5Cresources%5CWorkflow_Designer">Workflow Input Parameter Set and
Progressive Disclosure
Rules</a>.</p>
<ol>
<li>
<p>Name—The name of the Parameter Set rule.</p>
</li>
<li>
<p>If Field—Select the input field and the properties that will be
used to define the Parameter Set rule.</p>
</li>
</ol>
</li>
<li>
<p>The inputs are referenced as <em>InputName</em> or <em>InputName.Properties</em>.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> The properties are applicable only if the data type is
MoRefefence or Target Data Type. For example, for a Target Data Type
input field (DeviceRegistrations), you can specify <em>Hypervisor
Manager.IP Address</em>.</p>
</blockquote>
<ol>
<li>
<p>Condition—The condition for the rule. The condition can be Equal to,
Not equal to, Contains, or Matches Pattern.</p>
</li>
<li>
<p>Value—Select or enter the value. The Parameter Set rule uses this
value along with the Condition specified to compare the value from
the If Field.</p>
</li>
<li>
<p>Field to be shown—Select the input field(s) that should be made
available when the Parameter Set rule condition is satisfied.</p>
</li>
<li>
<p>Click Save.</p>
</li>
</ol>
<!-- -->
<ol>
<li>To add a Progressive Disclosure rule, click Add Rule &gt;
Progressive Disclosure.</li>
</ol>
<!-- -->
<ol>
<li>
<p>For more information, see <u>Workflow Input Parameter Set and
Progressive Disclosure Rules</u>.</p>
<ol>
<li>
<p>Target Field—The target input field on which the progressive
disclosure is applied.</p>
</li>
<li>
<p>Attribute —The inputs are referenced as
<em>AttributeName.ParameterName</em>. For example, for an input field,
Virtual Manager, you can specify the attribute name as
<em>RegisteredDevice.Moid</em> or <em>ConnectionStatus</em>.</p>
</li>
<li>
<p>Condition—The rule condition for the rule. The condition can be
Equal to, Not equal to, or Contains.</p>
</li>
<li>
<p>Value—The inputs are referenced as
${InputReferenceName.Attribute} or
${InputReferenceName.ParameterName}. For example, for a VM input
field, you can specify the value as ${HypervisorManager.Moid} or
${Target.ConnectionStatus}.</p>
</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> For a String input field, if you have selected the Object
Selector option then you need not specify the Attribute or Parameter
value.</p>
</blockquote>
<ol>
<li>
<p>In the General tab, click Add Workflow Variables in the Workflow
Variables tab. For more information, see <a href="file://E:%5Chelp%5Cresources%5CWorkflow_Designer">Workflow
Variables</a>.</p>
</li>
<li>
<p>In the Add Workflow Variable screen, enter the following details:</p>
<ol>
<li>
<p>Reference Name—Enter user-friendly short name.</p>
</li>
<li>
<p>Type—Select the data type. For example, String, Integer, Float,
Boolean, Json, Enum, MoReference, or Target Data Type.</p>
</li>
</ol>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>The fields displayed depend on the value you select for the Type</p>
<blockquote>
<p>field.</p>
</blockquote>
<ol>
<li>
<p>If you select the data type as String, specify the following:</p>
<ol>
<li>Object Selector—Enable to configure the Intersight managed
object selectors.</li>
</ol>
</li>
</ol>
</li>
<li>
<p>The Object Selector field is optional.</p>
<ol>
<li>Specify the Intersight API Reference and selector attributes to
feed the input from the table selection. The value will be
passed according to the configuration set in the Value
attribute.</li>
</ol>
<!-- -->
<ol>
<li>
<p>If you select the data type as Enum, specify the following:</p>
<ol>
<li>
<p>Enum List—Label and value for the Enum list.</p>
</li>
<li>
<p>Widget type—The widget type as Radio or none.</p>
</li>
</ol>
</li>
<li>
<p>If you select the data type as Target Data Type or MoReference,
specify the following:</p>
<ol>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to
be displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
</ol>
</li>
<li>
<p>Select the Initial Mapping To type and specify the corresponding
variable value.</p>
</li>
<li>
<p>Click Add.</p>
</li>
</ol>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>Click Workflow Outputs and click Add Workflow Output.</p>
</li>
<li>
<p>Choose a parameter and click Add.</p>
</li>
<li>
<p>Click Save.</p>
</li>
</ol>
<p>Workflow Input Parameter Set and Progressive Disclosure Rules</p>
<p>When you create a workflow, you can specify the inputs for the workflow
execution. After you define the workflow inputs, you can set Parameter
Set or Progressive Disclosure rules. These rules control the
availability of workflow inputs or filter the data based on the
preceding selection during the workflow execution.</p>
<p><strong>Note:</strong> You can define a Parameter Set or Progressive Disclosure rule
only for a workflow that has more than two input fields with the
supported data type.</p>
<h4 id="parameter-set-rule">Parameter Set Rule</h4>
<p>The Parameter Set rules control the availability of specific parameters
or inputs during the execution. After the first input is specified, the
Parameter Set rule controls which subsequent input fields are made
available during the workflow execution.</p>
<p><strong>Example:</strong> The following example shows how to create a Parameter Set
rule for a workflow with three input fields. The workflow input fields
are:</p>
<ul>
<li>
<p>Enum—Type is <em>Enum</em> and Enum list is <em>VM</em> and <em>HX</em>.</p>
</li>
<li>
<p>Input1—Type is <em>String</em>.</p>
</li>
<li>
<p>Input2—Type is <em>String</em>.</p>
</li>
</ul>
<p>You can create two workflow input Parameter Set rules. During the
workflow execution when the Enum value is <em>VM</em> only Input1 field is made
available. Alternately, when the Enum value is <em>HX</em>, only Input2 is made
available. The details of the Parameter Set rules are:</p>
<ul>
<li>
<p>Rule1—If Field is <em>Enum</em>, Condition is <em>Equal to</em>, Value is <em>VM</em>,
and Fields to be shown is <em>Input1.</em></p>
</li>
<li>
<p>Rule2—If Field is <em>Enum</em>, Condition is <em>Equal to</em>, Value is <em>HX</em>,
and Fields to be shown is <em>Input2.</em></p>
</li>
</ul>
<p>The following is a sample of the API request.</p>
<p>  &ldquo;InputParameterSet&rdquo;: [<br>
    {<br>
      &ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
      &ldquo;ControlParameter&rdquo;: &ldquo;Enum&rdquo;,<br>
      &ldquo;EnableParameters&rdquo;: [<br>
        &ldquo;Input1&rdquo;<br>
      ],<br>
      &ldquo;Name&rdquo;: &ldquo;Rule1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.ParameterSet&rdquo;,<br>
      &ldquo;Value&rdquo;: &ldquo;VM&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
      &ldquo;ControlParameter&rdquo;: &ldquo;Enum&rdquo;,<br>
      &ldquo;EnableParameters&rdquo;: [<br>
        &ldquo;Input2&rdquo;<br>
      ],<br>
      &ldquo;Name&rdquo;: &ldquo;Rule2&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.ParameterSet&rdquo;,<br>
      &ldquo;Value&rdquo;: &ldquo;HX&rdquo;<br>
    },</p>
<p>The supported data types for Parameter Set rules are:</p>
<ul>
<li>
<p>Boolean</p>
</li>
<li>
<p>Enum</p>
</li>
<li>
<p>String Object Selector</p>
</li>
<li>
<p>MoReference</p>
</li>
<li>
<p>Target</p>
</li>
</ul>
<h4 id="progressive-disclosure-rule">Progressive Disclosure Rule</h4>
<p>The Progressive Disclosure rules filter the data available in an input
field based on the preceding selection during a workflow execution. The
first input field is populated with broadest options. The subsequent
input fields are populated with options based on the previous selection.</p>
<p><strong>Example 1:</strong> The following example shows how to create a Progressive
Disclosure rule for a workflow with two input fields. Both these input
fields are MoReference data type. The workflow input fields are:</p>
<ul>
<li>
<p>Field1—Type is <em>MoReference</em>, Intersight API Reference is
/api/v1/asset/DeviceRegistrations, and Selector attribute is
ConnectionStatus.</p>
</li>
<li>
<p>Field2—Type is <em>MoReference</em>, Intersight API Reference is
/api/v1/asset/DeviceRegistrations, and Selector attribute is
ConnectionStatus.</p>
</li>
</ul>
<p>You can create a Progressive Disclosure rule so that during the workflow
execution, the data is filtered for Field2 fields based on value in the
Field1 field. The details of the Progressive Disclosure rule are:</p>
<ul>
<li>Field2 Rule—Target Field is Field2, Attribute is ConnectionStatus,
Condition is <em>Equal to</em>, and Value is ${Field1.ConnectionStatus}.</li>
</ul>
<p><strong>Example 2:</strong>: The following example shows how to create a Progressive
Disclosure rule for a workflow with two input fields. Both these input
fields are composite custom data type. The workflow input fields are:</p>
<ul>
<li>
<p>Input1—Composite data type with two fields (Field1 and Field2)</p>
<ul>
<li>
<p>Field1—Type is <em>MoReference</em>, Intersight API Reference is
/api/v1/asset/DeviceRegistrations, and Selector attribute is
ConnectionStatus.</p>
</li>
<li>
<p>Field2—Type is <em>MoReference</em>, Intersight API Reference is
/api/v1/asset/DeviceRegistrations, and Selector attribute is
ConnectionStatus.</p>
</li>
</ul>
</li>
<li>
<p>Input2—Composite data type with two fields (Field3 and Field4)</p>
<ul>
<li>
<p>Field3—Type is <em>MoReference</em>, Intersight API Reference is
/api/v1/asset/DeviceRegistrations, and Selector attribute is
ConnectionStatus.</p>
</li>
<li>
<p>Field4—Type is <em>MoReference</em>, Intersight API Reference is
/api/v1/asset/DeviceRegistrations, and Selector attribute is
ConnectionStatus.</p>
</li>
</ul>
</li>
</ul>
<p>You can create two Progressive Disclosure rules. During the workflow
execution, the data is filtered for Input2 fields based on value in the
Input1 fields. The details of the two Progressive Disclosure rules are:</p>
<ul>
<li>
<p>Input2.Field3 Rule—Target Field is Input2.Field3, Attribute is
ConnectionStatus, Condition is <em>Equal to</em>, and Value is
${Input1.Field1.ConnectionStatus}.</p>
</li>
<li>
<p>Input2.Field4 Rule—Target Field is Input2.Field4, Attribute is
ConnectionStatus, Condition is <em>Equal to</em>, and Value is
${Input1.Field2.ConnectionStatus}.</p>
</li>
</ul>
<p>The following is a sample of the API request.</p>
<p>  &ldquo;UiInputFilters&rdquo;: [<br>
    {<br>
      &ldquo;Filters&rdquo;: [<br>
        &ldquo;ConnectionStatus eq &lsquo;${Input1.Field1.ConnectionStatus}&rsquo;&rdquo;<br>
      ],<br>
      &ldquo;Name&rdquo;: &ldquo;Input2.Field3&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.UiInputFilter&rdquo;,<br>
      &ldquo;UserHelpMessage&rdquo;: &quot;&quot;<br>
    },<br>
    {<br>
      &ldquo;Filters&rdquo;: [<br>
        &ldquo;ConnectionStatus eq &lsquo;${Input1.Field2.ConnectionStatus}&rsquo;&rdquo;<br>
      ],<br>
      &ldquo;Name&rdquo;: &ldquo;Input2.Field4&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.UiInputFilter&rdquo;,<br>
      &ldquo;UserHelpMessage&rdquo;: &quot;&quot;<br>
    }<br>
  ]</p>
<p>The supported data types for the Progressive Disclosure rules are:</p>
<ul>
<li>
<p>MoReference</p>
</li>
<li>
<p>Target</p>
</li>
<li>
<p>String Object Selector</p>
</li>
</ul>
<h3 id="workflow-variables">Workflow Variables</h3>
<p>Workflow variables are similar to local variables within functions of a
programming language. You define variables for workflows in Workflow
Designer, and the scope of the workflow variables lies within the
defined workflow. In a workflow, all tasks are bound to the scope of the
workflow and have access to the workflow variables that are defined for
the workflow. You can use the workflow variable to do the following:</p>
<ul>
<li>
<p>Simplify complex workflows which have multiple branches based on the
conditional operator. Save the output of tasks that get executed in
different branches of the workflow into a single variable. This
variable can then be mapped in the downstream tasks irrespective of
the branch from which it was taken.</p>
</li>
<li>
<p>Evaluate the workflow input using a complex expression, save the
result as a variable, and reuse the variable in the subsequent
tasks.</p>
</li>
<li>
<p>Transform the output of a task with the help of template functions
and map the value into a workflow variable. The variables can then
be used in multiple mappings without having to redo the
transformation in every mapping.</p>
</li>
</ul>
<p>To define the workflow variable and specify the corresponding value, you
can do the following:</p>
<ul>
<li>
<p>In the General tab, click Add Workflow Variable and define the
variable properties.</p>
</li>
<li>
<p>In the Designer tab, click the task, and then click the Variables
tab.</p>
<ul>
<li>
<p>To add a new workflow variable, click Add Workflow Variable and
define the variable properties.</p>
</li>
<li>
<p>To add or edit a mapping to an existing variable, click Edit
Mapping and specify the new value.</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> To view events for a workflow variable, click the View icon.</p>
</blockquote>
<p>The workflow variables can be assigned one of the following values:</p>
<ul>
<li>
<p>Static value—Either the default value of the variable or the value
specified in the workflow tasks.</p>
</li>
<li>
<p>Direct mapping —Mapped to a workflow input, task output, or another
workflow variable.</p>
</li>
<li>
<p>Advanced or Transformational mapping—Evaluate a complex expression
and save the result in a variable.</p>
</li>
</ul>
<p>After you define the workflow variable, you can map the workflow
variable to task input, workflow output, or as an input for another
variable. For more information, see <u>Input, Variable, and Output
Mapping</u>.</p>
<p>Following is a simple example which explains static mapping for a
workflow variable. A workflow has two tasks <em>Task1</em> and <em>Task2</em> and a
workflow variable <em>Variable1</em> is defined with a default value as <em>100</em>.
For <em>Task1</em>, in the Variable tab for the task, you can specify a static
mapping for the workflow variable value as 90. Similarly, for <em>Task2</em>,
in the Variable tab for the task, you can specify the workflow variable
value as 80 by mapping the <em>Variable1</em> value.</p>
<p>When you execute the workflow, the start value of <em>Variable1</em> is the
default value <em>100</em> . After <em>Task1</em> is executed, the value of
<em>Variable1</em> is set to <em>90</em> based on the static value that is mapped for
the task. After <em>Task2</em> is executed, the value of <em>Variable1</em> is set to
<em>80</em> based on the static value that is mapped for the task.</p>
<p>Input, Variable, and Output Mapping</p>
<p>Workflows inputs, variables, and task outputs can be used for mapping
and they can be used as direct, transformed, or advanced mapping. The
syntax to refer to these will depend on the type of mapping.</p>
<ul>
<li>
<p>Workflow inputs are referenced as ${workflow.input.InputName} where
InputName is the Reference Name given to the workflow input and not
the Display Name or Label.</p>
</li>
<li>
<p>Workflow variables are referenced as ${workflow.variable.InputName}
, where InputName is the Reference Name for the workflow variable.</p>
</li>
<li>
<p>Task outputs are referenced as ${TaskName.output.OutputName} where
TaskName is the Instance Name for the task and not the Display Name
or Label and OutputName is the Reference Name for the task output.</p>
</li>
</ul>
<p>To specify an input mapping, select a task and click Edit against a task
input parameter.</p>
<p>To specify a workflow variable mapping, select a task and click Map
against a workflow variable parameter.</p>
<p>Following are the available options:</p>
<ul>
<li>
<p>Static Value—Enter a value that is assigned to the task input or
workflow variable field.</p>
</li>
<li>
<p>Direct Mapping—Map an existing input, workflow variable, or task
output to the task input.</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a
combination of one or more transformation stages for a task&rsquo;s input.
In each transformation stage, you can select a transformation
function along with its inputs. The transformation stages will be
converted into a template. You can then preview the template and
test the transformation with sample values.</p>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Transformed mapping is only supported for task inputs of
primitive data types, such as <em>string</em>, <em>integer</em>, <em>boolean</em>, and
<em>float</em>.</p>
</blockquote>
<ul>
<li>Advanced Mapping—Map a Golang template to the task input or workflow
variable. For example, FindAllString function returns a slice of all
substrings that match the given regular expression in the given
string.</li>
</ul>
<!-- -->
<ul>
<li>
<p>FindAllString(s, regex string) ([]string, error)<br>
Example: {{(FindAllString .global.task.input.NumberString \&quot;([0-9]+)\&quot;)}} <br>
returns array [“123”, “456”] for input string “123 some text 456”.</p>
</li>
<li>
<p>For example, Atoi function converts the given number in string
format to integer type.</p>
</li>
<li>
<p>Atoi(s string) (int, error)<br>
Example: {{Atoi .global.task.input.SizeString}} <br>
returns integer 2048 for input string “2048”</p>
</li>
</ul>
<h3 id="operations---conditional-task">Operations - Conditional Task</h3>
<p>Operations can be used to control the execution path of the workflows.
Orchestrator supports Condition tasks which can be used to control the
tasks that need to be executed.</p>
<h4 id="tasks-to-control-execution-flow-of-workflows">Tasks to Control Execution Flow of Workflows</h4>
<p>The Conditional Task under Operations allows you to perform programmatic
decisional expressions in a conditional task during a workflow
execution. The conditional expression can be simple expression or a
combined compound expression.</p>
<p><strong>Note:</strong> Only JSON style template is supported with conditional
expressions.</p>
<p>Conditional expressions support the following operators:</p>
<ul>
<li>
<p><strong>Comparison operators</strong> such as === (Equal to), != (Not equal to),
&gt; (Greater than), &lt; (Less than), &gt;= (Greater than or equal
to), &lt;= (Less than or equal to)</p>
</li>
<li>
<p><strong>Arithmetic operators</strong> such as =, -, * (Multiplication), /
(division), % (Modulo), ** (Logical AND)</p>
</li>
<li>
<p><strong>Logical operators</strong> such as &amp;&amp; (Logical AND), || (Logical OR), !
((Logical NOT)</p>
</li>
<li>
<p><strong>Ternary operator</strong> such as condition ? val1 : val2</p>
</li>
</ul>
<p>The syntax for workflow input is ${workflow.input.&lt;workflow input
ReferenceName&gt;} and the syntax for task output is ${&lt;Task
Name&gt;.output.&lt;Task Output Name&gt;}. You can get the values for the task
name and task output name from the Code view.</p>
<p>Following is an example for conditional expressions:</p>
<p>if ( (${workflow.input.name} != &rsquo;test&rsquo; || ${workflow.input.name} != &rsquo;test123’)) &lsquo;bad input&rsquo;; else if((${workflow.input.id} != null &amp;&amp; ${workflow.input.id} % 2 == 0)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name} != &rsquo;test123’ || ${workflow.input.name} != &rsquo;test123’)) &lsquo;bad input&rsquo;; else if((${workflow.input.id} != null &amp;&amp; ${workflow.input.id} % 2 == 0)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}.length === 12 || ${workflow.input.name} !== ‘test’ )) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;; &lt;&lt; fgfgfgfgfgfg , even<br>
if ( (${workflow.input.name}.length === 12 || ${workflow.input.name} !== ‘test’ )) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;; &lt;&lt; test , odd<br>
if ( (${workflow.input.name} != null &amp;&amp; &lsquo;decisionTest&rsquo;.indexOf(${workflow.input.name}) != -1 )) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}.toLowerCase() == ‘testing’)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;; &lt;&lt; used integers as input name to try odd path<br>
if ( (${workflow.input.name}.search(/\s/g) != -1)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}.match(/\s/g) != -1)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}.startsWith(&lsquo;Not&rsquo;,0) || ${workflow.input.name}.endsWith(&rsquo;.&rsquo;))) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}.length &gt;= 3 &amp;&amp; ${workflow.input.name}.length &lt;= 20)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}. === undefined)) ‘odd’; else ‘even’;<br>
if ( (${workflow.input.name}.search(&lsquo;Failed&rsquo;) != -1)) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;<br>
if ( (${workflow.input.name}.toLowerCase() != &rsquo;&rsquo; || ${workflow.input.name}.toUpperCase() != ‘Not-assigned’ )) &rsquo;even&rsquo;; else &lsquo;odd&rsquo;;</p>
<p>The expression is executed during runtime and depending on the result,
the respective path is chosen. If none of the conditions match, the
default path is chosen.</p>
<p>For example, you can have a conditional task that follows a path of
execution depending on the profile state. You can create a condition in
a workflow to check the state of the profile. If the profile is in the
Assigned state then you can deploy the profile, else delete the profile.</p>
<p>After choosing the conditional task, use the Conditions tab to specify
expressions in the Condition field of the tab. The values for the
condition are specified in the Value field of the Cases area.
Expressions are validated for syntax accuracy when workflow is saved.</p>
<p>The following examples return the value of the condition.</p>
<p>${workflow.input.Names}.length<br>
${workflow.input.ArrayOfIds}.length              (here ArrayOfIds represent an array)<br>
${workflow.input.Names}.toLowerCase()<br>
${workflow.input.Names}.toUpperCase()</p>
<p>The following examples return the boolean value &rsquo;true&rsquo; or &lsquo;false&rsquo;.</p>
<p>${workflow.input.Names}.startsWith(&lsquo;Te&rsquo;)<br>
${workflow.input.Names}.endsWith(&lsquo;st&rsquo;)<br>
${workflow.input.Names} == null<br>
${workflow.input.Names} != null</p>
<p>In addition to workflow, task output can also be used. Here a boolean
value is used in a ternary operation. If True, branch1 executes,
otherwise branch2 executes <em>${task1.output.IsValid} ? branch1 :
branch2</em>.</p>
<h4 id="operations---parallel-loop-task">Operations - Parallel Loop Task</h4>
<p>Operations can be used to control the execution path of the workflows.
Orchestrator supports the Parallel Loop operation task that can be used
to run a single task or sub-workflow, iteratively, based on a specified
count input.</p>
<p>The iteration count can either be a static value that is specified when
the workflow is created or a dynamic value that is derived from a
workflow input or task output.</p>
<p>When the task is executed, the count &lsquo;N&rsquo; is determined, and the tasks or
sub-workflows are scheduled for execution in parallel. When all the
instances of the task or sub-workflow reach a final state, the parallel
loop operation completes, and the workflow execution moves on to the
next task.</p>
<p><strong>Note:</strong> If one of the tasks or sub-workflows fails then the entire
parallel loop task fails.</p>
<p>The dynamic values for the count must be specified as a template
function. For example, if a loop must run for a count which matches the
length of a workflow input called StringArray, then the count must be
specified using a template function <em>{{ len
.global.workflow.input.StringArray }}</em>.</p>
<p>In addition, you can use the keyword <em>.iteration</em> in a workflow template
input to control the inputs that feed into the task. For example, the
task within the loop needs to take one value from the workflow input
StringArray, then the task string input can be mapped to the template
<em>HostGroupName{{.iteration}}</em> during the workflow creation.</p>
<p>Use the <strong>Parallel Loop</strong> task from the <strong>Operations</strong> section in the
Intersight Orchestrator Workflow Designer UI to build the workflow.</p>
<p>To add a task or a sub-workflow to a Parallel Loop task, you must drag
and drop the single task or sub-workflow inside the Parallel Loop task
in the Workflow Designer UI.</p>
<p>The following table explains the Parallel Loop task input properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Count</td>
<td><p>The iteration count value for the parallel loop. The count can either be a static value defined as a constant or a dynamic value defined as an expression that is evaluated to an integer value at execution time.</p>
<p>The dynamic values for the count must be specified as a template function. For example, if a loop must run for a count which matches the length of a workflow input called StringArray, then the count must be specified using a template function {{ len .global.workflow.input.StringArray }}.</p>
<p>The count must be less than or equal to 100.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example: Create a workflow with the Parallel Loop task to create
multiple storage host groups</strong></p>
<p>The following example workflow has two tasks—Parallel Loop and New
Storage Host Group. The first task runs the Parallel Loop task. In this
task, the Count input is a static value and is set to <em>2</em>. The second
task, New Storage Host Group, creates storage host groups with the host
group name as a workflow input.</p>
<p>When the workflow is executed, the count &lsquo;N&rsquo; is determined as 2, and two
create storage host group tasks are executed in parallel. When all the
instances of the task reach a final state, the parallel loop completes.</p>
<p>The workflow input field required for this example is as follows:</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Storage Device</td>
<td><ul>
<li><p>Reference Name—<em>StorageDevice</em></p></li>
<li><p>Type—<em>Target Data Type</em></p></li>
<li><p>Intersight API Reference—<em>/api/v1/storage/PureArrays</em></p></li>
<li><p>Selector Attribute—<em>Name</em></p></li>
<li><p>Selector Attribute—<em>Vendor</em></p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the properties for the Parallel Loop task:</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Count</td>
<td>Count—<em>2</em></td>
</tr>
</tbody>
</table>
<p>The following table lists the properties for the New Storage Host Group
task:</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Storage Device</td>
<td>Workflow Input—<em>${workflow.input.StorageDevice}</em></td>
</tr>
<tr class="even">
<td>Host Group</td>
<td><p>Custom Value—<em>HostGroupName{{.iteration}}</em></p>
<p>The keyword <em>.iteration</em> in a workflow template input to control the inputs that feed into the task.</p></td>
</tr>
</tbody>
</table>
<p>After you execute the workflow, you would see the following output:</p>
<p>├── New Storage Host Group<br>
├── &hellip;<br>
│   ├── Inputs<br>
│   │   └── Host Group: HostGroupName0<br>
│   │       └── Storage Device:{ 2 }<br>
│   │           ├── Moid: 619efa1d6e64612d317a248a<br>
│   │           └── ObjectType: storage.PureArray<br>
│   └── Outputs<br>
│       ├── ConfigResults:[ 1 ]<br>
│       │   └── Object: { 4 }<br>
│       │       ├── ConfigResCtx: { 1 }<br>
│       │       │   └── EntityData: { 1 }<br>
│       │       │       └── task: workflow.ApiTask<br>
│       │       ├── Message: Host group created successfully.<br>
│       │       ├── State: Ok<br>
│       │       └── Type: Config<br>
│       └── Host Group: HostGroupName0<br>
├── New Storage Host Group<br>
└── &hellip;<br>
    ├── Inputs<br>
    │   └── Host Group: HostGroupName1<br>
    │       └── Storage Device:{ 2 }<br>
    │           ├── Moid: 619efa1d6e64612d317a248a<br>
    │           └── ObjectType: storage.PureArray<br>
    └── Outputs<br>
        ├── ConfigResults:[ 1 ]<br>
        │   └── Object: { 4 }<br>
        │       ├── ConfigResCtx: { 1 }<br>
        │       │   └── EntityData: { 1 }<br>
        │       │       └── task: workflow.ApiTask<br>
        │       ├── Message: Host group created successfully.<br>
        │       ├── State: Ok<br>
        │       └── Type: Config<br>
        └── Host Group: HostGroupName1</p>
<p>The following is a sample code view:</p>
<p>{<br>
  &ldquo;Catalog&rdquo;: {<br>
    &ldquo;Moid&rdquo;: &ldquo;5e6109bc696f6e2d31f856e5&rdquo;,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.Catalog&rdquo;,<br>
    &ldquo;link&rdquo;: &ldquo;<a href="https://www.intersightcom/api/v1/workflow/Catalogs/5e6109bc696f6e2d31f856e5%22">https://www.intersightcom/api/v1/workflow/Catalogs/5e6109bc696f6e2d31f856e5&quot;</a><br>
  },<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  &ldquo;InputDefinition&rdquo;: [<br>
    {<br>
      &ldquo;CustomDataTypeProperties&rdquo;: {<br>
        &ldquo;CatalogMoid&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;CustomDataTypeId&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;CustomDataTypeName&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.CustomDataProperty&rdquo;<br>
      },<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;IsArray&rdquo;: false,<br>
      &ldquo;Label&rdquo;: &ldquo;Storage Device&rdquo;,<br>
      &ldquo;Max&rdquo;: 0,<br>
      &ldquo;Min&rdquo;: 0,<br>
      &ldquo;Name&rdquo;: &ldquo;StorageDevice&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.TargetDataType&rdquo;,<br>
      &ldquo;Properties&rdquo;: [<br>
        {<br>
          &ldquo;ConnectorAttribute&rdquo;: &ldquo;RegisteredDevice.Moid&rdquo;,<br>
          &ldquo;ConstraintAttributes&rdquo;: [<br>
            &ldquo;ObjectType&rdquo;<br>
          ],<br>
          &ldquo;DisplayAttributes&rdquo;: [<br>
            &ldquo;Name&rdquo;,<br>
            &ldquo;Vendor&rdquo;<br>
          ],<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.TargetProperty&rdquo;,<br>
          &ldquo;Selector&rdquo;: &ldquo;/api/v1/storage/PureArrays&rdquo;,<br>
          &ldquo;SelectorProperty&rdquo;: {<br>
            &ldquo;Body&rdquo;: null,<br>
            &ldquo;Method&rdquo;: &ldquo;GET&rdquo;,<br>
            &ldquo;ObjectType&rdquo;: &ldquo;workflow.SelectorProperty&rdquo;<br>
          },<br>
          &ldquo;SupportedObjects&rdquo;: [<br>
            &ldquo;storage.PureArray&rdquo;<br>
          ]<br>
        }<br>
      ],<br>
      &ldquo;Required&rdquo;: true<br>
    }<br>
  ],<br>
  &ldquo;InputParameterSet&rdquo;: [],<br>
  &ldquo;Label&rdquo;: &ldquo;Parallel Loop&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;ParallelLoop&rdquo;,<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Properties&rdquo;: {<br>
    &ldquo;Cloneable&rdquo;: true,<br>
    &ldquo;EnableDebug&rdquo;: false,<br>
    &ldquo;ExternalMeta&rdquo;: true,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkflowProperties&rdquo;,<br>
    &ldquo;Retryable&rdquo;: false,<br>
    &ldquo;SupportStatus&rdquo;: &ldquo;Supported&rdquo;<br>
  },<br>
  &ldquo;Tags&rdquo;: [],<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;parallelLoop1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Count&rdquo;: &ldquo;2&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;A Parallel Loop is a control task that runs one task or one sub-workflow multiple times based on a specified count.  The count can be a static value that is specified during design time or a dynamic value that is derived from workflow inputs or task outputs.  When the loop is executed, the count &lsquo;N&rsquo; is determined, N tasks or sub-workflows are scheduled for execution in parallel.  When all N instances of the task or sub-workflow reach a final state the parallel loop will complete and workflow execution will move on to the next task.  If any one of the tasks or sub-workflows fails, then the entire loop will fail.  Dynamic values for count must be specified as a template.  For example, if a loop must run for a count which matches the length of a workflow input called StringArray, then the count must be specified using a template &lsquo;{{ len .global.workflow.input.StringArray }}&rsquo;.  The iteration of the loop is available using the keyword &lsquo;.iteration&rsquo; and it can be used to control inputs that feed into the task.  For example, the task inside the loop needs to take one value from the workflow input StringArray, then the task string input can be mapped to the template &lsquo;{{ index .global.workflow.input.StringArray .iteration}}&rsquo; during design.&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Parallel Loop&rdquo;,<br>
      &ldquo;LoopStartTask&rdquo;: &ldquo;NewStorageHostGroup1&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;parallelLoop1&rdquo;,<br>
      &ldquo;NumberOfBatches&rdquo;: 1,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.LoopTask&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;Parallel&rdquo;: true<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Create a host group with host group name as input. On successful execution, the newly created host group name is generated as output.&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;HostGroupName&rdquo;: &ldquo;HostGroupName{{.iteration}}&rdquo;,<br>
        &ldquo;StorageDevice&rdquo;: &ldquo;${workflow.input.StorageDevice}&rdquo;<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;New Storage Host Group&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;NewStorageHostGroup1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;5f7ed8a2696f6e2d30eb388b&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;NewStorageHostGroup&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 2<br>
    }<br>
  ],<br>
  &ldquo;UiInputFilters&rdquo;: [],<br>
  &ldquo;UiRenderingData&rdquo;: {<br>
    &ldquo;Positions&rdquo;: [<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
        &ldquo;X&rdquo;: 269.5,<br>
        &ldquo;Y&rdquo;: 45.5<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 269.5,<br>
        &ldquo;Y&rdquo;: 303<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 412.5,<br>
        &ldquo;Y&rdquo;: 303<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;parallelLoop1&rdquo;,<br>
        &ldquo;X&rdquo;: 149.01800537109375,<br>
        &ldquo;Y&rdquo;: 116.75314331054688<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;NewStorageHostGroup1&rdquo;,<br>
        &ldquo;X&rdquo;: 185,<br>
        &ldquo;Y&rdquo;: 177<br>
      }<br>
    ]<br>
  },<br>
  &ldquo;Version&rdquo;: 1,<br>
  &ldquo;WorkflowMetadata&rdquo;: null<br>
}</p>
<h4 id="operations---serial-loop-task">Operations - Serial Loop Task</h4>
<p>Operations can be used to control the execution path of the workflows.
Orchestrator supports the Serial Loop operation task that is used to run
one or more tasks iteratively, based on a specified count input or a
condition.</p>
<p>In a Serial Loop task:</p>
<ul>
<li>
<p>you can execute one or more tasks within a loop, iteratively, based
on a specified count input or condition.</p>
</li>
<li>
<p>the tasks within the loop execute in succession to complete one
iteration, and then move on to the next iteration.</p>
</li>
</ul>
<p>For example, consider a Serial Loop task that comprises two tasks - Task
A and Task B, and a static Iteration Count of 4. When the Serial Loop
task is executed, Task A and Task B are executed in succession. After
the first iteration is completed, the second iteration begins. This
cycle repeats until the iteration count reaches 4.</p>
<p><strong>Note:</strong> The Serial Loop task does not support sub-workflow tasks,
conditional tasks, forks or joins and nested loops.</p>
<p>Use the <strong>Serial Loop</strong> task from the <strong>Operations</strong> section in the
Intersight Orchestrator Workflow Designer UI to build the workflow. To
add tasks to a Serial Loop task, you must drag and drop the tasks inside
the Serial Loop task in the Workflow Designer UI.</p>
<p>The following table explains the Serial Loop task input properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Iteration Count</td>
<td><p>The iteration count value for the serial loop.</p>
<p>Iteration Count is specified in Loop Mode and the tasks are scheduled for execution in a serial loop. When the instance of the loop reaches the final iteration count, the serial loop operation ends, and the workflow moves on to the next task.</p>
<p>The count can either be a static value defined as a constant or a dynamic value defined as an expression that is evaluated to an integer value at execution time. The dynamic values for the count must be specified as a Golang template function.</p>
<p>Example of a static Iteration Count Value:</p>
<p>Iteration Count Value—<em>3</em></p>
<p>The loop runs for 3 iterations.</p>
<p>Example for a dynamic Iteration Count Value:</p>
<p>Iteration Count Value—{{ len .global.workflow.input.StringArray }}</p>
<p>If a loop must run for a count which matches the length of a workflow input called StringArray you must specify the count using a template function.</p>
<p><strong>Note:</strong> The count must be less than or equal to 100.</p></td>
</tr>
<tr class="even">
<td>Condition</td>
<td><p>The condition definition for the serial loop execution.</p>
<p>When Condition is selected in Loop Mode, the tasks are scheduled for execution every time the condition holds true. The condition is validated after every iteration. When the instance of the serial loop task does not satisfy the condition anymore, the serial loop operation ends, and the workflow execution moves on to the next task.</p>
<p>The condition statement is a simple JavaScript Boolean expression. If it returns a True value, the serial loop executes, or else, the loop terminates.</p>
<p>For example, when the condition specified in Loop Mode is:</p>
<p>if (${InvokeSshCommands1.output.ExtractedParameters.userCreatedState} == "present") { true; } else { false; }</p>
<p>In this case, the serial loop runs whenever the task output value of (${InvokeSshCommands1.output.ExtractedParameters.userCreatedState} is "present" and the loop terminates when the task output is any value other than "present".</p>
<p>The following are few examples of input values that use JavaScript conditional expressions:</p>
<ul>
<li><p><strong>Static Value</strong>— You can specify a static value within the conditional expression. The serial loop runs until the iteration reaches the defined count.</p></li>
</ul>
<blockquote>
<p><strong>Note:</strong> Use the expression $.&lt;SerialLoopTaskName&gt;['iteration'] in the conditional expression when the condition is based on comparison of iteration count.</p>
</blockquote>
<ul>
<li><blockquote>
<p>if ($.serialLoop1['iteration'] &lt; 3) { true; } else { false; }</p>
</blockquote></li>
<li><blockquote>
<p>In the above example,</p>
</blockquote>
<ul>
<li><p>the static value defined within the conditional expression is 3.</p></li>
<li><p>$.&lt;SerialLoopTaskName&gt;['iteration'] fetches the running iteration count of the serial loop during execution.</p></li>
<li><p>serialLoop1 is the Serial Loop task name.</p></li>
</ul></li>
</ul>
<ul>
<li><p><strong>Workflow Input</strong>— The serial loop takes a workflow input, evaluates the condition, and runs until the iteration reaches the count derived from the workflow input. In the given example, loopcount is the workflow input.</p></li>
</ul>
<ul>
<li><blockquote>
<p>if ($.serialLoop1['iteration'] &lt; ${workflow.input.loopcount}) { true; } else { false; }</p>
</blockquote></li>
</ul>
<ul>
<li><p><strong>Task Output as an Input</strong>— The serial loop takes a task output, evaluates the condition, and runs until the iteration reaches the count derived from the task output. In the given example, countis the task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>if ($.serialLoop1['iteration'] &lt; ${taskA.output.count}) { true; } else { false; }</p>
</blockquote></li>
</ul>
<p><strong>Note:</strong> A maximum of 100 iterations are allowed to prevent infinite looping.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example: Create a workflow using Iteration Count in a serial loop task
to create storage hosts and assign the host to a newly created host
group</strong></p>
<p>The following workflow example consists of a task called New Storage
Host Group, present outside the serial loop, and two tasks — New Storage
Host and Add Host to Storage Host Group, embedded within the serial
loop. The serial loop mode is Iteration Count.</p>
<p>When the workflow is executed, the New Storage Host Group task first
creates a new storage host group. Then, the New Storage Host and the Add
Host to Storage Host Group tasks are implemented in succession within
the serial loop. At the end of the first iteration, the newly created
storage host is added to the new storage host group, and then, the
second iteration begins. The loop repeats until the iteration count,
which is the total number of storage hosts created, reaches the
specified count.</p>
<p>The Workflow Input fields required for this example are as follows:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Host Group</td>
<td><ul>
<li><p>Reference Name—<em>Hostgroup</em></p></li>
<li><p>Type—<em>String</em></p></li>
<li><p>Min—<em>1</em></p></li>
<li><p>Max—<em>63</em></p></li>
<li><p>Regex—<em>^[a-zA-Z0-9]+([a-zA-Z0-9-]*[a-zA-Z0-9])*$</em></p></li>
<li><p>Object Selector— Enable</p></li>
<li><p>Intersight API Reference—<em>/api/v1/search/SearchItems?$filter=(IndexMotypes eq storage.BaseHostGroup)&amp;$orderby=Name</em></p></li>
<li><p>Selector Attribute—<em>Name</em></p></li>
<li><p>Value Attribute—<em>Name</em></p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the properties of the Serial Loop task:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Loop Mode</td>
<td>Iteration Count</td>
</tr>
<tr class="even">
<td>Iteration Count Value</td>
<td><p><em>5</em></p>
<p>This is a static value.</p></td>
</tr>
</tbody>
</table>
<p>The following table lists the input properties of the New Storage Host
task:</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Storage Device</td>
<td><p>Static Value</p>
<p>Select the Storage Device.</p></td>
</tr>
<tr class="even">
<td>Host</td>
<td><p>Static Value—serialLoopHost{{.iteration}}</p>
<p>The keyword .iteration is used to append the iteration count, starting from 0, to the input serialLoopHost.</p>
<p>The new storage hosts are created in order, for example: serialLoopHost0, serialLoopHost1, serialLoopHost2, serialLoopHost3 and serialLoopHost4. The loop stops when the count reaches 5.</p></td>
</tr>
<tr class="odd">
<td>Storage Vendor Host Identifier</td>
<td>Static Value—Pure FlashArray</td>
</tr>
<tr class="even">
<td>Storage Vendor Virtual Machine</td>
<td>Static Value—Pure FlashArray</td>
</tr>
<tr class="odd">
<td>Storage Vendor Host Options</td>
<td>Static Value—Pure FlashArray</td>
</tr>
</tbody>
</table>
<p>The following table lists the properties of the Add Host to Storage Host
Group task:</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Storage Device</td>
<td><p>Static Value</p>
<p>Select the Storage Device.</p></td>
</tr>
<tr class="even">
<td>Host Group</td>
<td><p>Advanced Mapping—${NewStorageHostGroup1.output.HostGroupName}</p>
<p>HostGroupName is the task output of the previous task outside the serial loop, which in this case is the New Storage Host Group task.</p></td>
</tr>
<tr class="odd">
<td>Host Name</td>
<td><p>Advanced Mapping—${NewStorageHost1.output.HostName}</p>
<p>HostName is the task output of the previous task inside the serial loop.</p>
<p>Pure FlashArray</p></td>
</tr>
</tbody>
</table>
<p><strong>Example: Create a workflow using condition loop mode in a serial loop task to run Ansible Playbook on the hosts</strong></p>
<p>The following workflow example consists of a Serial Loop task with two
embedded tasks- Invoke Ansible Playbook and Invoke SSH Commands. The
serial loop mode is Condition.</p>
<p>When the serial loop task is executed , the Ansible Playbook and Invoke
SSH Commands tasks run in succession within the loop.</p>
<p>In this example, the workflow requires two Ansible Playbooks- one to
create a user and the other to delete a user. The Invoke Ansible
Playbook task iterates across the playbooks, and a log file is
generated. The Invoke SSH Commands task prints the log file. The log may
show that the user is present or absent based on the Playbook that is
run.</p>
<p>At the end of each iteration, the output value parsed as
userCreatedState which is present in the log file is evaluated. The
serial loop runs another iteration whenever a user is present and there
is a &ldquo;present&rdquo; value in the capture entity called userCreatedState. The
loop exits when there is no value or any value other than &ldquo;present&rdquo; in
userCreatedState.</p>
<p>For example, when the delete user playbook is run, the output value in
userCreatedState may be &ldquo;absent&rdquo;. In such a case, the condition is not
met, and the loop exits.</p>
<p>The Workflow Input fields required for this example are as follows:</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>playbookPaths</td>
<td><ul>
<li><p>Reference Name—<em>playbookPaths</em></p></li>
<li><p>Type—<em>String</em></p></li>
<li><p>Value Restrictions—<em>Collection/Multiple</em></p></li>
<li><p>Min—<em>0</em></p></li>
<li><p>Max—<em>100</em></p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the properties for the Serial Loop task:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Loop Mode</td>
<td>Condition</td>
</tr>
<tr class="even">
<td>Condition Value</td>
<td><p>if</p>
<p>(${InvokeSshCommands1.output.ExtractedParameters.userCreatedState} == "present") { true; } else { false; }</p>
<p>In this case, the serial loop runs whenever a user is present and there is a value "present" in the capture entity called userCreatedState. The loop exits when there is no value or any value other than "present" in userCreatedState.</p></td>
</tr>
</tbody>
</table>
<p>The following table lists the input properties for the Invoke Ansible
Playbook task:</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ansible Controller</td>
<td>Static Value</td>
</tr>
<tr class="even">
<td>Playbook Path</td>
<td><p>Advanced Mapping—{{index .global.workflow.input.playbookPaths .iteration}}</p>
<p>A Golang expression is used here which iterates over the defined workflow input playbookPaths. In this example, playbookPaths is an array of Ansible playbook paths.</p></td>
</tr>
<tr class="odd">
<td>Host Inventory</td>
<td><p>Static Value</p>
<p>Example: /home/qali/vspancha/playbooks/33hosts</p></td>
</tr>
</tbody>
</table>
<p>The following table lists the input properties for the Invoke SSH
Command task:</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td>Static Value</td>
</tr>
<tr class="even">
<td>SSH Command</td>
<td><p>Static Value—cat {{.global.InvokeAnsiblePlaybook1.output.ExecutionLogPath}}</p>
<p>The SSH command prints the output. ExecutionLogPath is the output of the task InvokeAnsiblePlaybook1 present within the serial loop.</p></td>
</tr>
<tr class="odd">
<td>Show Command Output</td>
<td><p>Static Value</p>
<p>true</p></td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>Static Value</p>
<ul>
<li><p>Regular Expression—The regular expression of the line in the command response where the capture value, which is userCreatedState in this example, resides.\"state\":\s\"$&lt;userCreatedState&gt;\"</p></li>
<li><p>Name—Name of the output under which the captured value is saved, userCreatedState.</p></li>
<li><p>Type—<em>String</em></p></li>
</ul></td>
</tr>
</tbody>
</table>
<h3 id="managing-the-lifecycle-of-a-workflow">Managing the Lifecycle of a Workflow</h3>
<p>Workflow management consists of organizing, creating, updating, and
deletion of workflows. The following table describes the set of actions
that you can perform with workflows in Cisco Intersight.</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th>Actions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>View Workflows</td>
<td>Choosing Orchestration from the left navigation pane will display all workflows in a tabular format. You can view information such as the workflow name and description, the number of versions available, the number of times the workflow has been executed, the last execution status, validation information and the last update time and date.</td>
</tr>
<tr class="even">
<td>Create a New Workflow</td>
<td>Choose Orchestration from the left navigation pane and click Create Workflow. This option opens up the Workflow Designer, using which you can create a new workflow.</td>
</tr>
<tr class="odd">
<td>Create a Version for a Workflow</td>
<td>You can create multiple versions for a workflow. In addition, you can set a specific version of the workflow as the default version for the workflow. See <a href="file://E:\\help\\resources\\Workflow_Designer">Managing Versions for Workflows</a>.</td>
</tr>
<tr class="even">
<td>Delete a Workflow</td>
<td><p>From the tabular list of workflows, you can select a workflow and click Delete. This will remove the workflow and all versions of the workflow.</p>
<p>You cannot delete a workflow when :</p>
<ul>
<li><p>workflow is used as sub-workflow task in another workflow.</p></li>
<li><p>workflow is in running state.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Execute a Workflow</td>
<td><p>Select a workflow from the tabular list of workflows and choose Execute. Alternatively, you can click the workflow name, and then choose Execute in the Workflow Designer.</p>
<p><strong>Important:</strong> Workflow execution includes privilege-based validation for tasks. With the introduction of privilege-based validation for virtualization, compute and storage tasks, a user must have all the required privileges to execute all the domain tasks within a workflow. For example, a user can successfully execute a workflow that includes storage and virtualization tasks only if the user has both Storage and Virtualization Administrator privileges. In the absence of either one of these privileges, the Execute button will not be displayed and the user cannot execute the workflow.</p>
<p>However, an Account Administrator can execute all workflow.</p>
<p>While configuring the properties of a workflow, if you selected the Enable Retry option, then in the event of a workflow failure, you can either choose to execute the workflow again from the point of failure, or you can execute the entire workflow again.</p></td>
</tr>
<tr class="even">
<td>Clone a Workflow</td>
<td>From the tabular list of workflows, you can select a workflow and click Clone. This will clone the selected workflow.</td>
</tr>
<tr class="odd">
<td>Save a Workflow as</td>
<td><p>From the tabular list of workflows, you can choose a workflow and click. By default, the workflow details are displayed in the Designer tab. You can choose Save As option from the Action drop-down list to clone or create a new version of the existing workflow.</p>
<p>You can also perform this operation in the General tab.</p>
<p>In the Save As screen, you can choose one of the following:</p>
<ul>
<li><p>New Version—Specify a new version and related description. Click Save.</p></li>
</ul>
<ul>
<li><blockquote>
<p>This option is not available for a system generated workflow.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Clone—Specify user-friendly short name, reference name, description, and tag key. Click Save. For more information, see <a href="file://E:\\help\\resources\\Workflow_Designer">Cloning a Workflow</a>.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<h4 id="cloning-a-workflow">Cloning a Workflow</h4>
<p>You can clone a workflow. The cloned workflow is identical to the
original workflow. You can edit the new workflow immediately. You might
do this, for example, to create a workflow that is similar to the source
workflow that can be edited based on your requirements. The new workflow
has a new, separate version history.</p>
<p>To clone a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>From the tabular list of workflows, select a workflow and choose
Clone.</p>
</li>
<li>
<p>In the Clone Workflow screen, edit the user-friendly short name,
reference name, description, and organization details. The
organization mappings are displayed only for pre-canned workflows
and not for the custom workflows.</p>
</li>
<li>
<p>Check the Open Clone in Editor check box if you want to open the
cloned workflow in the workflow designer and edit the details.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Open Clone in Editor check box is not displayed when you
clone a workflow using the Save As option.</p>
</blockquote>
<ol>
<li>Click Clone.</li>
</ol>
<h4 id="managing-versions-for-workflows">Managing Versions for Workflows</h4>
<p>Cisco Intersight allows you to create and manage versions for workflows.
In addition to creating versions, you can also set a specific version as
the default version for the workflow. You can create a version of a
workflow and execute it only if you are one of the following users:</p>
<ul>
<li>
<p>Account Administrator</p>
</li>
<li>
<p>User with Workflow Designer privileges</p>
</li>
</ul>
<p>Read-Only users can only view versions of a workflow. They cannot
create, edit, execute or delete versions. Users with Storage
Administrator and Virtualization Administrator privileges can only view
and execute specific versions of a workflow.</p>
<p>To create a version for a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>From the tabular list of workflows, select a workflow and choose
Manage Versions.</p>
</li>
<li>
<p>In the Manage Versions screen, you can perform the following tasks:</p>
</li>
</ol>
<ul>
<li>
<p>Create a new version for the workflow</p>
</li>
<li>
<p>Execute a specific version of the workflow</p>
</li>
<li>
<p>Delete a specific version. You cannot directly delete the default
version of a workflow. To delete the default version, perform the
following:</p>
<ul>
<li>
<p>Make another version the default.</p>
</li>
<li>
<p>Change the workflow version to be deleted as non-default.</p>
</li>
<li>
<p>Delete the workflow version that was changes as non-default.</p>
</li>
</ul>
</li>
<li>
<p>Set a specific version of the workflow as the default version</p>
</li>
</ul>
<ol>
<li>Choose Create a New Version and enter the following details:</li>
</ol>
<ul>
<li>
<p>Source Version—Choose a specific version that will form the source
for the new version that you are creating.</p>
</li>
<li>
<p>Version—Specify a version number for the workflow.</p>
</li>
<li>
<p>Description—Enter a description for the version so that you can
identify it.</p>
</li>
<li>
<p>Set as Default Version—Check this check box to set this new version
as the default version for the workflow.</p>
</li>
</ul>
<ol>
<li>Click Create.</li>
</ol>
<!-- -->
<ol>
<li>After creating a version for a workflow, clicking on the version
number on the Manage Versions screen opens the workflow in Workflow
Designer.</li>
</ol>
<p><strong>Note:</strong> Deleting a workflow will delete all versions created for the
workflow.</p>
<h4 id="exporting-a-workflow">Exporting a Workflow</h4>
<p>Intersight Cloud Orchestrator enables you to export workflows from an
account to your system and then import them to another account.</p>
<p>To export a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click the Workflow tab.</p>
</li>
<li>
<p>From the tabular list of workflows, do one of the following:</p>
</li>
</ol>
<ul>
<li>
<p>Select a workflow, click the Ellipsis (…) icon in the same row, and
then choose Export Workflow.</p>
</li>
<li>
<p>Select multiple workflows, click the Ellipsis (…) icon from the
header or footer of the tabular list, and then choose Export
Workflow.</p>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> You can also export workflows from the Actions menu in the
Workflow Designer window.</p>
</blockquote>
<ol>
<li>
<p>In the Export Workflow screen:</p>
<ol>
<li>
<p>In the JSON File Name field, use the default filename or enter a
filename of your choice for the JSON file that stores the
workflow components.</p>
</li>
<li>
<p>Use the Export Tags toggle button to include or exclude the
user-defined tags. ICO does not export the system-defined tags.</p>
</li>
<li>
<p>Click Export.</p>
</li>
<li>
<p>Save a local copy of the JSON file.</p>
</li>
</ol>
</li>
</ol>
<h4 id="importing-a-workflow">Importing a Workflow</h4>
<p>Intersight Cloud Orchestrator enables you to import workflows to your
account by importing a JSON file that contains the workflow components.
You can create the JSON file by exporting the workflow components from
another account.</p>
<p>To import a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Import.</p>
</li>
</ol>
<!-- -->
<ol>
<li>The Import wizard appears.</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Select File screen:</p>
<ol>
<li>
<p>From the Organization drop-down list, choose the organization to
which you want to import the workflow(s).</p>
</li>
<li>
<p>Click Browse, and then select the JSON file that contains the
Workflow(s).</p>
</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Ensure that the file size of the JSON file is not more than
1MB. If the file size is more than 1MB, export the workflow(s) in
batches, and then try import.</p>
</blockquote>
<ol>
<li>Click Next.</li>
</ol>
<!-- -->
<ol>
<li>Intersight Cloud Orchestrator validates the JSON file and displays
<blockquote>
<p>the workflow(s) in the Details screen.</p>
</blockquote>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Details screen:</p>
<ol>
<li>To associate an additional tag to the components listed in the
table, enter the tag in the Set Tags field.</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Set Tags is an optional field. You must enter the tag in the
key:value format.</p>
</blockquote>
<ol>
<li>
<p>If one or more workflow components are already available in the
system, choose a rule to replace or skip the duplicate components.</p>
</li>
<li>
<p>Click Import.</p>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Import Result screen:</p>
<ol>
<li>
<p>Verify the status of the imported workflow.</p>
</li>
<li>
<p>If you want to view the details of the import request:</p>
</li>
</ol>
</li>
</ol>
<ul>
<li>
<p>Click the link displayed above the table.</p>
</li>
<li>
<p>Alternatively, click the Requests icon displayed in the menu bar.</p>
</li>
</ul>
<!-- -->
<ul>
<li>
<p>For more information, see
<a href="file://E:%5Chelp%5Cresources%5CWorkflow_Designer">Requests</a>.</p>
<ol>
<li>Click Close.</li>
</ol>
</li>
</ul>
<p>You can execute the imported workflow from the Workflows tab.</p>
<h4 id="defining-workflow-input-rules">Defining Workflow Input Rules</h4>
<p>Intersight Cloud Orchestrator allows you to configure input rules that
control the display of fields in the workflow execution screen. You can
define these input rules for a workflow by using the Intersight API and
while creating a composite data type. By default, all input fields for a
workflow are displayed in the workflow execution screen. By configuring
input rules, the fields in this screen are displayed or hidden based on
the value selected for a previous input field.</p>
<p>After configuring input rules in the workflow definition using the
Intersight API, you can view the input rules using the Code tab in the
Workflow Designer.</p>
<p>Following is a sample of a simple input rule set for a workflow:</p>
<p>&ldquo;InputParameterSet&rdquo;:[<br>
{<br>
&ldquo;ObjectType&rdquo;: &ldquo;workflow.ParameterSet&rdquo;,<br>
&ldquo;Name&rdquo;: &ldquo;rule-1&rdquo;,<br>
&ldquo;ControlParameter&rdquo;: &ldquo;input-1&rdquo;,<br>
&ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
&ldquo;Value&rdquo;: &ldquo;true&rdquo;,<br>
&ldquo;EnableParameters&rdquo;: [<br>
&ldquo;input-2&rdquo;<br>
]<br>
},<br>
{<br>
&ldquo;ObjectType&rdquo;: &ldquo;workflow.ParameterSet&rdquo;,<br>
&ldquo;Name&rdquo;: &ldquo;rule-2&rdquo;,<br>
&ldquo;ControlParameter&rdquo;: &ldquo;input-1&rdquo;,<br>
&ldquo;Condition&rdquo;: &ldquo;ne&rdquo;,<br>
&ldquo;Value&rdquo;: &ldquo;true&rdquo;,<br>
&ldquo;EnableParameters&rdquo;: [<br>
&ldquo;input-3&rdquo;,<br>
]<br>
}<br>
]</p>
<p>Following is an example for the parameter sets defined at workflow
level:</p>
<p>{<br>
  &ldquo;Label&rdquo;: &ldquo;Provision VM&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;ProvisionVM&rdquo;,<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  // Parameter set defintion <br>
  &ldquo;InputParameterSet&rdquo;: [<br>
    {<br>
      // rule-1 enables &lsquo;vmwarehost&rsquo; input when value of &lsquo;vmtype&rsquo; is &lsquo;vmware&rsquo;<br>
      &ldquo;Name&rdquo;: &ldquo;rule-1&rdquo;,<br>
      &ldquo;ControlParameter&rdquo;: &ldquo;vmtype&rdquo;,<br>
      &ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
      &ldquo;Value&rdquo;: &ldquo;vmware&rdquo;,<br>
      &ldquo;EnableParameters&rdquo;: [<br>
        &ldquo;vmwarehost&rdquo;<br>
      ]<br>
    },<br>
    {<br>
      // rule-2 enables &lsquo;hxcluster&rsquo; input when value of &lsquo;vmtype&rsquo; is &lsquo;hx&rsquo;<br>
      &ldquo;Name&rdquo;: &ldquo;rule-2&rdquo;,<br>
      &ldquo;ControlParameter&rdquo;: &ldquo;vmtype&rdquo;,<br>
      &ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
      &ldquo;Value&rdquo;: &ldquo;hx&rdquo;,<br>
      &ldquo;EnableParameters&rdquo;: [<br>
        &ldquo;hxcluster&rdquo;<br>
      ]<br>
    }<br>
  ],<br>
  &ldquo;InputDefinition&rdquo;: [<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;VM Type&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;vmtype&rdquo;,<br>
      &ldquo;Required&rdquo;: false,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;ClassId&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;ClassId&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;EnumList&rdquo;: [<br>
            {<br>
              &ldquo;ClassId&rdquo;: &ldquo;workflow.EnumEntry&rdquo;,<br>
              &ldquo;ObjectType&rdquo;: &ldquo;workflow.EnumEntry&rdquo;,<br>
              &ldquo;Label&rdquo;: &ldquo;VMWare&rdquo;,<br>
              &ldquo;Value&rdquo;: &ldquo;vmware&rdquo;<br>
            },<br>
            {<br>
              &ldquo;ClassId&rdquo;: &ldquo;workflow.EnumEntry&rdquo;,<br>
              &ldquo;ObjectType&rdquo;: &ldquo;workflow.EnumEntry&rdquo;,<br>
              &ldquo;Label&rdquo;: &ldquo;HX&rdquo;,<br>
              &ldquo;Value&rdquo;: &ldquo;hx&rdquo;<br>
            }<br>
          ],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;Secure&rdquo;: false,<br>
        &ldquo;Type&rdquo;: &ldquo;enum&rdquo;<br>
      }<br>
    },<br>
    {<br>
      &ldquo;Name&rdquo;: &ldquo;vmname&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;VM Name&rdquo;,<br>
      &ldquo;Required&rdquo;: false,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Max&rdquo;: 0<br>
        },<br>
        &ldquo;Secure&rdquo;: false<br>
      },<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Name&rdquo;: &ldquo;vmwarehost&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Host&rdquo;,<br>
      &ldquo;Required&rdquo;: false,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Max&rdquo;: 0<br>
        },<br>
        &ldquo;Secure&rdquo;: false<br>
      },<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Name&rdquo;: &ldquo;hxcluster&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Cluster&rdquo;,<br>
      &ldquo;Required&rdquo;: false,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Max&rdquo;: 0<br>
        },<br>
        &ldquo;Secure&rdquo;: false<br>
      },<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;<br>
    }<br>
  ],<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;ClassId&rdquo;: &ldquo;workflow.StartTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;NewProfile1596244596840&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ClassId&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ClassId&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5dd45ab6696f6e2d301e2df6&rdquo;,<br>
      &ldquo;ClassId&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Task to create a Profile&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Provision VM&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;ProvisionVM1596244596840&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;5efd7c84696f6e2d309e6877&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;NewProfile&rdquo;,<br>
      &ldquo;Version&rdquo;: 1<br>
    }<br>
  ],<br>
  &ldquo;Version&rdquo;: 1<br>
}</p>
<p>Following is an example for the parameter sets defined at custom data
type level:</p>
<p>{<br>
  &ldquo;Label&rdquo;: &ldquo;ClusterType&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;ClusterType&rdquo;,<br>
  &ldquo;CompositeType&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;Type definition for a cluster information.&rdquo;,<br>
  &ldquo;TypeDefinition&rdquo;: [<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Cluster Type&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;clustertype&rdquo;,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;EnumList&rdquo;: [<br>
            {<br>
              &ldquo;ObjectType&rdquo;: &ldquo;workflow.EnumEntry&rdquo;,<br>
              &ldquo;Label&rdquo;: &ldquo;VM Ware&rdquo;,<br>
              &ldquo;Value&rdquo;: &ldquo;vmware&rdquo;<br>
            },<br>
            {<br>
              &ldquo;ObjectType&rdquo;: &ldquo;workflow.EnumEntry&rdquo;,<br>
              &ldquo;Label&rdquo;: &ldquo;HX AP&rdquo;,<br>
              &ldquo;Value&rdquo;: &ldquo;hxap&rdquo;<br>
            }<br>
          ]<br>
        },<br>
        &ldquo;Type&rdquo;: &ldquo;enum&rdquo;<br>
      }<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;VMware Cluster&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;vmwarecluster&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;HX Cluster&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;hxcluster&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Cluster Description&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;clusterdescr&rdquo;<br>
    }<br>
  ],<br>
  &ldquo;ParameterSet&rdquo;: [<br>
    {<br>
      &ldquo;Name&rdquo;: &ldquo;rule-1&rdquo;,<br>
      &ldquo;Field&rdquo;: &ldquo;clustertype&rdquo;,<br>
      &ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
      &ldquo;Value&rdquo;: &ldquo;vmware&rdquo;,<br>
      &ldquo;ShowFields&rdquo;: [<br>
        &ldquo;vmwarecluster&rdquo;<br>
      ]<br>
    },<br>
    {<br>
      &ldquo;Name&rdquo;: &ldquo;rule-2&rdquo;,<br>
      &ldquo;Field&rdquo;: &ldquo;clustertype&rdquo;,<br>
      &ldquo;Condition&rdquo;: &ldquo;eq&rdquo;,<br>
      &ldquo;Value&rdquo;: &ldquo;hxap&rdquo;,<br>
      &ldquo;ShowFields&rdquo;: [<br>
        &ldquo;hxcluster&rdquo;<br>
      ]<br>
    }<br>
  ]<br>
}</p>
<p>Supported Workflows for Storage Targets</p>
<p>The following table lists workflows supported in the various storage
targets available on Intersight:</p>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 24%" />
<col style="width: 15%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th>List of Storage Workflows</th>
<th>Pure Storage</th>
<th>NetApp</th>
<th>Hitachi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>New Storage Host</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>New Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New VMFS Datastore</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>New NAS Datastore</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove NFS Datastore</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage Host</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Remove Storage Export Policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove VMFS Datastore</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Update Storage Host</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Update NAS Datastore</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Update VMFS Datastore</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>New Storage Interface</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage Export Policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New Storage Virtual Machine</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
</tbody>
</table>
<h2 id="task-designer">Task Designer</h2>
<p>Cisco Intersight allows you to create tasks in which API requests can be
executed in remote targets that can be reached through Intersight. You
create tasks so that they can be used in workflows.</p>
<p><strong>Note:</strong> To execute the new tasks for VMware vCenter networking
operations, you should upgrade to Intersight Assist version 1.0.9-278.</p>
<p>To launch the Task Designer, choose Orchestration <strong>&gt;</strong> Task. A
dashboard displays the following details under these tabs, namely, My
Tasks, System Tasks, and All Tasks:</p>
<ul>
<li>
<p>Top Task Categories</p>
</li>
<li>
<p>Number of System Defined Tasks</p>
</li>
<li>
<p>Top Workflows by Targets</p>
</li>
</ul>
<p>Below the dashboard is a tabular list of tasks displaying the following
information:</p>
<ul>
<li>
<p>Display Name</p>
</li>
<li>
<p>Description</p>
</li>
<li>
<p>Validation Status</p>
</li>
<li>
<p>Last Update</p>
</li>
<li>
<p>System Defined</p>
</li>
<li>
<p>Organization</p>
</li>
</ul>
<p>From this screen, with an account administrator or a Workflow Designer
role, you can perform the following actions for an organization:</p>
<ul>
<li>
<p>Create a task</p>
</li>
<li>
<p>Edit or delete a task</p>
</li>
</ul>
<p><strong>Note:</strong> Tasks created in an organization can be used in workflows
created within that organization only.</p>
<p>Supported Requests</p>
<p>You can define and execute one or more API requests in the task
definition. You can extract the required values from the API responses
and use them in subsequent API requests as task output values. You
provide values for different properties in an HTTP API request and use
them in subsequent API request or as task output values. You can also
provide values for different properties of an HTTP API request, such as,
HTTP method, URL, header, cookies, etc.</p>
<p>The API requests can be executed on external targets that are reachable
by Intersight, either directly or through device connectors. The
supported HTTP authentication scheme is Basic Authentication over HTTPS.
The external targets with their credentials are defined when specifying
the Targets in the Targets screen (see: <a href="file://E:%5Chelp%5Cfeatures%5Ccisco_intersight%5Cadmin">Target
Management</a>). Hence,
there is no need to provide credentials or authentication specific
headers in the request. The input parameter of type target data type is
the source from which the details are automatically collected from.</p>
<p>Response Parser</p>
<p>The response parser contains information about the required values,
their types, and the location in the API responses. You specify the
required values along with API request details. These details are used
by the response parser to extract values from the API responses. The
extracted values are used as task output values and to determine the
task execution status and the status message.</p>
<p>The supported response type is JSON. The response parser supports
extraction of values from JSON responses. The users shall provide the
information such as the value parameter name, type and the JSON path of
the value location. You can extract multiple values from the API
response by providing the above details for each required value.</p>
<p>Outcomes</p>
<p>An outcome is the combination of a condition and task status. You use
the extracted values from the API response to determine the task status
and set the status with an appropriate message, when the conditions
match. You can specify one or more outcomes and the outcomes are
evaluated in the specified order. The first outcome condition that
matches sets the task status and message. If none of the outcome
condition matches, the task shall be marked as successful. The outcomes
of a task are as follows:</p>
<ul>
<li>
<p>Success—Marks the API execution as Success if the condition matches</p>
</li>
<li>
<p>Skip to Success—Stops further API executions of the task and marks
the task as successful when the condition matches</p>
</li>
<li>
<p>Status—Retains a task as work in progress, only updating the status</p>
</li>
<li>
<p>Error—Marks the API execution as Failed if the condition matches.
Task retry will be attempted if the task has any retries left</p>
</li>
<li>
<p>Terminal error—Marks the API execution as Failed if the condition
matches. This marks a non-recoverable error and no retries are
attempted</p>
</li>
<li>
<p>Skip Task Execution—Skips execution of task if the condition matches
in the API. This will skip execution of all the subsequent APIs in
the task</p>
</li>
</ul>
<p>If the task status is Terminal Error, there are no retries for that
task.</p>
<p>Creating a Task</p>
<p>Task creation can be broken down into the following sequence of steps:</p>
<ol>
<li>
<p>Defining a task—you specify the name of the task and provide a few
other generic details.</p>
</li>
<li>
<p>Defining task inputs and task outputs—you can specify which input
parameters are required to execute the task and the output expected
from the execution.</p>
</li>
<li>
<p>Adding multiple API requests in the Task Designer.</p>
</li>
</ol>
<p>Defining a Task</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Tasks tab.</p>
</li>
<li>
<p>Choose Create Task.</p>
</li>
<li>
<p>Drag and drop a task from the Tools section on the Design area.</p>
</li>
<li>
<p>In the Task Properties area, choose the General tab and enter the
following information:</p>
<ol>
<li>
<p>Organization—Name of the organization that you are creating the
task in</p>
</li>
<li>
<p>Task Name—A user-friendly short name for the task</p>
</li>
<li>
<p>Description—A description for the task</p>
</li>
<li>
<p>Retry Count—Number of times a task should be tried before it is
marked failed</p>
</li>
<li>
<p>Retry Delay—Delay, in seconds, after which a task is tried again</p>
</li>
<li>
<p>Timeout—Timeout value, in seconds, after which a task is termed
as timed out</p>
</li>
<li>
<p>Set Tags—Set a tag for the task in the key:value format</p>
</li>
<li>
<p>Enable Rollback Task—Enable to rollback a task and choose an
appropriate task from the drop-down list. Create the required
workflow inputs and map it accordingly</p>
</li>
</ol>
</li>
</ol>
<p><strong>Note:</strong> Rollback operation for Assign IP Address to Virtual Machine
Network task is not supported on Windows virtual machines.</p>
<p>Defining Task Inputs and Outputs</p>
<ol>
<li>
<p>In the Task Properties area, choose the Input tab and choose a
parameter. For more information about the Input properties, see
<a href="file://E:%5Chelp%5Cresources%5CWorkflow_Designer">Workflow Designer</a>.</p>
</li>
<li>
<p>Click the Edit icon to open the Create Task Input dialog.</p>
</li>
<li>
<p>In the Add Input screen, enter the following details:</p>
<ol>
<li>
<p>Display Name—Enter user-friendly short name.</p>
</li>
<li>
<p>Reference Name</p>
</li>
<li>
<p>Description—Detailed description of the input</p>
</li>
<li>
<p>Value Restrictions—Choose Required, Collection/Multiple, or can
be left blank</p>
</li>
<li>
<p>Type—Choose a data type for primitive data type. For example,
enum</p>
</li>
<li>
<p>Enum List—Label for the enum value</p>
</li>
<li>
<p>Minimum and Maximum Range</p>
</li>
<li>
<p>Regex—Validates the regular expression when you select String in
the Type field.</p>
</li>
<li>
<p>Object Selector—Enable to configure the Intersight managed
object selectors. This attribute is available only when the
primitive data is String. Specify the Intersight API Reference
and selector attributes to feed the input from the table
selection. Value will be passed according to the configuration
set in the Value attribute.</p>
</li>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to be
displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
<li>
<p>Value Attribute—Enter the value to be passed as an input while
executing a task. This value should be any one of the attribute
name specified in the Selector Attribute field. This attribute
is available only when the primitive data is String.</p>
</li>
<li>
<p>Secure—Indicates that the values of these properties are
encrypted and stored in Cisco Intersight.</p>
</li>
</ol>
</li>
</ol>
<!-- -->
<ol>
<li>The fields displayed depend on the value you select for the Type
field. Task designer does not support target date type.</li>
</ol>
<!-- -->
<ol>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Repeat this procedure to create multiple task inputs.</p>
</li>
<li>
<p>In the Task Properties area, choose the Output tab and choose a
parameter. For more information about the output properties, see
Input and Output.</p>
</li>
</ol>
<p>The created task is available in the General category in Workflow
Designer. You can create a workflow by dragging and dropping the task on
the Workflow Design area.</p>
<p><strong>Template Engine Syntax</strong></p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .global.CreateSnapshot.output.HttpStatusCode 400) (lt .global.CreateSnapshot.output.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>{{if (eq .global.CreateSnapshot.output.HttpStatusCode 200)}}<br>
Snapshot with name {{.global.CreateSnapshot.input.Name}} is created successfully.<br>
{{end}}</p>
<p>{{if (eq .global.CreateSnapshot.output.HttpStatusCode 200)}}<br>
Snapshot with name {{.global.CreateSnapshot.input.Name}} is created successfully.<br>
{{else}}<br>
Snapshot creation failed with message {{.global.CreateSnapshot.output.HttpStatusMsg}}.<br>
{{end}}</p>
<p>{{if (eq .global.CreateSnapshot.output.HttpStatusCode 200)}}<br>
Snapshot with name {{.global.CreateSnapshot.input.Name}} is created successfully.<br>
{{else if (eq .global.CreateSnapshot.output.HttpStatusCode 409)}}<br>
A Snapshot with name {{.global.CreateSnapshot.input.Name}} already exists.<br>
{{else}}<br>
Snapshot creation failed with message {{.global.CreateSnapshot.output.HttpStatusMsg}}.<br>
{{end}}</p>
<p><strong>Example Task: Creating a Snapshot of Pure Flash Array</strong></p>
<p>This example shows how to create a snapshot of a volume in a Pure Flash
Array. Specify the following information in the General tab of the Task
Properties area.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Task Name</td>
<td>New Pure Volume Snapshot</td>
</tr>
<tr class="even">
<td>Retry Count</td>
<td><p>1</p>
<p>The task will be retried once more when the task fails.</p></td>
</tr>
<tr class="odd">
<td>Retry Delay</td>
<td><p>10</p>
<p>The task will be retried after 10 seconds.</p></td>
</tr>
<tr class="even">
<td>Timeout</td>
<td><p>20</p>
<p>If the task does not complete execution in 20 seconds, then it is marked as Failed. If a retry count is configured (which is 1 for this task), the task is retried after the specified retry delay, which is 10 seconds.</p></td>
</tr>
</tbody>
</table>
<p>The snapshot is created using the Pure Flash Array volume API. Below is
a sample API request and response from Pure Flash Array API Reference.</p>
<p>POST /volume<br>
{<br>
    &ldquo;snap&rdquo;: true,<br>
    &ldquo;source&rdquo;: [<br>
        &ldquo;&lt;Volume Name 1&gt;&rdquo;,<br>
        &ldquo;&lt;Volume Name 2&gt;&rdquo;<br>
    ]<br>
}</p>
<p>From the above API, it can be inferred that the name of the source
volume is required, for which the snapshot is created. To do this, add a
task input parameter of type string to fetch the volume name as a task
input. Assuming the task input parameter is named as VolumeName, the
following template can be used to create the above request. This
template is populated as value for Body field in the API request’s input
panel.</p>
<p>{<br>
    &ldquo;snap&rdquo;: true,<br>
    &ldquo;source&rdquo;: [<br>
        &ldquo;{{.global.task.input.VolumeName}}&rdquo;<br>
    ]<br>
}</p>
<p>You either receive a success or a failure message for the request. The
following is a sample of the success message. The success message
displays the serial number and the new snapshot name against the Name
and Serial properties. This information is extracted as a task output.</p>
<p>200 OK<br>
[<br>
    {<br>
        &ldquo;created&rdquo;: &ldquo;2017-12-16T05:12:53Z&rdquo;,<br>
        &ldquo;name&rdquo;: &ldquo;&lt;snapshot name&gt;&rdquo;,<br>
        &ldquo;serial&rdquo;: &ldquo;&lt;serial number&gt;&rdquo;,<br>
        &ldquo;size&rdquo;: 5368709120,<br>
        &ldquo;source&rdquo;: &ldquo;&lt;volume name&gt;&rdquo;<br>
    }<br>
]</p>
<p>In case of a failure, the response displays an array of errors. Each
error contains a message, a code, and a context. In this example, if the
specified volume name is not found, the following message is displayed.</p>
<p>400 BAD REQUEST<br>
[<br>
    {<br>
        &ldquo;msg&rdquo;: &ldquo;Volume does not exist.&rdquo;,<br>
        &ldquo;code&rdquo;: 6,<br>
        &ldquo;ctx&rdquo;: &ldquo;&lt;Volume Name&gt;&rdquo;<br>
    }<br>
]</p>
<p>If the msg property is present in the response, the property can be used
to determine the task status with HTTP status code 400. The property
named msg can be accessed using the JSON path $[0].msg. The details to
extract the parameters are provided as value for Response Parser field
in API request’s input area. The path is a valid JSON path that locates
a required data in the API response.</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th>Response Parameter</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SnapshotName</td>
<td><p>This parameter contains the extracted snapshot name in the API output.</p>
<ul>
<li><p><strong>Name:</strong> SnapshotName</p></li>
<li><p><strong>Path:</strong> $[0].name</p></li>
<li><p><strong>Type:</strong> string</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Serial</td>
<td><p>This parameter contains the extracted serial value in the API output.</p>
<ul>
<li><p><strong>Name:</strong> Serial</p></li>
<li><p><strong>Path:</strong> $[0].serial</p></li>
<li><p><strong>Type:</strong> string</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Error</td>
<td><p>This parameter contains the extracted error message in the API output.</p>
<ul>
<li><p><strong>Name:</strong> Error</p></li>
<li><p><strong>Path:</strong> $[0].msg</p></li>
<li><p><strong>Type:</strong> string</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>To define a task, drag and drop the <strong>Invoke Web API Request</strong> task into
the Task Designer area. Use the Properties area to populate API details.
The following is sample information that can be entered the General tab.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td><p><strong>Create Snapshot</strong></p>
<p>The name must be unique. The APIs inside the task cannot be named as <strong>Create Snapshot</strong>. A name without space, such as <strong>CreateSnapshot</strong> can be used to refer the API output in subsequent API requests. In this example the following details are referred using API name.</p>
<p><strong>HTTP Status Code:</strong></p>
<p>{{.global.CreateSnapshot.output.HttpStatusCode}}</p>
<p>The parameters extracted from the response are referred using the API name after extracting the value from the response through the response parser as follows:</p>
<p>{{.global.CreateSnapshot.output.Serial}}</p></td>
</tr>
<tr class="even">
<td>Set External Target</td>
<td><p><strong>Checked - true</strong></p>
<p>As this is the first API and task does not have an input of type Target, a dialog appears that can be used to add a task input of Target type. The claimed Pure Storage Array target is provided as value for this task input during execution.</p></td>
</tr>
</tbody>
</table>
<p>The task input pertains to the API request details and to extract the
required values from response. The following is an example of the
required input values for the create snapshot API.</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Method</td>
<td>POST</td>
</tr>
<tr class="even">
<td>URL</td>
<td><p>/volume</p>
<p>The relative URL of the REST API end point is specified. The host part is filled through the information in pure target (Protocol, IPAddress, Port).</p></td>
</tr>
<tr class="odd">
<td>Body</td>
<td><p>Content Type: JSON</p>
<p>Text:</p>
<p>{<br />
    "snap": true,<br />
    "source": [<br />
        "{{.global.task.input.VolumeName}}"<br />
    ]<br />
}</p></td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>The following parameters are added:</p>
<ul>
<li><p><strong>SnapshotName:</strong> Path: $[0].name, Type: string</p></li>
<li><p><strong>Serial:</strong> Path: $[0].serial, Type: string</p></li>
<li><p><strong>Error:</strong> Path: $[0].msg, Type: string</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The extracted values from the API responses determine the task status.
In this example, the following outcomes are added based on the API
response.</p>
<ol>
<li>If the status code is 401, the task encounters terminal failure with
<strong>Authorization Failed</strong> message. The retry also fails. Hence the
outcome type is set as <strong>Terminal Error</strong>. So, the task is not
retried despite a retry is being specified.</li>
</ol>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td><p><strong>Authorization Error</strong></p>
<p>Identifies an outcome in the outcomes list of task designer. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td>Condition</td>
<td><p>{{eq .global.CreateSnapshot.output.HttpStatusCode 401}}</p>
<p>This condition checks whether the response status code of API named ‘Create Snapshot’ is 401.</p></td>
</tr>
<tr class="odd">
<td>Outcome Type</td>
<td><strong>Terminal Error</strong></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><strong>Authorization Error. Check the target credentials.</strong></td>
</tr>
</tbody>
</table>
<ol>
<li>If the HTTP status code is 400 and the extracted error is <strong>Volume
does not exist</strong>, the task fails terminally. In this case, the retry
execution also fails, hence the outcome type is set as <strong>Terminal
Error</strong>.</li>
</ol>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td><p><strong>Volume does not exist</strong></p>
<p>The name here is to identify an outcome quickly in the outcomes list of task. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td>Condition</td>
<td><p>{{and (eq .global.CreateSnapshot.output.HttpStatusCode 400)<br />
 (eq .global.CreateSnapshot.output.Error 'Volume does not exist.')}}</p>
<p>If we refer the sample response in previous sections, we will get a 400-Bad Request with response containing error msg ‘Volume does not exist.’.</p></td>
</tr>
<tr class="odd">
<td>Outcome Type</td>
<td><strong>Terminal Error</strong></td>
</tr>
<tr class="even">
<td>Message</td>
<td><p><strong>A volume with name {{.global.task.input.VolumeName}} does not exist. Check the volume name given.</strong></p>
<p>This outcome for a given volume name input ‘oracle-db’ will fail the task with message ‘A volume with name oracle-db does not exist. Check the volume name given.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>For any API failure caused by bad user input, do not retry and fail
the task immediately.</li>
</ol>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><p><strong>Any client error</strong></p>
<p>Identifies a result in the outcomes list of task designer, and is not used for any other purpose</p></td>
</tr>
<tr class="even">
<td><strong>Condition</strong></td>
<td><p>{{and (ge .global.CreateSnapshot.output.HttpStatusCode 400)<br />
(lt .global.CreateSnapshot.output.HttpStatusCode 500)}}</p>
<p>This condition checks if the HTTP status code is in the range between 400 to 499.</p></td>
</tr>
<tr class="odd">
<td><strong>Outcome Type</strong></td>
<td><strong>Terminal Error</strong></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p>API request failed - {{.global.CreateSnapshot.output.HttpStatusCode}}<br />
{{if (index .global.CreateSnapshot.output `Error`)}}:<br />
{{.global.CreateSnapshot.output.Error}}{{else}} <br />
{{.global.CreateSnapshot.output.HttpStatusMsg}}{{end}}</p>
<p>This message checks that a valid error message is extracted by using an if else block</p>
<p>{{if (index .global.CreateSnapshot.output `Error`)}}</p>
<p>If the error value is ‘Snapshot not supported’, the task status message is ‘API request failed – 405: Snapshot not supported’.</p>
<p>If no valid error message is present in the response, the HTTP status message is used. For example, <strong>API request failed – 413 Payload Too Large</strong>.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>For errors on the server, the task must be tried again before
setting the outcome type as <strong>Error</strong> instead of <strong>Terminal Error</strong>.</li>
</ol>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><p><strong>Any server error</strong></p>
<p>The name here is to identify an outcome quickly in the outcomes list of task designer. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td><strong>Condition</strong></td>
<td><p>{{and (ge .global.CreateSnapshot.output.HttpStatusCode 500) <br />
(lt .global.CreateSnapshot.output.HttpStatusCode 600)}}</p>
<p>This condition checks if the HTTP status code is in the range between 500 to 599.</p></td>
</tr>
<tr class="odd">
<td><strong>Outcome Type</strong></td>
<td><p><strong>Error</strong></p>
<p>The outcome type is set as <strong>Error</strong>. Hence, the request is retried, if retries are configured.</p></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p>API request failed - {{.global.CreateSnapshot.output.HttpStatusCode}}<br />
{{if (index .global.CreateSnapshot.output `Error`)}}:<br />
{{.global.CreateSnapshot.output.Error}}{{else}} {{.global.CreateSnapshot.output.HttpStatusMsg}}{{end}}</p>
<p>This is the same message that is used in the client error outcome.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>This can be termed as the final outcome for a successful completion.</li>
</ol>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><p><strong>All Good</strong></p>
<p>The name identifies an outcome in the outcomes list of task designer. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td><strong>Condition</strong></td>
<td><p><strong>True</strong></p>
<p>{{eq .global.CreateSnapshot.output.HttpStatusCode 200}}</p>
<p><strong>True</strong> can be used as the condition to capture all scenarios or the specific success response status code can be used, which is 200.</p></td>
</tr>
<tr class="odd">
<td><strong>Outcome Type</strong></td>
<td><strong>Success</strong></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p>A snapshot with name</p>
<p>{{.global.CreateSnapshot.output.SnapshotName}}</p>
<p>and serial</p>
<p>{{.global.CreateSnapshot.output.Serial}}</p>
<p>is created successfully for volume with name</p>
<p>{{.global.task.input.VolumeName}}</p>
<p>.</p>
<p>The outcome for a given volume name input oracle-db sets the task to success with the message: <strong>A snapshot with name oracle-db.8 and serial B3CD9AF2175A4E2800011010 is created successfully for volume with name oracle-db</strong>.</p></td>
</tr>
</tbody>
</table>
<p>As part of this task, an inventory refresh request can be sent to pull
the new snapshot inventory. This API contains the following details in
the request.</p>
<p>POST /v1/task/PureScopedInventories<br>
{<br>
    &ldquo;Type&rdquo;: &ldquo;storage.PureVolumeSnapshot&rdquo;,<br>
    &ldquo;NamingProperty&rdquo;: &ldquo;Name&rdquo;,<br>
    &ldquo;Values&rdquo;: [<br>
        &ldquo;&lt;Snapshot_Name&gt;&rdquo;<br>
    ],<br>
    &ldquo;RegisteredDevice&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;asset.DeviceRegistration&rdquo;,<br>
        &ldquo;Moid&rdquo;: &ldquo;&lt;Pure Device Registration Id&gt;&rdquo;<br>
    }<br>
}</p>
<p>The snapshot name is obtained from previous API output by using the
following reference: {{.global.CreateSnapshot.output.SnapshotName}}.</p>
<p>The device registration ID is obtained by performing a GET API of the
selected target and extracting the <strong>MOID</strong> from the
<strong>RegisteredDevice</strong>. For more information, see <a href="http:///apidocs">API
Docs</a>.</p>
<p>This section is realized by sending two Intersight API requests: GET
/v1/asset/Targets/&lt;Target_Moid&gt; and using the extracted registered
device Moid in the above request. Having explained the API specific
details in the previous section, we will quickly add two API calls to
the same task.</p>
<p>Do not choose the Set External Target option in the General tab. This is
because the API calls can be inferred as Intersight API calls.</p>
<p>This section captures the details related to the Intersight API call
that gets the registered device Moid from the given target task input.</p>
<p>The outcomes shall be added for better experience with these Intersight
API calls and since the previous section explains the outcomes in
detail, this section does not cover them.</p>
<p>GET is used as the default, if no value is provided for Method field.</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>API Name</strong></td>
<td>Get Device Id</td>
</tr>
<tr class="even">
<td><strong>Set External Target</strong></td>
<td>Unchecked/false</td>
</tr>
<tr class="odd">
<td><strong>URL</strong></td>
<td><p>/v1/asset/Targets/</p>
<p>{{.global.task.input.Target.Moid}}</p></td>
</tr>
<tr class="even">
<td><strong>Response Parser</strong></td>
<td><p>We will extract the Moid of the ‘RegisteredDevice’ relation.</p>
<p>DeviceMoid – Path: $.RegisteredDevice.Moid, Type: string</p></td>
</tr>
</tbody>
</table>
<p>The target Moid required in the URL is populated from the task input
Target. As part of this API output, the extracted device Moid can be
referred in the next API request body with the following reference:</p>
<p>{{.global.GetDeviceId.output.DeviceMoid}}</p>
<p>Using this example, you can also capture details for the Intersight API
that requests the inventory refresh for Pure Flash Array snapshots. The
snapshot name is extracted from the first API and the device Moid is
extracted from the second API to create a request for this API.</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>API Name</strong></td>
<td>Request Inventory Refresh</td>
</tr>
<tr class="even">
<td><strong>Set External Target</strong></td>
<td>Unchecked or false</td>
</tr>
<tr class="odd">
<td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="even">
<td><strong>URL</strong></td>
<td><strong>/v1/task/PureScopedInventories</strong></td>
</tr>
<tr class="odd">
<td><strong>Body</strong></td>
<td><p>Content Type: JSON</p>
<p>Text:</p>
<p>{<br />
    "Type": "storage.PureVolumeSnapshot",<br />
    "NamingProperty": "Name",<br />
    "Values": [<br />
        "{{.global.CreateSnapshot.output.SnapshotName}}"<br />
    ],<br />
    "RegisteredDevice": {<br />
        "ObjectType": "asset.DeviceRegistration",<br />
        "Moid": "{{.global.GetDeviceId.output.DeviceMoid}}"<br />
    }<br />
}</p></td>
</tr>
</tbody>
</table>
<p>There is no response body for this request. Therefore, the outcomes can
be added based on API HTTP status code to set the task status. The
outcome is not added her as they have been captured in detail for the
first outcome. The extracted values from the API response
<strong>SnapshotName</strong> and <strong>Serial</strong> are mapped to task output so that they
are available as task output that can be referred in subsequent tasks in
a workflow. This can be done by creating two task output parameters
named ‘<strong>SnapshotName</strong>’ and ‘<strong>Serial</strong>’ in ‘Output tab of Properties
area. The task output can be mapped to take API response values by using
Map to Task Output action. The values extracted using <strong>Response
Parser</strong> in an API can be mapped by selecting Parameters and then the
API Name entry in Task Output drop down and providing the actual
parameter names in Path field.</p>
<p><strong>Example: Obtaining Cisco ASA Details</strong></p>
<p>The previous example illustrates the need to make API requests to a
claimed target in Intersight. This section explains a sample task that
obtains simple information from Cisco ASA, while is reachable from
Intersight Assist. Intersight does not have a device connector for Cisco
ASA.</p>
<p>As a first step, Cisco ASA is added as custom target. Cisco ASA uses
HTTP basic authentication and has REST API interface. Hence, requests
can be made to Cisco ASA as part of Intersight IO tasks. The device must
be reachable from Intersight Assist. The device can be added as a Custom
Target in Targets screen, by providing IP address, credentials and
Intersight Assist from which the device is reachable. Cisco ASA added as
custom target must be configured from Intersight tasks. Though, Cisco
ASA supports basic authentication and does not need a session token to
be created in Intersight, you can use a session token to showcase the
Web API support for handling values for request and response headers.</p>
<p>A session token is created and used in the request header to facilitate
in the extraction of response headers. In this example, the task
executes two API requests in Cisco ASA, namely create a session token
and use the session token to obtain the Cisco ASA version.</p>
<p>To obtain a session token, use the <strong>Post</strong> call /api/tokenservices’ to
create a session token. Use the <strong>Delete</strong> request
/api/tokenservices/&lt;Token&gt; to delete the session. Cisco ASA expects a
request to create a session token. It must include the basic
authentication header that Intersight populates when using the details
in the custom target.</p>
<p>POST /api/tokenservices<br>
204 No Content</p>
<p>Response Headers<br>
X-Auth-Token: &lt;New Session Token&gt;</p>
<p>The subsequent API requests must have the X-Auth-Token request header.</p>
<p>The following table explains the request details that need to be
provided in Task Designer to create session token.</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>API Name</td>
<td>Get Session Token</td>
</tr>
<tr class="even">
<td>Set External Target</td>
<td><p>Checked</p>
<p>A task input of target type is added through the Task Designer dialog.</p></td>
</tr>
<tr class="odd">
<td>Method</td>
<td>POST</td>
</tr>
<tr class="even">
<td>URL</td>
<td>/api/tokenservices</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> There is no need to have a request body or response parser
given because the API does not generate a response body.</p>
<p>Details, such as, response headers, cookies, status code, and status
message, can be referred in subsequent API requests using references
based on the API name as follows:</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="header">
<th>Response Parameter</th>
<th>Reference Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Headers-—A map of headers with keys being the header name and values being a string array of header values.</td>
<td><p>{{.global.GetSessionToken.output.HttpHeaders}}</p>
<p>A specific response header value can be obtained using two notations: {{.global.GetSessionToken.output.HttpHeaders.&lt;HeaderName&gt;}} or {{index .global.GetSessionToken.output.HttpHeaders `HeaderName`}}</p>
<p>Examples of above notations are:</p>
<p>{{.global.GetSessionToken.output.HttpHeaders.Date}}</p>
<p>{{index .global.GetSessionToken.output.HttpHeaders `X-Auth-Token`}}</p>
<p>The above examples get the header value in the form of <strong>string array</strong> and individual values can be accessed by index template function. The index function can also be used to access a specific header in Headers.</p>
<p>{{index .global.GetSessionToken.output.HttpHeaders.Date 0}}</p>
<p>{{index (index .global.GetSessionToken.output.HttpHeaders `X-Auth-Token`) 0}}</p>
<p><strong>Note:</strong> The template engine used by Intersight IO considers hyphens (-) as special characters and does not allow obtaining headers with hyphens using the first dotted notation. Considering the fact that most of the header names are hyphenated, it is recommended to use the second notation only.</p></td>
</tr>
<tr class="even">
<td>Cookies—A map of cookies with keys being cookie names and the values being strings.</td>
<td><p>{{.global.GetSessionToken.output.HttpCookies}}</p>
<p>The further values of specific cookies can be referred using either the dot notation or with index function. The details are explained in the previous row about Headers.</p></td>
</tr>
<tr class="odd">
<td>HTTP Status Code—Number</td>
<td>{{.global.GetSessionToken.output.HttpStatusCode}}</td>
</tr>
<tr class="even">
<td>HTTP Status Message—String</td>
<td>{{.global.GetSessionToken.output.HttpStatusMsg}}</td>
</tr>
</tbody>
</table>
<p>The following table explains the various outcomes that the API request
can produce.</p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Name</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Unauthorized</td>
<td><p>Condition—{{eq .global.GetSessionToken.output.HttpStatusCode 401}}</p>
<p>Outcome Type:—Terminal Error</p>
<p>Message: Authorization failed. Check the target credentials.</p></td>
</tr>
<tr class="even">
<td>Session Limit Breached</td>
<td><p>Condition—{{eq .global.GetSessionToken.output.HttpStatusCode 503}}</p>
<p>Outcome—Type: Error</p>
<p>Message—Maximum number of sessions reached.</p></td>
</tr>
<tr class="odd">
<td>All Well</td>
<td><p>Condition—{{eq .global.GetSessionToken.output.HttpStatusCode 204}}</p>
<p>Outcome Type—Success</p>
<p>Message—Session token is Obtained.</p></td>
</tr>
</tbody>
</table>
<p>The auth token obtained from the first API can be used in the second API
to obtain the ASA version and other details as follows:</p>
<p>GET /api/monitoring/device/components/version<br>
Request Headers:<br>
X-Auth-Token: &lt;Auth-Token-Obtained-from-Token-Api&gt;<br>
200 OK<br>
{<br>
    &ldquo;kind&rdquo;: &ldquo;object#Version&rdquo;,<br>
    &ldquo;selfLink&rdquo;: &ldquo;/api/monitoring/device/version&rdquo;,<br>
    &ldquo;deviceType&rdquo;: &ldquo;ASAv&rdquo;,<br>
    &ldquo;upTimeinSeconds&rdquo;: 208800,<br>
    &ldquo;totalFlashinMB&rdquo;: 8192,<br>
    &ldquo;currentTimeinSeconds&rdquo;: 1612870500,<br>
    &ldquo;firewallMode&rdquo;: &ldquo;Transparent&rdquo;,<br>
    &ldquo;asaVersion&rdquo;: &ldquo;9.5(2)&rdquo;<br>
} </p>
<p>The following table explains the request details that need to be
provided in Task Designer API request panel for the ASA version request.</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="header">
<th>Field Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>API Name</td>
<td>Get ASA Version</td>
</tr>
<tr class="even">
<td>Set External Target</td>
<td>Checked</td>
</tr>
<tr class="odd">
<td>URL</td>
<td>/api/monitoring/device/components/version</td>
</tr>
<tr class="even">
<td>Headers—JSON with header name mapped to array of header values</td>
<td><p>{<br />
  "X-Auth-Token": [<br />
    "{{index (index .global.GetSessionToken.output.HttpHeaders <br />
`X-Auth-Token`) 0}}"<br />
  ]<br />
}</p>
<p>The token value is extracted from the previous API response header and used here in this API request header.</p></td>
</tr>
<tr class="odd">
<td>Response Parser</td>
<td>Version—Path: $.asaVersion, Type: string</td>
</tr>
</tbody>
</table>
<p>A simple outcome checks for status code. If outcome is 200, the task is
marked as failed.</p>
<ul>
<li>
<p>Name—Not OK</p>
</li>
<li>
<p>Condition—{{ne .global.GetASAVersion.output.HttpStatusCode 200}}</p>
</li>
<li>
<p>Outcome Type—Error</p>
</li>
<li>
<p>Message—GET ASA version failed</p>
</li>
</ul>
<p>The two API requests have been added to obtain session token and then to
obtain the ASA version. The extracted API output can be mapped to the
task output.</p>
<p>Task Input and Executor Output Mapping</p>
<p>Task inputs and previous executors output can be used for direct mapping
or transformed mappings. The syntax to refer to these will depend on the
type of mapping. Task inputs are referenced as
{{.global.task.input.InputName}} where InputName is the Reference Name
given to the Task input and not the Display Name or Label. Similarly,
task outputs are referenced as ${TaskName.output.TaskOutput}.</p>
<p>To specify an input mapping, select a task and click <strong>Edit</strong> against a
task input parameter.</p>
<p>The options available are:</p>
<ul>
<li>
<p>Static Value—Enter a value that is assigned to the task input field.</p>
</li>
<li>
<p>Direct Mapping—Map an existing task input or previous executors
output to the selected task input</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a
combination of one or more transformation stages for a task&rsquo;s input.
In each transformation stage, you can select a transformation
function along with its inputs. The transformation stages will be
converted into a template. You can then preview the template and
test the transformation with sample values.</p>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Transformed mapping is only supported for task inputs of
primitive data types, such as <em>string</em>, <em>integer</em>, <em>boolean</em>, and
<em>float</em>.</p>
</blockquote>
<ul>
<li>Advanced Mapping—Map a Golang template to the task input. For
example, FindAllString function returns a slice of all substrings
that match the given regular expression in the given string.</li>
</ul>
<!-- -->
<ul>
<li>
<p>Example 1:</p>
</li>
<li>
<p>FindAllString(s, regex string) ([]string, error)<br>
Example: {{(FindAllString .global.task.input.NumberString \&quot;([0-9]+)\&quot;)}} <br>
returns array [“123”, “456”] for input string “123 some text 456”.</p>
</li>
<li>
<p>Example 2:</p>
</li>
<li>
<p>Atoi function converts the given number in string format to integer type.<br>
Atoi(s string) (int, error)<br>
Example: {{Atoi .global.task.input.SizeString}} <br>
returns integer 2048 for input string “2048”</p>
</li>
</ul>
<p>Exporting a Task</p>
<p>Intersight Cloud Orchestrator enables you to export tasks from an
account to your system and then import them to another account.</p>
<p>To export a task, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Tasks.</p>
</li>
<li>
<p>From the tabular list of tasks, do one of the following:</p>
</li>
</ol>
<ul>
<li>
<p>Select a task, click the Ellipsis (…) icon in the same row, and then
choose Export Task.</p>
</li>
<li>
<p>Select multiple tasks, click the Ellipsis (…) icon from the header
or footer of the tabular list, and then choose Export Task.</p>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> You can also export tasks from the Actions menu in the Task
Designer window.</p>
</blockquote>
<ol>
<li>
<p>In the Export Task screen:</p>
<ol>
<li>
<p>In the JSON File Name field, use the default filename or enter a
filename of your choice for the JSON file that stores the task
components.</p>
</li>
<li>
<p>Use the Export Tags toggle button to include or exclude the
user-defined tags. ICO does not export the system-defined tags.</p>
</li>
<li>
<p>Click Export.</p>
</li>
<li>
<p>Save a local copy of the JSON file.</p>
</li>
</ol>
</li>
</ol>
<p>Importing a Task</p>
<p>Intersight Cloud Orchestrator enables you to import tasks to your
account by importing a JSON file that contains the task components. You
can create the JSON file by exporting the task components from another
account.</p>
<p>To import a task, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Tasks.</p>
</li>
<li>
<p>Click Import.</p>
</li>
</ol>
<!-- -->
<ol>
<li>The Import wizard appears.</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Select File screen:</p>
<ol>
<li>
<p>From the Organization drop-down list, choose the organization to
which you want to import the task(s).</p>
</li>
<li>
<p>Click Browse, and then select the JSON file that contains the
task(s).</p>
</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Ensure that the file size of the JSON file is not more than
1MB. If the file size is more than 1MB, export the task(s) in batches,
and then try import.</p>
</blockquote>
<ol>
<li>Click Next.</li>
</ol>
<!-- -->
<ol>
<li>Intersight Cloud Orchestrator validates the JSON file and displays
<blockquote>
<p>the task(s) in the Details screen.</p>
</blockquote>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Details screen:</p>
<ol>
<li>To associate an additional tag to the components listed in the
table, enter the tag in the Set Tags field.</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Set Tags is an optional field. You must enter the tag in the
key:value format.</p>
</blockquote>
<ol>
<li>
<p>If one or more task or task components are already available in the
system, choose a rule to replace or skip the duplicate components.</p>
</li>
<li>
<p>Click Import.</p>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Import Result screen:</p>
<ol>
<li>
<p>Verify the status of the imported task and task components.</p>
</li>
<li>
<p>If you want to view the details of the import request:</p>
</li>
</ol>
</li>
</ol>
<ul>
<li>
<p>Click the link displayed above the table.</p>
</li>
<li>
<p>Alternatively, click the Requests icon displayed in the menu bar.</p>
</li>
</ul>
<!-- -->
<ul>
<li>
<p>For more information, see
<a href="file://E:%5Chelp%5Cresources%5CWorkflow_Designer">Requests</a>.</p>
<ol>
<li>Click Close.</li>
</ol>
</li>
</ul>
<p>Managing the Lifecycle of a Task</p>
<p>Task management consists of organizing, creating, updating, and deletion
of tasks. The following table describes the set of actions that you can
perform with tasks in Cisco Intersight.</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Actions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>View Tasks</td>
<td>Choosing Orchestration from the left navigation pane will display all workflows in a tabular format. Clicking Tasks will display all tasks in a tabular format. You can view information such as the task name and description, the number of versions available, the number of times the task has been executed, the last execution status, validation information and the last update time and date.</td>
</tr>
<tr class="even">
<td>Create a New Task</td>
<td>Choose Orchestration from the left navigation pane and click Tasks. Then, click Create Task. This option opens up the Task Designer, using which you can create a new task.</td>
</tr>
<tr class="odd">
<td>Delete a Task</td>
<td>From the tabular list of workflows, you can select a task and click Delete. This will remove the task.</td>
</tr>
<tr class="even">
<td>Clone a Task</td>
<td>From the tabular list of tasks, you can select a task and click Clone. This will clone the selected task.</td>
</tr>
<tr class="odd">
<td>Save a Task as</td>
<td><p>From the tabular list of tasks, you can choose a task and click. By default, the workflow details are displayed in the Designer tab. You can choose Save As option from the Action drop-down list to clone a task.</p>
<p>In the Save As screen, you can specify user-friendly short name, reference name, description, and tag key. Click Save. For more information, see Cloning a Task.</p></td>
</tr>
</tbody>
</table>
<p>Cloning a Task</p>
<p>You can clone only a user-defined task. The cloned task is identical to
the original task. You can edit the new task immediately. You might do
this, for example, to create a task that is similar to the source task
that can be edited based on your requirements.</p>
<p>To clone a task, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Tasks.</p>
</li>
<li>
<p>From the tabular list of tasks, select a task and choose Clone.</p>
</li>
<li>
<p>In the Clone Task screen, edit the user-friendly short name,
reference name, and description.</p>
</li>
<li>
<p>Check the Open Clone in Editor check box if you want to open the
cloned task and edit the details.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Open Clone in Editor check box is not displayed when you
clone a task using the Save As option</p>
</blockquote>
<ol>
<li>Click Clone. The cloned task will be created in the same
organization the source task belongs to.</li>
</ol>
<p>Supported Target Management Tasks</p>
<p>The Target Management tasks contain a subset of tasks that can be used
within workflows to perform a range ot operations on the endpoint
targets. The Target Management tasks supported in Intersight are:</p>
<ul>
<li>
<p>New Target—Claim a new endpoint within a workflow in Intersight. The
supported target types are HTTP, SSH, Powershell, or Ansible
endpoints.</p>
</li>
<li>
<p>Get Target—Get the details of a claimed target within a workflow.
The task inputs are name, hostname or IP address, and target type.
On successful execution, name, moid, hostname or IP address, port,
connection status, and target type are generated as the task
outputs.</p>
</li>
</ul>
<!-- -->
<ul>
<li>The supported target types are HTTP, SSH, Powershell, or Ansible
endpoints.</li>
</ul>
<!-- -->
<ul>
<li>Remove Target—Unclaim the target endpoint from Intersight. When a
target is unclaimed, it is immediately detached from the
corresponding Intersight account. The target retains any
configuration applied before the unclaim operation.</li>
</ul>
<p>Compute Tasks Matrix</p>
<p>The following table lists compute tasks supported on UCS C-Series
Standalone Server and Intersight Managed Mode (IMM) Server:</p>
<table>
<colgroup>
<col style="width: 48%" />
<col style="width: 37%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th>Compute Tasks</th>
<th>UCS C-Series Standalone Server</th>
<th>IMM Server</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Copy Server Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Deploy Server Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Dismount Server Virtual Media Device</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Mount Server Virtual Media Device</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Server from Server Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Remove Server Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Restart IMC</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Set Server One Time Boot Device</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Set Server Power State</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Set Server to Server Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Stop Server Operating System</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Add Server Policies to Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Clear Server Storage Controller Configuration</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Remove Server Policies from Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>New Server Profile</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>New Server Profile from Template</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Delete Server Virtual Drives</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Clear Server Storage Controller Foreign Configuration</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Import Server Storage Controller Foreign Configuration</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Set Server Physical Drive State</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>New Server Precision Boot Device</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Server Precision Boot Device</td>
<td>Y</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>Supported Tasks for Storage Targets</p>
<p>The following table lists tasks supported in the various storage targets
available on Intersight:</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 20%" />
<col style="width: 13%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="header">
<th>List of Tasks</th>
<th>Pure Storage</th>
<th>NetApp</th>
<th>Hitachi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Add Storage Export Policy to Volume</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Add Host to Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Add Hosts to Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="even">
<td>Compress Storage Pool</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Connect Initiators to Storage Host</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Connect Volume to Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Copy Hitachi Volume</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Disconnect Storage Export Policy from Volume</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Disconnect Initiators from Storage Host</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Disconnect Volume from Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Expand Storage LUN</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Edit Aggregates For Storage Virtual Machine</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Edit Storage Pool</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Edit Storage Snapshot Policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Edit Storage Export Policy Rule</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Edit Storage Snapshot Policy Schedule</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Expand Storage Volume</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Find NetApp igroup LUN Map</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Expand Storage Pool</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Find Storage LUN by ID</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Find Storage Volume by ID</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Format Storage Volume</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>New Storage Export Policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage Fibre Channel Interface</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New Storage Data IP Interface</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage Host</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>New Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage LUN</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New Storage LUN ID</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage Snapshot Policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New Storage Snapshot Policy Schedule</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage Pool</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>New Storage Volume</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>New Storage Volume Snapshot</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New Storage Export Policy Rule</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New Storage Virtual Machine</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Storage export policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Host from Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Hosts from Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage Host</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Remove Storage Host Group</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage LUN</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Storage LUN ID</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage Pool</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Remove Storage Volume</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Remove Storage Virtual Machine</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Storage IP Interface</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage FC Interface</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Rename Storage Volume Snapshot</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage Snapshot Policy Schedule</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Storage Export Policy Rule</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove Storage Snapshot Policy</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Remove Storage Volume Snapshot</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>New NetApp Smart LUN</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>New NetApp NAS Smart Volume</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="even">
<td>Remove NetApp Smart LUN</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>Supported Tasks for Network Targets</p>
<p>The following table lists tasks supported in the various network targets
available on Intersight:</p>
<table>
<colgroup>
<col style="width: 57%" />
<col style="width: 22%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>List of Network Tasks</th>
<th>Nexus Switch</th>
<th>MDS Switch</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Add Port to Port Channel</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Copy Running to Startup Configuration of Switch</td>
<td>Y</td>
<td>N</td>
</tr>
<tr class="odd">
<td>Edit Spanning Tree Protocol</td>
<td>Y</td>
<td>Not Applicable</td>
</tr>
<tr class="even">
<td>New Port Channel</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Remove Port Channel</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Remove Port from Port Channel</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Remove DNS Server</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Remove NTP Server</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Set DNS Server</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Set Feature State</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Set MTU</td>
<td>Y</td>
<td>Not Applicable</td>
</tr>
<tr class="even">
<td>Set NTP Server</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Set Port Channel State</td>
<td>N</td>
<td>Y</td>
</tr>
<tr class="even">
<td>Set Port Mode</td>
<td>Y</td>
<td>Not Applicable</td>
</tr>
<tr class="odd">
<td>Set Port Speed</td>
<td>Y</td>
<td>Not Applicable</td>
</tr>
<tr class="even">
<td>Set Port State</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr class="odd">
<td>Set Switch Host Name</td>
<td>Y</td>
<td>Y</td>
</tr>
</tbody>
</table>
<p><span id="_Refd24e9258" class="anchor"></span>Data Types</p>
<p>Intersight Orchestrator supports the use of data types for workflows and
tasks. Data types for input and output defines types and associated
constraints on values that can be specified. Data types also specify
boundaries for values, and constraints like regular expressions.</p>
<p>Cisco Intersight provides a whole range of system-defined data types
that you can use in your workflows. In addition, you can also create a
data type in Cisco Intersight. To view all data types that are currently
available or configured, choose Orchestration <strong>&gt;</strong> Data Types. A
dashboard displays the following details under these tabs, namely, My
Data Types, System Data Types, and All Data Types:</p>
<ul>
<li>
<p>Number of Composite Type</p>
</li>
<li>
<p>Number of System Defined Data Type</p>
</li>
</ul>
<p>You can view a tabular list of data types with the following
information:</p>
<ul>
<li>
<p>Reference Name</p>
</li>
<li>
<p>Display Name</p>
</li>
<li>
<p>Composite Type</p>
</li>
<li>
<p>Description</p>
</li>
<li>
<p>Last Updated</p>
</li>
<li>
<p>Organization</p>
</li>
</ul>
<p>From this screen, as an Account Administrator, or as a user with
Workflow Designer privileges, you can perform the following actions:</p>
<ul>
<li>
<p>Create a new data type</p>
</li>
<li>
<p>Edit or delete a custom data type</p>
</li>
<li>
<p>Clone a data type</p>
</li>
</ul>
<p><strong>Note:</strong> You cannot edit or delete a system-defined data type.</p>
<p>There are many input types defined in Cisco Intersight representing a
broad selection of categorical, numeric, and text parameters. For
example, some existing data types are:</p>
<ul>
<li>
<p>Generic Text Input (the least restricted input type)</p>
</li>
<li>
<p>IPv4 Address</p>
</li>
<li>
<p>OS Type</p>
</li>
<li>
<p>Memory Size Selector</p>
</li>
</ul>
<!-- -->
<ul>
<li>
<p>Primitive data type—Represents primitive data like String, Float,
Integer, Boolean, Json, or Enum. Following are the attributes
specific to primitive data types:</p>
<ul>
<li>
<p>Type</p>
</li>
<li>
<p>Secure</p>
</li>
<li>
<p>Constraints (specifies limits and boundaries for values)</p>
</li>
<li>
<p>Object Selector (lists the Cisco Intersight managed object
selectors). This attribute is available only when the primitive
data is String. Following are the attributes specific to Object
Selector:</p>
<ul>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to
be displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
<li>
<p>Value Attribute—Enter the value to be passed as an input
while executing a task. This value should be any one of the
attribute name specified in the Selector Attribute field.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Array data type—Represents an array of a given type. It can be an
array of primitive data, reference data, or of custom data type.
Following are the attributes specific to array data types:</p>
<ul>
<li>
<p>ArrayItemType</p>
</li>
<li>
<p>Min</p>
</li>
<li>
<p>Max</p>
</li>
</ul>
</li>
<li>
<p>MoReference data type—Represents Cisco Intersight Managed object
reference. Following are the attributes specific to reference data
types:</p>
<ul>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to be
displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
</ul>
</li>
<li>
<p>Target data type—Represents a target endpoint or device. Following
are the attributes specific to target data types:</p>
<ul>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to be
displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
<li>
<p>Support Objects—Enter the object filter used for mentioning the
interesting object in the task definition. You can add multiple
support objects by clicking +.</p>
</li>
<li>
<p>Constraint Attribute—Enter the attribute used for defining
decision conditions to choose the right implementation task. You
can add multiple constraint attributes by clicking +.</p>
</li>
<li>
<p>Connector Attribute—Enter the attribute used for defining what
value to be passed as input to the implementation task.</p>
</li>
</ul>
</li>
<li>
<p>Custom data type—Allows defining type constraints once and then use
them in multiple tasks and workflows. Following are the attributes
specific to target data types:</p>
<ul>
<li>
<p>Custom Data Type Name</p>
</li>
<li>
<p>Catalog Moid</p>
</li>
</ul>
</li>
</ul>
<p>You choose existing input types from a list that displays a name, type,
and category for each variable. The list can be filtered to make finding
a given data type manageable.</p>
<p>If none of the existing data types serves your need in a particular
application, it is possible to create custom data types by defining
restrictions on existing data types.</p>
<p>Creating a Data Type</p>
<p>To create a data type, perform the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane and click Data
Types.</p>
</li>
<li>
<p>Choose Create Data Type.</p>
</li>
<li>
<p>In the Create Data Type screen, enter the following information:</p>
</li>
</ol>
<ul>
<li>
<p>Organization—Choose an organization from the drop-down list.</p>
</li>
<li>
<p>Name—Enter a name for the custom data type definition. The name can
be alphanumeric and can include a combination of upper case and
lower case letters and special characters.</p>
</li>
<li>
<p>Label—Enter a label that helps you identify the data type.</p>
</li>
<li>
<p>Description—Enter a description, if required.</p>
</li>
<li>
<p>Set Tags—Enter a tag in the key:value format, if required.</p>
</li>
</ul>
<ol>
<li>Select the parameters for the data type—Choose Simple or Composite.
A Simple data type has only a singular value, while a composite data
type has multiple properties.</li>
</ol>
<!-- -->
<ol>
<li>For example, a LoginName is a simple data type whereas a
MailingAddress would be a Composite data type (with street, city,
state, and so on.)</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Target data type is not supported when you choose Composite
as a parameter input.</p>
</blockquote>
<ol>
<li>To add additional inputs, click Add Field and click New Definition.
Then, enter the following information:</li>
</ol>
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>Label</p>
</li>
<li>
<p>Description</p>
</li>
<li>
<p>Required—Update this field only when you are adding a Composite data
type.</p>
</li>
<li>
<p>Type—Choose a data type for primitive data type. For example,
String, Integer, Float, Boolean, Json, Enum, MoReference, Target
Data Type, or custom data type.</p>
</li>
</ul>
<!-- -->
<ul>
<li>The fields displayed depend on the value you select for the Type
field.</li>
</ul>
<ol>
<li>
<p>If you select the data type as Enum, specify the following:</p>
<ol>
<li>
<p>Enum List—Enum label and value. You can add multiple selector
attributes by clicking +.</p>
</li>
<li>
<p>Widget type.</p>
</li>
</ol>
</li>
<li>
<p>If you select the data type as String, specify the following:</p>
<ol>
<li>
<p>Minimum and MaximumRange</p>
</li>
<li>
<p>Regex—Validates the regular expression when you select String in
the Type field.</p>
</li>
<li>
<p>Secure—Indicates that the values of these properties are
encrypted and stored in Cisco Intersight.</p>
</li>
<li>
<p>ObjectSelector—Enable to configure the Intersight managed object
selectors. This attribute is available only when the primitive
data is String. Specify the Intersight API Reference and
selector attributes to feed the input from the table selection.
Value will be passed according to the configuration set in the
Value attribute.</p>
</li>
</ol>
</li>
<li>
<p>If you select the data type as Integer or Float, specify the
following:</p>
<ol>
<li>Minimum and MaximumRange.</li>
</ol>
</li>
<li>
<p>If you select the data type as MoReference, specify the following:</p>
<ol>
<li>
<p>Intersight API Reference—Enter the URL of the Intersight API
configured with parameters.</p>
</li>
<li>
<p>Selector Attribute—Enter the attribute name(s) that needs to be
displayed in the input table column. You can add multiple
selector attributes by clicking +.</p>
</li>
</ol>
</li>
<li>
<p>If you selected a composite data type, you can specify the field
mapping details. With field mapping, you can pass the value from the
parent composite data type to a child composite data type.</p>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>To specify the field mapping, do the following:</p>
<ol>
<li>
<p>Key—The input field that you want to hide.</p>
</li>
<li>
<p>Value Attribute—The value in a template style to be passed
dynamically during the execution. The inputs are referenced as
${datatype.type.AttributeName}.</p>
</li>
</ol>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>Click Add.</p>
</li>
<li>
<p>To add a Parameter Set rule, click Add Rule &gt; Parameter Set.</p>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>For more information, see <strong>Error! Reference source not found.</strong>.</p>
<ol>
<li>
<p>Name—The name of the Parameter Set rule.</p>
</li>
<li>
<p>If Field—Select the input field that will be used for the
Parameter Set rule.</p>
</li>
<li>
<p>Condition—The condition for the rule. The condition can be Equal
to, Not equal to, Contains, or Matches Pattern.</p>
</li>
<li>
<p>Value—The value of the input (If Field) that will be used for
the Parameter Set rule.</p>
</li>
<li>
<p>Field to be shown—Select input fields that should be made
available when the Parameter Set rule condition is satisfied.</p>
</li>
<li>
<p>Click Save.</p>
</li>
</ol>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>Click Preview to validate the definitions that you have added and
make corrections, if required.</p>
</li>
<li>
<p>Click Add.</p>
</li>
</ol>
<!-- -->
<ol>
<li>The data type that you added is displayed in the tabular list on the
Data Types screen. You can now create a workflow and use this data
type in the workflow input. Similar to workflows, you can define the
Parameter Set rules at custom data type level.</li>
</ol>
<p>Data Type Parameter Set Rule</p>
<p>When you create a composite data type, you can specify the fields for
the data type. After you define the fields, you can set a Parameter Set
rules. The Parameter Set rule control the availability of specific
parameters or inputs during the execution. After the first input is
specified, the Parameter Set rule controls which subsequent input fields
are made available during the execution.</p>
<p><strong>Note:</strong> You can define a Parameter Set rule only for a custom data
type that has more than two input fields with the supported data type.</p>
<p>The supported data types for the Parameter Set rules are:</p>
<ul>
<li>
<p>Boolean</p>
</li>
<li>
<p>Enum</p>
</li>
<li>
<p>String Object Selector</p>
</li>
<li>
<p>MoReference</p>
</li>
</ul>
<p>Example: The following example shows how to create a Parameter Set rule
for a composite data type with four fields. The composite data type
fields are:</p>
<ul>
<li>
<p>Cluster Type—Type is <em>Enum</em> and Enum list is <em>VM</em> and <em>HX</em>.</p>
</li>
<li>
<p>VMware Cluster—Type is <em>String</em>.</p>
</li>
<li>
<p>HX Cluster—Type is <em>String</em>.</p>
</li>
<li>
<p>Cluster Description—Type is <em>String</em>.</p>
</li>
</ul>
<p>You can create two Parameter Set rules. During the execution when the
Cluster Type value is <em>VM</em> only VMware Cluster field is made available.
Alternately, when the Cluster Type value is <em>HX</em>, only HX Cluster is
made available. The details of the Parameter Set rules are:</p>
<ul>
<li>
<p>Rule1—If Field is <em>Cluster Type</em>, Condition is <em>Equal to</em>, Value is
<em>VM</em>, and Fields to be shown is <em>VMware Cluster.</em></p>
</li>
<li>
<p>Rule2—If Field is <em>Cluster Type</em>, Condition is <em>Equal to</em>, Value is
<em>HX</em>, and Fields to be shown is <em>HC Cluster.</em></p>
</li>
</ul>
<p>Cloning a Data Type</p>
<p>You can clone a data type. The cloned data type is identical to the
original data type. You can edit the new data type immediately. You
might do this, for example, to create a data type that is similar to the
source data type that can be edited based on your requirements. The new
data type has a new, separate version history.</p>
<p>To clone a data type, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Data Type.</p>
</li>
<li>
<p>From the tabular list of data types, select a data type and choose
Clone.</p>
</li>
<li>
<p>In the Clone Data Type screen, edit the user-friendly short name,
reference name, description, and organization details. The
organization mappings are displayed only for pre-canned data types
and not for the custom data types.</p>
</li>
<li>
<p>Check the Open Clone in Editor check box if you want to open the
cloned data type and edit the details.</p>
</li>
<li>
<p>Click Clone.</p>
</li>
</ol>
<p>Exporting a Data Type</p>
<p>Intersight Cloud Orchestrator enables you to export data types from an
account to your system and then import them to another account.</p>
<p>To export a data type, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Data Type.</p>
</li>
<li>
<p>From the tabular list of data types, do one of the following:</p>
</li>
</ol>
<ul>
<li>
<p>Select a data type, click the Ellipsis (…) icon in the same row, and
then choose Export Data Type.</p>
</li>
<li>
<p>Select multiple data types, click the Ellipsis (…) icon from the
header or footer of the tabular list, and then choose Export Data
Type.</p>
</li>
</ul>
<ol>
<li>
<p>In the Export Data Type screen:</p>
<ol>
<li>
<p>In the JSON File Name field, use the default filename or enter a
filename of your choice for the JSON file that stores the data
type components.</p>
</li>
<li>
<p>Use the Export Tags toggle button to include or exclude the
user-defined tags. ICO does not export the system-defined tags.</p>
</li>
<li>
<p>Click Export.</p>
</li>
<li>
<p>Save a local copy of the JSON file.</p>
</li>
</ol>
</li>
</ol>
<p>Importing a Data Type</p>
<p>Intersight Cloud Orchestrator enables you to import data types to your
account by importing a JSON file that contains the data type components.
You can create the JSON file by exporting the data type components from
another account.</p>
<p>To import a data type, complete the following steps:</p>
<ol>
<li>
<p>Choose Orchestration from the left navigation pane.</p>
</li>
<li>
<p>Click Data Type.</p>
</li>
<li>
<p>Click Import.</p>
</li>
</ol>
<!-- -->
<ol>
<li>The Import wizard appears.</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Select File screen:</p>
<ol>
<li>
<p>From the Organization drop-down list, choose the organization to
which you want to import the data type(s).</p>
</li>
<li>
<p>Click Browse, and then select the JSON file that contains the
data type(s).</p>
</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Ensure that the file size of the JSON file is not more than
1MB. If the file size is more than 1MB, export the data type(s) in
batches, and then try import.</p>
</blockquote>
<ol>
<li>Click Next.</li>
</ol>
<!-- -->
<ol>
<li>Intersight Cloud Orchestrator validates the JSON file and displays
<blockquote>
<p>the data type(s) in the Details screen.</p>
</blockquote>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Details screen:</p>
<ol>
<li>To associate an additional tag to the components listed in the
table, enter the tag in the Set Tags field.</li>
</ol>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> Set Tags is an optional field. You must enter the tag in the
key:value format.</p>
</blockquote>
<ol>
<li>
<p>If one or more data type components are already available in the
system, choose a rule to replace or skip the duplicate components.</p>
</li>
<li>
<p>Click Import.</p>
</li>
</ol>
<!-- -->
<ol>
<li>
<p>In the Import Result screen:</p>
<ol>
<li>
<p>Verify the status of the imported data type(s).</p>
</li>
<li>
<p>If you want to view the details of the import request:</p>
</li>
</ol>
</li>
</ol>
<ul>
<li>
<p>Click the link displayed above the table.</p>
</li>
<li>
<p>Alternatively, click the Requests icon displayed in the menu bar.</p>
</li>
</ul>
<!-- -->
<ul>
<li>
<p>For more information, see
<a href="file://E:%5Chelp%5Cresources%5CWorkflow_Designer">Requests</a>.</p>
<ol>
<li>Click Close.</li>
</ol>
</li>
</ul>
<p><span id="_Refd24e10361" class="anchor"></span>Executors – Invoke
PowerShell Script</p>
<p>Intersight Cloud Orchestrator allows workflow designers to run
PowerShell Script on a PowerShell target endpoint using the <strong>Invoke
PowerShell Script</strong> embedded task in the workflow. The Invoke PowerShell
Script task is an out-of-box solution that allows you to automate
PowerShell operations on the PowerShell target that is added as a
PowerShell endpoint target in Cisco Intersight. This feature allows a
workflow designer to extend the automation capabilities of the workflow
engine beyond what is natively available in the task library and
interact with the PowerShell target endpoint.</p>
<p>Supported Targets</p>
<p>The Invoke PowerShell Script task can be run only on the targets that
are added as a PowerShell endpoint target type in Cisco Intersight.</p>
<p>To run the PowerShell Script task on the PowerShell target endpoint from
Cisco Intersight, ensure that:</p>
<ul>
<li></li>
</ul>
<!-- -->
<ul>
<li>
<p>The endpoint is reachable through Intersight Assist.</p>
</li>
<li></li>
</ul>
<!-- -->
<ul>
<li>
<p>The endpoint target is in the Connected state.</p>
</li>
<li>
<p>PowerShell Remoting is enabled on the target endpoint to allow the
endpoint to receive PowerShell remote commands.</p>
</li>
</ul>
<p><strong>Note:</strong> You can run the Invoke PowerShell Script task only on a
Windows system.</p>
<p>To enable PowerShell Remoting on a PowerShell endpoint target, execute
the following remoting script on the PowerShell target endpoint:</p>
<p>[CmdletBinding()]<br>
Param (<br>
    [switch]$EnableBasicAuth = $false,<br>
    [switch]$SKipNetworkProfileCheck = $false,<br>
    [switch]$ForceNewSSLCert = $false,<br>
    [string]$SubjectName = $env:COMPUTERNAME,<br>
    [int]$CertValidityDays = 1095<br>
)</p>
<p>Function New-SelfSignedCert<br>
{<br>
    Param (<br>
        [string]$SubjectName,<br>
        [int]$ValidDays = 1095<br>
    )</p>
<p>    $hostnonFQDN = $env:computerName<br>
    $hostFQDN = [System.Net.Dns]::GetHostByName(($env:computerName)).Hostname<br>
    $SignatureAlgorithm = &ldquo;SHA256&rdquo;</p>
<p>    $name = New-Object -COM &ldquo;X509Enrollment.CX500DistinguishedName.1&rdquo;<br>
    $name.Encode(&ldquo;CN=$SubjectName&rdquo;, 0)</p>
<p>    $key = New-Object -COM &ldquo;X509Enrollment.CX509PrivateKey.1&rdquo;<br>
    $key.ProviderName = &ldquo;Microsoft Enhanced RSA and AES Cryptographic Provider&rdquo;<br>
    $key.KeySpec = 1<br>
    $key.Length = 4096<br>
    $key.SecurityDescriptor = &ldquo;D:PAI(A;;0xd01f01ff;;;SY)(A;;0xd01f01ff;;;BA)(A;;0x80120089;;;NS)&rdquo;<br>
    $key.MachineContext = 1<br>
    $key.Create()</p>
<p>    $serverauthoid = New-Object -COM &ldquo;X509Enrollment.CObjectId.1&rdquo;<br>
    $serverauthoid.InitializeFromValue(&ldquo;1.3.6.1.5.5.7.3.1&rdquo;)<br>
    $ekuoids = New-Object -COM &ldquo;X509Enrollment.CObjectIds.1&rdquo;<br>
    $ekuoids.Add($serverauthoid)<br>
    $ekuext = New-Object -COM &ldquo;X509Enrollment.CX509ExtensionEnhancedKeyUsage.1&rdquo;<br>
    $ekuext.InitializeEncode($ekuoids)</p>
<p>    $cert = New-Object -COM &ldquo;X509Enrollment.CX509CertificateRequestCertificate.1&rdquo;<br>
    $cert.InitializeFromPrivateKey(2, $key, &ldquo;&rdquo;)<br>
    $cert.Subject = $name<br>
    $cert.Issuer = $cert.Subject<br>
    $cert.NotBefore = (Get-Date).AddDays(-1)<br>
    $cert.NotAfter = $cert.NotBefore.AddDays($ValidDays)</p>
<p>    $SigOID = New-Object -ComObject X509Enrollment.CObjectId<br>
    $SigOID.InitializeFromValue(([Security.Cryptography.Oid]$SignatureAlgorithm).Value)</p>
<p>    [string[]] $AlternativeName  += $hostnonFQDN<br>
    $AlternativeName += $hostFQDN<br>
    $IAlternativeNames = New-Object -ComObject X509Enrollment.CAlternativeNames</p>
<p>    foreach ($AN in $AlternativeName)<br>
    {<br>
        $AltName = New-Object -ComObject X509Enrollment.CAlternativeName<br>
        $AltName.InitializeFromString(0x3,$AN)<br>
        $IAlternativeNames.Add($AltName)<br>
    }</p>
<p>    $SubjectAlternativeName = New-Object -ComObject X509Enrollment.CX509ExtensionAlternativeNames<br>
    $SubjectAlternativeName.InitializeEncode($IAlternativeNames)</p>
<p>    [String[]]$KeyUsage = (&ldquo;DigitalSignature&rdquo;, &ldquo;KeyEncipherment&rdquo;)<br>
    $KeyUsageObj = New-Object -ComObject X509Enrollment.CX509ExtensionKeyUsage<br>
    $KeyUsageObj.InitializeEncode([int][Security.Cryptography.X509Certificates.X509KeyUsageFlags]($KeyUsage))<br>
    $KeyUsageObj.Critical = $true</p>
<p>    $cert.X509Extensions.Add($KeyUsageObj)<br>
    $cert.X509Extensions.Add($ekuext)<br>
    $cert.SignatureInformation.HashAlgorithm = $SigOID<br>
    $CERT.X509Extensions.Add($SubjectAlternativeName)<br>
    $cert.Encode()</p>
<p>    $enrollment = New-Object -COM &ldquo;X509Enrollment.CX509Enrollment.1&rdquo;<br>
    $enrollment.InitializeFromRequest($cert)<br>
    $certdata = $enrollment.CreateRequest(0)<br>
    $enrollment.InstallResponse(2, $certdata, 0, &ldquo;&rdquo;)</p>
<p>    # extract/return the thumbprint from the generated cert<br>
    $parsed_cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2<br>
    $parsed_cert.Import([System.Text.Encoding]::UTF8.GetBytes($certdata))</p>
<p>    return $parsed_cert.Thumbprint<br>
}</p>
<p># Setup error handling<br>
Trap<br>
{<br>
    $_<br>
    Exit 1<br>
}</p>
<p># Treat non terminating erros as terminating errors<br>
$ErrorActionPreference = &ldquo;Stop&rdquo;</p>
<p># Get the ID and security principal of the current user account<br>
$myWindowsID=[System.Security.Principal.WindowsIdentity]::GetCurrent()<br>
$myWindowsPrincipal=new-object System.Security.Principal.WindowsPrincipal($myWindowsID)</p>
<p># Get the security principal for the Administrator role<br>
$adminRole=[System.Security.Principal.WindowsBuiltInRole]::Administrator</p>
<p># Check to see if we are currently running &ldquo;as Administrator&rdquo;<br>
if (-Not $myWindowsPrincipal.IsInRole($adminRole))<br>
{<br>
    Write-Output &ldquo;ERROR: You need elevated Administrator privileges in order to run this script.&rdquo;<br>
    Write-Output &quot;       Start Windows PowerShell by using the Run as Administrator option.&quot;<br>
    Exit 2<br>
}</p>
<p># Ensure PowerShell version is greater that 3.0<br>
if ($PSVersionTable.PSVersion.Major -lt 3) {<br>
    Throw &ldquo;Minimum required PowerShell version is 3.0&rdquo;<br>
}</p>
<p># Ensure WinRM is present on the machine<br>
if (!(Get-Service &ldquo;WinRM&rdquo; -ErrorAction SilentlyContinue)) {<br>
    Throw &ldquo;WinRM service is not present on the machine&rdquo;<br>
}</p>
<p># Ensure WinRM is running on the machine<br>
if (!(Get-Service &ldquo;WinRM&rdquo; -ErrorAction SilentlyContinue | where {$_.Status -eq &ldquo;Running&rdquo;})) {<br>
    Write-Output &ldquo;WinRM service is not running&rdquo;<br>
    Write-Output &ldquo;Attempting to start WinRM service&rdquo;<br>
    Start-Service &ldquo;WinRM&rdquo;<br>
}</p>
<p># Check if PS Remoting is already enabled, if not enable it<br>
# WinRM should be running; check that we have a PS session config.<br>
if (!(Get-PSSessionConfiguration -Verbose:$false) -or (!(Get-ChildItem WSMan:\localhost\Listener)))<br>
{<br>
  if ($SkipNetworkProfileCheck) {<br>
    Write-Verbose &ldquo;Enabling PS Remoting without checking Network profile.&rdquo;<br>
    Enable-PSRemoting -SkipNetworkProfileCheck -Force -ErrorAction Stop<br>
    Write-Output &ldquo;Enabled PS Remoting.&rdquo;<br>
  }<br>
  else {<br>
    Write-Verbose &ldquo;Enabling PS Remoting.&rdquo;<br>
    Enable-PSRemoting -Force -ErrorAction Stop<br>
    Write-Output &ldquo;Enabled PS Remoting.&rdquo;<br>
  }<br>
}<br>
else<br>
{<br>
    Write-Verbose &ldquo;PS Remoting is already enabled.&rdquo;<br>
}</p>
<p># Ensure LocalAccountTokenFilterPolicy is set to 1<br>
# https://github.com/ansible/ansible/issues/42978<br>
# Needed for NTLM authentication<br>
$token_path = &ldquo;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&rdquo;<br>
$token_prop_name = &ldquo;LocalAccountTokenFilterPolicy&rdquo;<br>
$token_key = Get-Item -Path $token_path<br>
$token_value = $token_key.GetValue($token_prop_name, $null)<br>
if ($token_value -ne 1) {<br>
    Write-Verbose &ldquo;Setting LocalAccountTOkenFilterPolicy to 1&rdquo;<br>
    if ($null -ne $token_value) {<br>
        Remove-ItemProperty -Path $token_path -Name $token_prop_name<br>
    }<br>
    New-ItemProperty -Path $token_path -Name $token_prop_name -Value 1 -PropertyType DWORD &gt; $null<br>
}</p>
<p># Make sure there is a SSL listener.<br>
$listeners = Get-ChildItem WSMan:\localhost\Listener<br>
if (!($listeners | Where-Object {$_.Keys -like &ldquo;TRANSPORT=HTTPS&rdquo;}))<br>
{<br>
    # We cannot use New-SelfSignedCertificate on 2012R2 and earlier<br>
    $thumbprint = New-SelfSignedCert -SubjectName $SubjectName -ValidDays $CertValidityDays<br>
    Write-Output &ldquo;Self-signed SSL certificate generated; thumbprint: $thumbprint&rdquo;<br>
    # Create the hashtables of settings to be used.<br>
    $valueset = @{<br>
        Hostname = $SubjectName<br>
        CertificateThumbprint = $thumbprint<br>
    }<br>
    $selectorset = @{<br>
        Transport = &ldquo;HTTPS&rdquo;<br>
        Address = &ldquo;*&rdquo;<br>
    }<br>
    Write-Verbose &ldquo;Enabling SSL listener.&rdquo;<br>
    New-WSManInstance -ResourceURI &lsquo;winrm/config/Listener&rsquo; -SelectorSet $selectorset -ValueSet $valueset<br>
    Write-Verbose &ldquo;Enabled SSL listener.&rdquo;<br>
}<br>
else<br>
{<br>
    Write-Verbose &ldquo;SSL listener is already active.&rdquo;<br>
    # Force a new SSL cert on Listener if the $ForceNewSSLCert<br>
    if ($ForceNewSSLCert)<br>
    {<br>
        # We cannot use New-SelfSignedCertificate on 2012R2 and earlier<br>
        $thumbprint = New-SelfSignedCert -SubjectName $SubjectName -ValidDays $CertValidityDays<br>
        Write-Verbose &ldquo;Self-signed SSL certificate generated; thumbprint: $thumbprint&rdquo;<br>
        $valueset = @{<br>
            CertificateThumbprint = $thumbprint<br>
            Hostname = $SubjectName<br>
        }<br>
        # Delete the listener for SSL<br>
        $selectorset = @{<br>
            Address = &ldquo;*&rdquo;<br>
            Transport = &ldquo;HTTPS&rdquo;<br>
        }<br>
        Remove-WSManInstance -ResourceURI &lsquo;winrm/config/Listener&rsquo; -SelectorSet $selectorset<br>
        # Add new Listener with new SSL cert<br>
        New-WSManInstance -ResourceURI &lsquo;winrm/config/Listener&rsquo; -SelectorSet $selectorset -ValueSet $valueset<br>
    }<br>
}</p>
<p># Enable/Disable basic authentication as needed<br>
$basicAuth = Get-Item WSMan:\localhost\Service\Auth\Basic<br>
if ($EnableBasicAuth) {<br>
    if ($basicAuth.Value -eq &ldquo;true&rdquo;) {<br>
        Write-Output &ldquo;Basic authentication is already enabled&rdquo;<br>
    } else {<br>
        Write-Output &ldquo;Basic authentication is currently disabled&rdquo;<br>
        Set-Item WSMan:\localhost\Service\Auth\Basic -Value $true<br>
        Write-Output &ldquo;Basic authentication has been enabled&rdquo;<br>
    }<br>
} else {<br>
    if ($basicAuth.Value -eq &ldquo;true&rdquo;) {<br>
        Write-Output &ldquo;Basic authentication is currently enabled&rdquo;<br>
        Set-Item WSMan:\localhost\Service\Auth\Basic -Value $false<br>
        Write-Output &ldquo;Basic authentication has been disabled&rdquo;<br>
    } else {<br>
        Write-Output &ldquo;Basic authentication is already disabled&rdquo;<br>
    }<br>
}</p>
<p># Check firewall<br>
$rule = Get-NetFirewallRule | where {$_.DisplayName -eq &ldquo;Allow WinRM HTTPS&rdquo;}<br>
if ($rule) {<br>
    if ($rule.Profile.ToString() -eq &ldquo;Any&rdquo;) {<br>
        Write-Output &ldquo;Firewall rule already exists for WinRM&rdquo;<br>
    } else {<br>
        Set-NetFirewallRule -DisplayName &ldquo;Allow WinRM HTTPS&rdquo; -Profile Any<br>
    }<br>
} else {<br>
   Write-Output &ldquo;Creating firewall rule for WinRM&rdquo;<br>
   New-NetFirewallRule -Profile Any -Name &ldquo;Allow WinRM HTTPS&rdquo; -DisplayName &ldquo;Allow WinRM HTTPS&rdquo; -Direction Inbound -LocalPort 5986 -Protocol &ldquo;TCP&rdquo; -Action Allow -Enabled True | Out-Null<br>
}</p>
<p># Test a remoting connection to localhost, which should work.<br>
$httpResult = Invoke-Command -ComputerName &ldquo;localhost&rdquo; -ScriptBlock {$env:COMPUTERNAME} -ErrorVariable httpError -ErrorAction SilentlyContinue<br>
$httpsOptions = New-PSSessionOption -SkipCACheck -SkipCNCheck -SkipRevocationCheck<br>
$httpsResult = New-PSSession -UseSSL -ComputerName &ldquo;localhost&rdquo; -SessionOption $httpsOptions -ErrorVariable httpsError -ErrorAction SilentlyContinue<br>
if ($httpResult -and $httpsResult)<br>
{<br>
    Write-Verbose &ldquo;HTTP: Enabled | HTTPS: Enabled&rdquo;<br>
}<br>
elseif ($httpsResult -and !$httpResult)<br>
{<br>
    Write-Verbose &ldquo;HTTP: Disabled | HTTPS: Enabled&rdquo;<br>
}<br>
elseif ($httpResult -and !$httpsResult)<br>
{<br>
    Write-Verbose &ldquo;HTTP: Enabled | HTTPS: Disabled&rdquo;<br>
}<br>
else<br>
{<br>
    Write-Output &ldquo;Unable to establish an HTTP or HTTPS remoting session.&rdquo;<br>
    Throw &ldquo;Unable to establish an HTTP or HTTPS remoting session.&rdquo;<br>
}<br>
Remove-PSSession -Session $httpsResult -ErrorAction SilentlyContinue<br>
Write-Output &ldquo;PS Remoting has been successfully configured for Intersight.&rdquo;</p>
<p>For more information on Intersight Target Claim, see <a href="file://E:%5Chelp%5Cgetting_started%5Cclaim_targets">Target Claim Using
Intersight Assist</a>.</p>
<p>Using the Executor PowerShell Script embedded task</p>
<p>Use the <strong>Invoke PowerShell Script</strong> from the <strong>Executors</strong> section in
the Intersight Orchestrator Workflow Designer UI to create a task for a
PowerShell Script target endpoint.</p>
<p>The following table explains the PowerShell Script task properties:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><p>The PowerShell endpoint on which the PowerShell Script task is run.</p>
<p>The PowerShell Script target must be in the connected state.</p>
<ul>
<li><p>Static Value—Click Select External Target to select the PowerShell endpoint target from the Cisco Intersight target inventory.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Script</td>
<td><p>The PowerShell script to be executed on the endpoint.</p>
<ul>
<li><p>Static Value—The PowerShell script.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul>
<p><strong>Note:</strong> When you specify the PowerShell script statement and enable the Response Parser Type as JSON, at the time of execution of the workflow, Intersight pipes <em>ConvertTo-Json</em> to the script to get the corresponding responses as JSON output. However, PowerShell script statements do not output to the pipe command, and the workflow may fail and return the error "An empty pipe element is not allowed.". For example, for a script foreach ($x in 1,2,3,4,5) {$x} with Response Parser Type as JSON, when the workflow is executed the workflow fails and returns the error "<em>An empty pipe element is not allowed</em>".</p>
<p>You must wrap the PowerShell script statement with the $() operator, such as $(foreach ($x in 1,2,3,4,5) {$x} ) for the PowerShell script to work.</p></td>
</tr>
<tr class="odd">
<td>Timeout</td>
<td><p>The duration in seconds for which the task waits for a response from the PowerShell target endpoint.</p>
<p>The field corresponds to the wsman:OperationTimeout field in the WinRM SOAP/XML message.</p>
<ul>
<li><p>Static Value—The timeout in seconds.</p></li>
<li><p>Direct Mapping—Select the command timeout from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>The response parser contains information about the required values, their types, and the location in the API responses. You specify the required values along with API request details. These details are used by the response parser to extract the values from the API responses.</p>
<ul>
<li><p>Static Value—Select the response type as JSON or Text.</p>
<ul>
<li><p>Enable JSON Parsing—Select enable to parse the script response and extract the data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Depth—The number of levels of the contained objects that must be included in the JSON representation.</p>
</blockquote></li>
<li><blockquote>
<p>Path—The content specific path information that identifies the parameter value within the content. The value is usually XPath or JSONPath.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Enable Text Parsing—Select enable to parse the script response and extract data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is $&lt;Name of the parameter&gt;. For example, if the value of the Regular Expression field is $&lt;ParameterName&gt;\@cisco\.com, then the Name field must be given the value - ParameterName.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$&lt;Name&gt;.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul></li>
<li><p>Direct Mapping—Select the command timeout from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the task Output properties:</p>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Exit Code</td>
<td>The exit code after the execution of the PowerShell script against the given endpoint.</td>
</tr>
<tr class="even">
<td>Response</td>
<td>The response returned by the script.</td>
</tr>
<tr class="odd">
<td>Extracted Parameters</td>
<td>The list of output parameters extracted from the response.</td>
</tr>
</tbody>
</table>
<p>The following table explains the task Outcomes properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Outcomes</td>
<td><p>To use the extracted values from the API response to determine the task status and set the status with an appropriate message, when the conditions match, do the following:</p>
<ol type="1">
<li><p>Click Add Outcome.</p></li>
<li><p>Name—The name for the outcome.</p></li>
<li><p>Outcome Type—Select the outcome type as Success, Error, or Skip Task Execution.</p></li>
</ol>
<ol start="26" type="1">
<li><p>For more information on Outcomes, see <a href="file://E:\\help\\resources\\Task_Designer">Outcomes</a></p></li>
</ol>
<ol start="4" type="1">
<li><p>Message—The message when the condition is met.</p></li>
<li><p>Condition—The condition for the outcome.</p></li>
</ol>
<ol start="27" type="1">
<li><p>For example, {{eq .local.response.ExitCode "0"}}.</p></li>
<li><p>This condition checks whether the response exit code of API is 0.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>Using the Executor PowerShell Script custom task</p>
<p>Use the <strong>Invoke PowerShell Script</strong> from the <strong>Executors</strong> section in
the Intersight Orchestrator Task Designer UI .</p>
<p>For more information on custom tasks, see <a href="file://E:%5Chelp%5Cresources%5CTask_Designer">Defining a
Task</a></p>
<p>The following table explains the PowerShell Script custom task
properties:</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td><p>For more information, see <a href="file://E:\\help\\resources\\Task_Designer">Defining a Task</a></p>
<p>.</p></td>
</tr>
<tr class="even">
<td>Inputs</td>
<td>External Target—The PowerShell endpoint target on which the PowerShell script task is run.</td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><p>To extract the required values from the API responses and map it to task outputs, do the following:</p>
<ol type="1">
<li><p>Create Task Output—Specify the task output.</p></li>
<li><p>Map to Task Output—Check the check box to map the task output to an API response.</p></li>
<li><p>Task Output—Select the API response to which the task output is mapped. The options available are:</p></li>
</ol>
<ul>
<li><p><em>Exit Code | Invoke PowerShell Script</em></p></li>
<li><p><em>Response | Invoke PowerShell Script</em></p></li>
<li><p><em>Extracted Parameters | Invoke PowerShell Script</em></p></li>
</ul>
<p>For example, if you create a new task output <em>New Exit Code</em> and map it to <em>Exit Code | Invoke PowerShell Script</em>, after the workflow is executed, the output will show:</p>
<p>.<br />
└── Outputs/<br />
    ├── ConfigResults:[ 1 ]/<br />
    │   └── Object:{ 3 }/<br />
    │       ├── ConfigResCtx:{ 1 }/<br />
    │       │   └── EntityData:{ 1 }/<br />
    │       │       └── task:workflow.PowerShellApiTask<br />
    │       ├── State:Ok<br />
    │       └── Type:Config<br />
    ├── Custom_Task_Output:Handles NPM(K) PM(K) WS(K) CPU(s) Id SI ProcessName/<br />
    │                        ----- ------ ----- ----- ------ -- -- -----------<br />
    │                       264 16 4880 24808 1.11 2600 2 ApplicationFrameHost<br />
    │                       405 28 109036 5628 85.55 2112 2 chrome<br />
    │                       ...<br />
    └── New Exit Code:0</p></td>
</tr>
</tbody>
</table>
<p>The following table explains the PowerShell Script custom task input:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Script</td>
<td><p>The PowerShell script to be executed on the target endpoint.</p>
<ul>
<li><p>Static Value—The PowerShell Script.</p></li>
<li><p>Direct Mapping—Select an existing Task input or Task output field.</p></li>
</ul>
<blockquote>
<p><strong>Note:</strong> When you use Direct Mapping and select a task input, and then execute the workflow it fails and returns the error <em>map[Text:get-service : The term 'map[Text:get-service' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.</em>.</p>
<p>You must prefix <em>.Text</em> to the Direct Mapping input in Advanced Mapping. For example, for a task input Script, the Advanced Mapping input should be{{.global.task.input.Script.Text}}</p>
</blockquote>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Timeout</td>
<td><p>The duration in seconds for which the task waits for a response from the PowerShell target endpoint.</p>
<p>The field corresponds to the wsman:OperationTimeout field in the WinRM SOAP/XML message.</p>
<ul>
<li><p>Static Value—The timeout in seconds.</p></li>
<li><p>Direct Mapping—Select the command timeout from the Task input or Task output.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Response Parser</td>
<td><p>The response parser contains information about the required values, their types, and the location in the API responses. You specify the required values along with API request details. These details are used by the response parser to extract the values from the API responses.</p>
<ul>
<li><p>Static Value—Select the response type as JSON or Text.</p>
<ul>
<li><p>Enable JSON Parsing—Select enable to parse the script response and extract the data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Depth—The number of levels of the contained objects that must be included in the JSON representation.</p>
</blockquote></li>
<li><blockquote>
<p>Path—The content specific path information that identifies the parameter value within the content. The value is usually XPath or JSONPath.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Enable Text Parsing—Select enable to parse the script response and extract data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is $&lt;Name of the parameter&gt;. For example, if the value of the Regular Expression field is $&lt;ParameterName&gt;\@cisco\.com, then the Name field must be given the value - ParameterName.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$&lt;Name&gt;.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul></li>
<li><p>Direct Mapping—Select the input from the Task input or Task output.</p></li>
</ul>
<blockquote>
<p><strong>Note:</strong> When you use Direct Mapping and select a task input, and execute the workflow it fails and returns the error <em>Error in execution: API request cannot be populated: invalid character 'm' looking for beginning of value</em>.</p>
<p>You must pipe <em>ToJson</em> to Direct Mapping in Advanced Mapping. For example, for a task input ResponseParser, the Advanced Mapping input should be {{.global.task.input.ResponseParser| ToJson}}.</p>
</blockquote>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the PowerShell Script custom task Outcomes:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Outcomes</td>
<td><p>To use the extracted values from the API response to determine the task status and set the status with an appropriate message, when the conditions match, do the following:</p>
<ol type="1">
<li><p>Click Add Outcome.</p></li>
<li><p>Name—The name for the outcome.</p></li>
<li><p>Outcome Type—Select the outcome type. The options available are Success, Skip To Success, Error, Terminal Error, Skip Task Execution, or Status.</p></li>
</ol>
<ol start="29" type="1">
<li><p>For more information on Outcomes, see <a href="file://E:\\help\\resources\\Task_Designer">Outcomes</a></p></li>
</ol>
<ol start="4" type="1">
<li><p>Message—The message when the condition is met.</p></li>
<li><p>Condition—The condition for the outcome.</p></li>
</ol>
<ol start="30" type="1">
<li><p>For example, {{eq .global.InvokePowerShellScript1.output.ExitCode "0"}}.</p></li>
<li><p>This condition checks whether the response exit code of the API named ‘InvokePowerShellScript1’ used in a custom task is 0.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>Template Parameters</p>
<p>The request body template can refer to values from workflow inputs,
previous task outputs, or implicit parameters for Intersight API calls.
The following table explains the template parameters.</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.workflow.input.&lt;ParameterName&gt;}}</td>
<td>Workflow input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;TaskRefName&gt;.output.<br />
Parameters.&lt;ParameterName&gt;}}</td>
<td>Previous task output reference. <strong>TaskRefName</strong> is the name of the previous task having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<p>Template Functions</p>
<p>The template engine has in-built functions to transform values before
they are populated in the request templates. The following table
explains the functions supported in <strong>Invoke Web API Request</strong> task.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TrimSpace</td>
<td><p>Returns a string after removing whitespaces from a the string.</p>
<p>Example:</p>
<p>{{TrimSpace .global.workflow.input.HostName}}</p></td>
</tr>
<tr class="even">
<td>ContainsString</td>
<td><p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<p>{{if (ContainsString .global.workflow.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}</p></td>
</tr>
<tr class="odd">
<td>FindAllString</td>
<td><p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \”([0-9]+)\”)}}</p>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="even">
<td>ToJson</td>
<td><p>Converts a value to a JSON format.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \"([0-9]+)\") | ToJson}}</p>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="odd">
<td>AsArray</td>
<td><p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<p>{{AsArray .global.workflow.output.serverMo}}</p>
<p>The above example returns an array of one server Mo.</p></td>
</tr>
<tr class="even">
<td>Substring</td>
<td><p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<p>{{Substring .global.workflow.input.StorageId 2 6}}</p>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p></td>
</tr>
<tr class="odd">
<td>IpToCidr</td>
<td><p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<p>{{IpToCidr .global.workflow.input.Ip .global.workflow.input.Netmask}}</p>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p></td>
</tr>
<tr class="even">
<td>LookupInSlice</td>
<td><p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<p>{{LookupInSlice .global.workflow.input.IpAddressList \”10.10.10.10\”}}</p>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p></td>
</tr>
<tr class="odd">
<td>Index</td>
<td><p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<p>{{ index .global.workflow.input.nodes .global.workflow.input.idx }} </p>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p></td>
</tr>
<tr class="even">
<td>Itob</td>
<td><p>Converts an integer to a boolean.</p>
<p>Example:</p>
<p>{{ Itob global.workflow.input.OnOffFlip }} </p>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p></td>
</tr>
<tr class="odd">
<td>Itoa</td>
<td><p>Converts a given number to a string value.</p>
<p>Example:</p>
<p>{{ Itoa global.workflow.input.Port }} </p>
<p>The above example returns “12345” for input 12345.</p></td>
</tr>
<tr class="even">
<td>Itof</td>
<td><p>Converts a given integer to a float value.</p>
<p>Example:</p>
<p>{{ Itof global.workflow.input.Rate }}</p>
<p>The above example returns 15.0 for an input 15.</p></td>
</tr>
<tr class="odd">
<td>Btoa</td>
<td><p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<p>{{ Btoa global.workflow.input.OnOffFlip }}</p>
<p>The above example returns “true” for input true.</p></td>
</tr>
<tr class="even">
<td>Btoi</td>
<td><p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<p>{{ Btoi global.workflow.input.OnOffFlip }}</p>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p></td>
</tr>
<tr class="odd">
<td>Atob</td>
<td><p>Converts the given string into a Boolean value.</p>
<p>Example:</p>
<p>{{ Atob global.workflow.input.OnOffFlip }}Returns true for input “true”</p></td>
</tr>
<tr class="even">
<td>Atoi</td>
<td><p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<p>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”</p></td>
</tr>
<tr class="odd">
<td>Ftoa</td>
<td><p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<p>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”</p></td>
</tr>
<tr class="even">
<td>Ftoi</td>
<td><p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<p>{{ Ftoi global.workflow.input.Rate }}</p>
<p>The above example returns 15 for an input 15.833.</p></td>
</tr>
<tr class="odd">
<td>Eval</td>
<td><p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<p>{{Eval \"{{.global.workflow.input.Size}} / 1024\" .}}GB</p></td>
</tr>
</tbody>
</table>
<p>Template Engine Syntax</p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>PowerShell Script Task Examples</p>
<p><strong>Example 1: Create a workflow to run a PowerShell Script task to get
the items and child items on a PowerShell Target endpoint</strong></p>
<p>The example below shows the execution of a script to get the items and
child items on a PowerShell target endpoint. The response parser of the
PowerShell script task is configured to use the <em>Depth</em> parameter to
limit the number of levels to recurse to 1.</p>
<p>The workflow input field required for this example is as follows:</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Workflow Input</th>
<th>Input Fields</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><ul>
<li><p>Reference Name—Target</p></li>
<li><p>Type—Target Data Type</p></li>
<li><p>Intersight API Reference—/api/v1/asset/Targets?$filter=(TargetType eq PowerShellEndpoint and Status eq Connected)</p>
<ul>
<li><p>Name</p></li>
<li><p>Target Type</p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the PowerShell Script task properties:</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><p>The target on which the PowerShell Script task is executed.</p>
<p>—${workflow.input.Target}</p></td>
</tr>
<tr class="even">
<td>Script</td>
<td>Static Value—get-childitem</td>
</tr>
<tr class="odd">
<td>Timeout</td>
<td>Static Value—60 sec</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><ul>
<li><p>Response Type—JSON</p></li>
<li><p>Depth—1</p></li>
<li><p>Enable JSON Parsing—Enable</p></li>
<li><p>JSON Parser Parameters</p>
<ul>
<li><p>Path—$</p></li>
<li><p>Name—Dir</p></li>
<li><p>Type—String</p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>After you execute the workflow, the task output is:</p>
<p>.<br>
└── ConfigResults:[ 1 ]/<br>
    └── Object:{ 3 }/<br>
        ├── ConfigResCtx:{ 1 }/<br>
        │   └── EntityData:{ 1 }/<br>
        │       └── task:workflow.PowerShellApiTask<br>
        ├── State:Ok<br>
        ├── Type:Config<br>
        ├── Response:[/<br>
        │   ├── {<br>
        │   ├── &ldquo;Name&rdquo;: &ldquo;Desktop&rdquo;,<br>
        │   ├── &ldquo;Parent&rdquo;: &ldquo;Administrator&rdquo;,<br>
        │   ├── &ldquo;Exists&rdquo;: true,<br>
        │   ├── &ldquo;Root&rdquo;: &ldquo;C:\\&rdquo;,<br>
        │   ├── &ldquo;FullName&rdquo;: &ldquo;C:\\Users\\Administrator\\Desktop&rdquo;,<br>
        │   ├── &ldquo;Extension&rdquo;: &ldquo;&rdquo;,<br>
        │   ├── &ldquo;CreationTime&rdquo;: &ldquo;\/Date(1633091610981)\/&rdquo;,<br>
        │   ├── &ldquo;CreationTimeUtc&rdquo;: &ldquo;\/Date(1633091610981)\/&rdquo;,<br>
        │   ├── &ldquo;LastAccessTime&rdquo;: &ldquo;\/Date(1634588500706)\/&rdquo;,<br>
        │   ├── &ldquo;LastAccessTimeUtc&rdquo;: &ldquo;\/Date(1634588500706)\/&rdquo;,<br>
        │   ├── &ldquo;LastWriteTime&rdquo;: &ldquo;\/Date(1634588500706)\/&rdquo;,<br>
        │   ├── &ldquo;LastWriteTimeUtc&rdquo;: &ldquo;\/Date(1634588500706)\/&rdquo;,<br>
        │   ├── &ldquo;Attributes&rdquo;: 17,<br>
        │   ├── &ldquo;PSPath&rdquo;: &ldquo;Microsoft.PowerShell.Core\\FileSystem::C:\\Users\\Administrator\\Desktop&rdquo;,<br>
        │   ├── &ldquo;PSParentPath&rdquo;: &ldquo;Microsoft.PowerShell.Core\\FileSystem::C:\\Users\\Administrator&rdquo;,<br>
        │   ├── &ldquo;PSChildName&rdquo;: &ldquo;Desktop&rdquo;,<br>
        │   ├── &ldquo;PSDrive&rdquo;: &ldquo;C&rdquo;,<br>
        │   ├── &ldquo;PSProvider&rdquo;: &ldquo;Microsoft.PowerShell.Core\\FileSystem&rdquo;,<br>
        │   ├── &ldquo;PSIsContainer&rdquo;: true,<br>
        │   ├── &ldquo;Mode&rdquo;: &ldquo;d-r&mdash;&rdquo;,<br>
        │   ├── &ldquo;BaseName&rdquo;: &ldquo;Desktop&rdquo;,<br>
        │   ├── &ldquo;Target&rdquo;: &ldquo;&rdquo;,<br>
        │   ├── &ldquo;LinkType&rdquo;: null<br>
        │   ├── },<br>
        │   ├── {<br>
        │   ├── &ldquo;Name&rdquo;: &ldquo;Documents&rdquo;,<br>
        │   ├── &ldquo;Parent&rdquo;: &ldquo;Administrator&rdquo;,<br>
        │   ├── &ldquo;Exists&rdquo;: true,<br>
        │   ├── &ldquo;Root&rdquo;: &ldquo;C:\\&rdquo;,<br>
        │   ├── &ldquo;FullName&rdquo;: &ldquo;C:\\Users\\Administrator\\Documents&rdquo;,<br>
        │   ├── &ldquo;Extension&rdquo;: &ldquo;&rdquo;,<br>
        │   ├── &ldquo;CreationTime&rdquo;: &ldquo;\/Date(1633091610981)\/&rdquo;,<br>
        │   ├── &ldquo;CreationTimeUtc&rdquo;: &ldquo;\/Date(1633091610981)\/&rdquo;,<br>
        │   ├── &ldquo;LastAccessTime&rdquo;: &ldquo;\/Date(1637588960280)\/&rdquo;,<br>
        │   ├── &ldquo;LastAccessTimeUtc&rdquo;: &ldquo;\/Date(1637588960280)\/&rdquo;,<br>
        │   ├── &ldquo;LastWriteTime&rdquo;: &ldquo;\/Date(1637588960280)\/&rdquo;,<br>
        │   ├── &ldquo;LastWriteTimeUtc&rdquo;: &ldquo;\/Date(1637588960280)\/&rdquo;,<br>
        │   ├── &ldquo;Attributes&rdquo;: 17,<br>
        │   ├── &ldquo;PSPath&rdquo;: &ldquo;Microsoft.PowerShell.Core\\FileSystem::C:\\Users\\Administrator\\Documents&rdquo;,<br>
        │   ├── &ldquo;PSParentPath&rdquo;: &ldquo;Microsoft.PowerShell.Core\\FileSystem::C:\\Users\\Administrator&rdquo;,<br>
        │   ├── &ldquo;PSChildName&rdquo;: &ldquo;Documents&rdquo;,<br>
        │   ├── &ldquo;PSDrive&rdquo;: &ldquo;C&rdquo;,<br>
        │   ├── &ldquo;PSProvider&rdquo;: &ldquo;Microsoft.PowerShell.Core\\FileSystem&rdquo;,<br>
        │   ├── &ldquo;PSIsContainer&rdquo;: true,<br>
        │   ├── &ldquo;Mode&rdquo;: &ldquo;d-r&mdash;&rdquo;,<br>
        │   ├── &ldquo;BaseName&rdquo;: &ldquo;Documents&rdquo;,<br>
        │   ├── &ldquo;Target&rdquo;: &ldquo;&rdquo;,<br>
        │   ├── &ldquo;LinkType&rdquo;: null<br>
        │   ├── },<br>
        │   └── &hellip;<br>
        ├── Exit Code:{ 0 }<br>
        └── Extracted Parameters:{ 1 }/<br>
            └── Test:[ 11 ]/<br>
                └── Object:{ 20 }/<br>
                    ├── Attributes:17<br>
                    ├── BaseName:Contacts<br>
                    ├── CreationTime:/Date(1633091626520)/<br>
                    ├── CreationTimeUtc:/Date(1633091626520)/<br>
                    ├── Exists:true<br>
                    ├── FullName:C:\Users\Administrator\Contacts<br>
                    ├── LastAccessTime:/Date(1633091626520)/<br>
                    └── LastAccessTimeUtc:/Date(1633091626520)/<br>
&hellip;</p>
<p>The following is a sample code view:</p>
<p>{<br>
  &ldquo;Catalog&rdquo;: {<br>
    &ldquo;Moid&rdquo;: &ldquo;5c350f48696f6e2d3121feec&rdquo;,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.Catalog&rdquo;,<br>
    &ldquo;link&rdquo;: &ldquo;<a href="https://www.intersight.com/api/v1/workflow/Catalogs/5c350f48696f6e2d3121feec%22">https://www.intersight.com/api/v1/workflow/Catalogs/5c350f48696f6e2d3121feec&quot;</a><br>
  },<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  &ldquo;InputDefinition&rdquo;: [<br>
    {<br>
      &ldquo;CustomDataTypeProperties&rdquo;: {<br>
        &ldquo;CatalogMoid&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;CustomDataTypeId&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;CustomDataTypeName&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.CustomDataProperty&rdquo;<br>
      },<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;The PowerShell endpoint on which the script is to be executed. PowerShell Remoting must be enabled on the endpoint to allow for scripts to be executed remotely.\n&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;Dropdown&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;IsArray&rdquo;: false,<br>
      &ldquo;Label&rdquo;: &ldquo;External Target&rdquo;,<br>
      &ldquo;Max&rdquo;: 0,<br>
      &ldquo;Min&rdquo;: 0,<br>
      &ldquo;Name&rdquo;: &ldquo;Target&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.TargetDataType&rdquo;,<br>
      &ldquo;Properties&rdquo;: [<br>
        {<br>
          &ldquo;ConnectorAttribute&rdquo;: &ldquo;&rdquo;,<br>
          &ldquo;ConstraintAttributes&rdquo;: [],<br>
          &ldquo;DisplayAttributes&rdquo;: [<br>
            &ldquo;Name&rdquo;,<br>
            &ldquo;TargetType&rdquo;<br>
          ],<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.TargetProperty&rdquo;,<br>
          &ldquo;Selector&rdquo;: &ldquo;/api/v1/asset/Targets?$filter=(TargetType eq PowerShellEndpoint and Status eq Connected)&rdquo;,<br>
          &ldquo;SelectorProperty&rdquo;: {<br>
            &ldquo;Body&rdquo;: null,<br>
            &ldquo;Method&rdquo;: &ldquo;GET&rdquo;,<br>
            &ldquo;ObjectType&rdquo;: &ldquo;workflow.SelectorProperty&rdquo;<br>
          },<br>
          &ldquo;SupportedObjects&rdquo;: [<br>
            &ldquo;asset.Target&rdquo;<br>
          ]<br>
        }<br>
      ],<br>
      &ldquo;Required&rdquo;: true<br>
    }<br>
  ],<br>
  &ldquo;InputParameterSet&rdquo;: [],<br>
  &ldquo;Label&rdquo;: &ldquo;Example1PowerShell&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;Example1PowerShell&rdquo;,<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Properties&rdquo;: {<br>
    &ldquo;Cloneable&rdquo;: true,<br>
    &ldquo;EnableDebug&rdquo;: false,<br>
    &ldquo;ExternalMeta&rdquo;: true,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkflowProperties&rdquo;,<br>
    &ldquo;Retryable&rdquo;: false,<br>
    &ldquo;SupportStatus&rdquo;: &ldquo;Supported&rdquo;<br>
  },<br>
  &ldquo;Tags&rdquo;: [],<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;InvokePowerShellScript1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes the given PowerShell script against the given PowerShell endpoint. The endpoint is typically a windows\nmachine with PowerShell Remoting enabled to allow for scripts to be executed remotely. The task connects to the\nPowerShell endpoint using the WinRM protocol.\n&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;OperationTimeout&rdquo;: 60,<br>
        &ldquo;ResponseParser&rdquo;: {<br>
          &ldquo;Depth&rdquo;: 1,<br>
          &ldquo;EnableJsonParser&rdquo;: &ldquo;Enable&rdquo;,<br>
          &ldquo;JsonParameters&rdquo;: [<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;Dir&rdquo;,<br>
              &ldquo;Path&rdquo;: &ldquo;$&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            }<br>
          ],<br>
          &ldquo;ResponseType&rdquo;: &ldquo;json&rdquo;<br>
        },<br>
        &ldquo;Script&rdquo;: {<br>
          &ldquo;Text&rdquo;: &ldquo;get-childitem&rdquo;<br>
        },<br>
        &ldquo;Target&rdquo;: &ldquo;${workflow.input.Target}&rdquo;<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke PowerShell Script&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokePowerShellScript1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;617913dd696f6e2d30bf346a&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokePowerShellScript&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 1<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;<br>
    }<br>
  ],<br>
  &ldquo;UiInputFilters&rdquo;: [],<br>
  &ldquo;UiRenderingData&rdquo;: {<br>
    &ldquo;Positions&rdquo;: [<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
        &ldquo;X&rdquo;: 10,<br>
        &ldquo;Y&rdquo;: 18.5<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 199.33338273233647,<br>
        &ldquo;Y&rdquo;: 381.4409231740322<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 462.33337796396506,<br>
        &ldquo;Y&rdquo;: 365.6328414754678<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokePowerShellScript1&rdquo;,<br>
        &ldquo;X&rdquo;: 178.5,<br>
        &ldquo;Y&rdquo;: 117<br>
      }<br>
    ]<br>
  },<br>
  &ldquo;Version&rdquo;: 1,<br>
  &ldquo;WorkflowMetadata&rdquo;: null<br>
}</p>
<p><strong>Example 2: Create a workflow to run a PowerShell Script task to
install an Internet Information Services (IIS) web server and create a
sample website</strong></p>
<p>The following example workflow has two PowerShell script tasks. The
first task installs the IIS web server on the PowerShell target
endpoint. The second task connects to the same PowerShell endpoint
target and creates a sample website.</p>
<p>The workflow input field required for this example are as follows:</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Workflow Input</th>
<th>Input Fields</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><ul>
<li><p>Reference Name—Target</p></li>
<li><p>Type—Target Data Type</p></li>
<li><p>Intersight API Reference—/api/v1/asset/Targets?$filter=(TargetType eq PowerShellEndpoint and Status eq Connected)</p>
<ul>
<li><p>Name</p></li>
<li><p>Target Type</p></li>
</ul></li>
</ul></td>
</tr>
<tr class="even">
<td>Role or Feature Name</td>
<td><ul>
<li><p>Reference Name—RoleorFeatureName</p></li>
<li><p>Type—String</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Website Name</td>
<td><ul>
<li><p>Reference Name—WebsiteName</p></li>
<li><p>Type—String</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the PowerShell Script task properties for
installing the IIS web server :</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><p>The target on which the PowerShell Script task is executed.</p>
<p>${workflow.input.Target}</p></td>
</tr>
<tr class="even">
<td>Script</td>
<td><p>&gt;Install-WindowsFeature -name Web-Server -IncludeManagementTools</p>
<p>Static Value</p>
<p>#Install role or feature<br />
Write-Output 'Installing "{{.global.workflow.input.RoleorFeatureName}}" Feature'<br />
Install-WindowsFeature -Name "{{.global.workflow.input.RoleorFeatureName}}" -IncludeManagementTools</p></td>
</tr>
<tr class="odd">
<td>Timeout</td>
<td>Static Value—15060 sec</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><ul>
<li><p>Response Type—JSON</p></li>
<li><p>Depth—1</p></li>
<li><p>Enable JSON Parsing—Enable</p></li>
<li><p>JSON Parser Parameters</p>
<ul>
<li><p>Path—$.Success</p></li>
<li><p>Name—Installation Succeeded</p></li>
<li><p>Type—String</p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the PowerShell script task properties for
creating a sample website:</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><p>The target on which the PowerShell Script task is executed.</p>
<p>${workflow.input.Target}</p></td>
</tr>
<tr class="even">
<td>Script</td>
<td><p>Static Value</p>
<p>#Create website content<br />
$site = "{{.global.workflow.input.WebsiteName}}"<br />
New-Item -ItemType Directory -Name 'MyWebsite' -Path 'C:\'<br />
New-Item -ItemType File -Name 'index.html' -Path 'C:\MyWebsite\'<br />
Get-Service | ConvertTo-Html -As LIST | Out-File C:\MyWebsite\index.html<br />
#Create a new site<br />
New-IISSite -Name $site -PhysicalPath 'C:\MyWebsite\' -BindingInformation "*:8088:"<br />
Get-IISSite | where Name -Contains $site | Format-Table -Property Name,State</p></td>
</tr>
<tr class="odd">
<td>Timeout</td>
<td>Static Value—10060 sec</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><ul>
<li><p>Response Type—Text</p></li>
<li><p>Depth—1</p></li>
<li><p>Enable Text Parsing—Enable</p></li>
<li><p>Text Parser Parameters</p>
<ul>
<li><p>Regular Expression—^demo+\s$&lt;SiteState&gt;</p></li>
<li><p>Name—SiteState</p></li>
<li><p>Type—String</p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>After you execute the workflow, the task output is:</p>
<p>#Invoke PowerShell Script<br>
&hellip;<br>
├── Inputs /<br>
│   ├── Script:{ 1 }/<br>
│   │           Text:#Install role or feature<br>
│   │               Write-Output &lsquo;Installing &ldquo;Web-Server&rdquo; Feature&rsquo;<br>
│   │               Install-WindowsFeature -Name &ldquo;Web-Server&rdquo; -IncludeManagementTools<br>
│   ├── Timeout:150<br>
│   ├── Response Parser:{ 4 }/<br>
│   │   ├── Depth: 1<br>
│   │   └── Enable JSON Parsing:Enable/<br>
│   │       ├── JSON Parser Parameters:[ 1 ]/<br>
│   │       │   └── Object:{ 3 }/<br>
│   │       │       ├── Name:Installation Succeeded<br>
│   │       │       ├── Path:$.Success<br>
│   │       │       └── Type:string<br>
│   │       └── Response Type:json<br>
│   └── External Target:{ 2 }/<br>
│       ├── Moid:61a5f99c6f72612d30b1e4bf<br>
│       └── ObjectType:asset.Target<br>
└── Outputs/<br>
    ├── ConfigResults:[ 1 ]/<br>
    │   ├── Object:{ 3 }/<br>
    │   │   └── ConfigResCtx:{ 1 }/<br>
    │   │       └── EntityData:{ 1 }/<br>
    │   │           └── task:workflow.PowerShellApiTask<br>
    │   ├── State:Ok<br>
    │   └── Type:Config<br>
    ├── Response:Installing &ldquo;Web-Server&rdquo; Feature/<br>
    │              {<br>
    │               &ldquo;Success&rdquo;: true,<br>
    │               &ldquo;RestartNeeded&rdquo;: 1,<br>
    │               &ldquo;FeatureResult&rdquo;: [<br>
    │               &ldquo;Common HTTP Features&rdquo;,<br>
    │               &ldquo;Default Document&rdquo;,<br>
    │               &ldquo;Directory Browsing&rdquo;,<br>
    │               &ldquo;Request Filtering&rdquo;,<br>
    │               &ldquo;Health and Diagnostics&rdquo;,<br>
    │               &ldquo;HTTP Errors&rdquo;,<br>
    │               &ldquo;HTTP Logging&rdquo;,<br>
    │               &ldquo;IIS Management Console&rdquo;,<br>
    │               &ldquo;Management Tools&rdquo;,<br>
    │               &ldquo;Performance&rdquo;,<br>
    │               &ldquo;Security&rdquo;,<br>
    │               &ldquo;Web Server (IIS)&rdquo;,<br>
    │               &ldquo;Static Content Compression&rdquo;,<br>
    │               &ldquo;Static Content&rdquo;,<br>
    │               &ldquo;Web Server&rdquo;<br>
    │               ],<br>
    │               &ldquo;ExitCode&rdquo;: 0<br>
    │               }<br>
    └── Exit Code:{ 0 }<br>
#Invoke PowerShell Script<br>
&hellip;<br>
.<br>
└── Inputs/<br>
    ├── Script:{ 1 }/<br>
    │           Text:#Create website content<br>
    │           $site = &ldquo;demo&rdquo;<br>
    │           New-Item -ItemType Directory -Name &lsquo;MyWebsite&rsquo; -Path &lsquo;C:\&rsquo;<br>
    │           New-Item -ItemType File -Name &lsquo;index.html&rsquo; -Path &lsquo;C:\MyWebsite\&rsquo;<br>
    │           Get-Service | ConvertTo-Html -As LIST | Out-File C:\MyWebsite\index.html<br>
    │           #Create a new site<br>
    │           New-IISSite -Name $site -PhysicalPath &lsquo;C:\MyWebsite\&rsquo; -BindingInformation &ldquo;*:8088:&rdquo;<br>
    │           Get-IISSite | where Name -Contains $site | Format-Table -Property Name,State<br>
    ├── Timeout:100<br>
    └── Response Parser:{ 3 }/<br>
        ├── Enable Text Parsing:Enable<br>
        ├── Response Type:text<br>
        ├── Text Parser Parameters:[ 1 ]/<br>
        │   └── Object:{ 3 }/<br>
        │       ├── Name:SiteState<br>
        │       ├── RegexLine:^demo+\s$&lt;SiteState&gt;<br>
        │       └── Type:string<br>
        ├── External Target:{ 2 }/<br>
        │   ├── Moid:61a5f99c6f72612d30b1e4bf<br>
        │   └── ObjectType:asset.Target<br>
└── Outputs/<br>
    ├── ConfigResults:[ 1 ]/<br>
        │   └── Object:{ 3 }/<br>
        │       ├── ConfigResCtx:{ 1 }/<br>
        │       │   └── EntityData:{ 1 }/<br>
        │       │       └── task:workflow.PowerShellApiTask<br>
        │       ├── State:Ok<br>
        │       └── Type:Config<br>
        ├── Response:Directory: C:\/<br>
        │                        Mode LastWriteTime Length Name<br>
        │                        &mdash;- &mdash;&mdash;&mdash;&mdash;- &mdash;&mdash; &mdash;-<br>
        │                       d&mdash;&ndash; 12/1/2021 11:43 AM MyWebsite<br>
        │                       Directory: C:\MyWebsite<br>
        │                       Mode LastWriteTime Length Name<br>
        │                       &mdash;- &mdash;&mdash;&mdash;&mdash;- &mdash;&mdash; &mdash;-<br>
        │                       -a&mdash;- 12/1/2021 11:43 AM 0 index.html<br>
        │                       Name State<br>
        │                       &mdash;- &mdash;&ndash;<br>
        │                       demo Started<br>
        ├── Exit Code:{ 0 }<br>
        └── Extracted Parameters:{ 1 }/<br>
            └── SiteState:Started</p>
<p>The following is a sample code view:</p>
<p>{<br>
  &ldquo;Catalog&rdquo;: {<br>
    &ldquo;Moid&rdquo;: &ldquo;6166bf80696f6e2d30f796b7&rdquo;,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.Catalog&rdquo;,<br>
    &ldquo;link&rdquo;: &ldquo;<a href="https://www.intersight.com/api/v1/workflow/Catalogs/6166bf80696f6e2d30f796b7%22">https://www.intersight.com/api/v1/workflow/Catalogs/6166bf80696f6e2d30f796b7&quot;</a><br>
  },<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  &ldquo;InputDefinition&rdquo;: [<br>
    {<br>
      &ldquo;CustomDataTypeProperties&rdquo;: {<br>
        &ldquo;CatalogMoid&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;CustomDataTypeId&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;CustomDataTypeName&rdquo;: &ldquo;&rdquo;,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.CustomDataProperty&rdquo;<br>
      },<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;The PowerShell endpoint on which the script is to be executed. PowerShell Remoting must be enabled on the endpoint to allow for scripts to be executed remotely.\n&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;Dropdown&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;IsArray&rdquo;: false,<br>
      &ldquo;Label&rdquo;: &ldquo;External Target&rdquo;,<br>
      &ldquo;Max&rdquo;: 0,<br>
      &ldquo;Min&rdquo;: 0,<br>
      &ldquo;Name&rdquo;: &ldquo;Target&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.TargetDataType&rdquo;,<br>
      &ldquo;Properties&rdquo;: [<br>
        {<br>
          &ldquo;ConnectorAttribute&rdquo;: &ldquo;&rdquo;,<br>
          &ldquo;ConstraintAttributes&rdquo;: [],<br>
          &ldquo;DisplayAttributes&rdquo;: [<br>
            &ldquo;Name&rdquo;,<br>
            &ldquo;TargetType&rdquo;<br>
          ],<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.TargetProperty&rdquo;,<br>
          &ldquo;Selector&rdquo;: &ldquo;/api/v1/asset/Targets?$filter=(TargetType eq PowerShellEndpoint and Status eq Connected)&rdquo;,<br>
          &ldquo;SelectorProperty&rdquo;: {<br>
            &ldquo;Body&rdquo;: null,<br>
            &ldquo;Method&rdquo;: &ldquo;GET&rdquo;,<br>
            &ldquo;ObjectType&rdquo;: &ldquo;workflow.SelectorProperty&rdquo;<br>
          },<br>
          &ldquo;SupportedObjects&rdquo;: [<br>
            &ldquo;asset.Target&rdquo;<br>
          ]<br>
        }<br>
      ],<br>
      &ldquo;Required&rdquo;: true<br>
    },<br>
    {<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;Role or Feature Name&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Role or Feature Name&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;RoleorFeatureName&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Secure&rdquo;: false,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      },<br>
      &ldquo;Required&rdquo;: false<br>
    },<br>
    {<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;Website Name&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Website Name&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;WebsiteName&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Secure&rdquo;: false,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      },<br>
      &ldquo;Required&rdquo;: false<br>
    }<br>
  ],<br>
  &ldquo;InputParameterSet&rdquo;: [],<br>
  &ldquo;Label&rdquo;: &ldquo;PowerShellExample2&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;PowerShellExample2&rdquo;,<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Properties&rdquo;: {<br>
    &ldquo;Cloneable&rdquo;: true,<br>
    &ldquo;EnableDebug&rdquo;: false,<br>
    &ldquo;ExternalMeta&rdquo;: true,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkflowProperties&rdquo;,<br>
    &ldquo;Retryable&rdquo;: false,<br>
    &ldquo;SupportStatus&rdquo;: &ldquo;Supported&rdquo;<br>
  },<br>
  &ldquo;Tags&rdquo;: [],<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;InvokePowerShellScript1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;6166bf7f696f6e2d30f796a6&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes the given PowerShell script against the given PowerShell endpoint. The endpoint is typically a windows\nmachine with PowerShell Remoting enabled to allow for scripts to be executed remotely. The task connects to the\nPowerShell endpoint using the WinRM protocol.\n&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;OperationTimeout&rdquo;: 150,<br>
        &ldquo;ResponseParser&rdquo;: {<br>
          &ldquo;Depth&rdquo;: 1,<br>
          &ldquo;EnableJsonParser&rdquo;: &ldquo;Enable&rdquo;,<br>
          &ldquo;JsonParameters&rdquo;: [<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;Installation Succeeded &ldquo;,<br>
              &ldquo;Path&rdquo;: &ldquo;$.Success&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            }<br>
          ],<br>
          &ldquo;ResponseType&rdquo;: &ldquo;json&rdquo;<br>
        },<br>
        &ldquo;Script&rdquo;: {<br>
          &ldquo;Text&rdquo;: &ldquo;#Install role or feature\r\nWrite-Output &lsquo;Installing \&rdquo;{{.global.workflow.input.RoleorFeatureName}}\&rdquo; Feature&rsquo;\r\nInstall-WindowsFeature -Name \&rdquo;{{.global.workflow.input.RoleorFeatureName}}\&quot; -IncludeManagementTools&quot;<br>
        },<br>
        &ldquo;Target&rdquo;: &ldquo;${workflow.input.Target}&rdquo;<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke PowerShell Script&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokePowerShellScript1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;InvokePowerShellScript2&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;616e70f8696f6e2d30355005&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokePowerShellScript&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 1<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;6166bf7f696f6e2d30f796a6&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes the given PowerShell script against the given PowerShell endpoint. The endpoint is typically a windows\nmachine with PowerShell Remoting enabled to allow for scripts to be executed remotely. The task connects to the\nPowerShell endpoint using the WinRM protocol.\n&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;OperationTimeout&rdquo;: 100,<br>
        &ldquo;ResponseParser&rdquo;: {<br>
          &ldquo;EnableTextParser&rdquo;: &ldquo;Enable&rdquo;,<br>
          &ldquo;ResponseType&rdquo;: &ldquo;text&rdquo;,<br>
          &ldquo;TextParameters&rdquo;: [<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;SiteState&rdquo;,<br>
              &ldquo;RegexLine&rdquo;: &ldquo;^demo+\\s$&lt;SiteState&gt;&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            }<br>
          ]<br>
        },<br>
        &ldquo;Script&rdquo;: {<br>
          &ldquo;Text&rdquo;: &ldquo;#Create website content\r\n$site = \&rdquo;{{.global.workflow.input.WebsiteName}}\&quot;\r\nNew-Item -ItemType Directory -Name &lsquo;MyWebsite&rsquo; -Path &lsquo;C:\\&rsquo;\r\nNew-Item -ItemType File -Name &lsquo;index.html&rsquo; -Path &lsquo;C:\\MyWebsite\\&rsquo;\r\nGet-Service | ConvertTo-Html -As LIST | Out-File C:\\MyWebsite\\index.html\r\n#Create a new site\r\nNew-IISSite -Name $site -PhysicalPath &lsquo;C:\\MyWebsite\\&rsquo; -BindingInformation \&quot;*:8088:\&quot;\r\nGet-IISSite | where Name -Contains $site | Format-Table -Property Name,State&quot;<br>
        },<br>
        &ldquo;Target&rdquo;: &ldquo;${workflow.input.Target}&rdquo;<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke PowerShell Script&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokePowerShellScript2&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;616e70f8696f6e2d30355005&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokePowerShellScript&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 1<br>
    }<br>
  ],<br>
  &ldquo;UiInputFilters&rdquo;: [],<br>
  &ldquo;UiRenderingData&rdquo;: {<br>
    &ldquo;Positions&rdquo;: [<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
        &ldquo;X&rdquo;: 10,<br>
        &ldquo;Y&rdquo;: 18<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 10,<br>
        &ldquo;Y&rdquo;: 692<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 152,<br>
        &ldquo;Y&rdquo;: 692<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokePowerShellScript1&rdquo;,<br>
        &ldquo;X&rdquo;: 72.5,<br>
        &ldquo;Y&rdquo;: 182<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokePowerShellScript2&rdquo;,<br>
        &ldquo;X&rdquo;: 116,<br>
        &ldquo;Y&rdquo;: 323<br>
      }<br>
    ]<br>
  },<br>
  &ldquo;Version&rdquo;: 1,<br>
  &ldquo;WorkflowMetadata&rdquo;: null<br>
}</p>
<p><span id="_Refd24e12594" class="anchor"></span>Executors – Invoke
Ansible Playbook - Embedded Task</p>
<p>Intersight Cloud Orchestrator allows workflow designers to run Ansible
Playbook on the Ansible Controller node using the <strong>Invoke Ansible
Playbook</strong> embedded task in the workflow. The Invoke Ansible Playbook
task is an out-of-box solution that allows you to automate Ansible
operations on the Ansible Controller node that is added as an Ansible
Endpoint target in Cisco Intersight. This feature allows a workflow
designer to extend the automation capabilities of the workflow engine
beyond what is natively available in the task library and interact with
the Ansible Controller node target.</p>
<p>For more inforormation on Invoke Ansible Playbook - Reusable Task, see
<a href="file://E:%5Chelp%5Cresources%5CExecutor_Ansible_Reusable">Invoke Ansible Playbook - Reusable
Task</a>.</p>
<p>Supported Targets</p>
<p>The Invoke Ansible Playbook task can be run only on the targets that are
added as an Ansible Endpoint target type in Cisco Intersight.</p>
<p>The <strong>Invoke Ansible Playbook</strong> task is executed as an orchestrator task
and does not include the management of the Ansible Controller node.</p>
<p>To run the Ansible Playbook task on the Ansible Controller node from
Cisco Intersight, ensure that:</p>
<ul>
<li></li>
</ul>
<!-- -->
<ul>
<li>
<p>The Ansible target is reachable through Intersight Assist when
hosted on the customer premises.</p>
</li>
<li></li>
</ul>
<!-- -->
<ul>
<li>
<p>The Ansible Playbook modules and Ansible Playbook executables
required to run the playbooks are already installed on the Ansible
Controller node.</p>
</li>
<li>
<p>The Ansible Controller node has password-less SSH access to the
hosts.</p>
</li>
<li>
<p>The Ansible Controller node can resolve the endpoint hostnames if
the Ansible Host Inventory file specifies the hostnames.</p>
</li>
</ul>
<p>For more information on Intersight Target Claim, see <a href="file://E:%5Chelp%5Cgetting_started%5Cclaim_targets">Target Claim Using
Intersight Assist</a>.</p>
<p>Using the Executor Ansible Playbook task</p>
<p>Use the <strong>Invoke Ansible Playbook</strong> from the <strong>Executors</strong> section in
the Intersight Orchestrator Workflow Designer UI to create a request for
an Ansible Playbook target.</p>
<p>The following table explains the task Input properties:</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ansible Controller</td>
<td><p>The target on which the Ansible Playbook task is run.</p>
<p>The Ansible Playbook target must be in the Connected state.</p>
<ul>
<li><p>Static Value—Click Select External Target to select an Ansible endpoint target from Cisco Intersight target inventory.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Playbook Path</td>
<td><p>The path of the Ansible Playbook file that resides on the Ansible Controller node added as Ansible Endpoint target in Intersight.</p>
<ul>
<li><p>Static Value—The path of the Ansible Playbook.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Host Inventory</td>
<td><p>The path of the host inventory file that resides on the Ansible Controller or a comma-separated list of hosts on which the Ansible Playbook task is run.</p>
<ul>
<li><p>Static Value—The path of the host inventory file that resides on the Ansible Controller or a comma-separated list of hosts.</p></li>
</ul>
<ul>
<li><blockquote>
<p>For example, you can enter the hostname as root@10.10.10.10,</p>
</blockquote></li>
</ul>
<blockquote>
<p><strong>Note:</strong> The hostname must be suffixed with a comma (,).</p>
</blockquote>
<ul>
<li><p>Direct Mapping—Select the path from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Command Timeout</td>
<td><p>The command timeout in seconds for the execution of the Ansible Playbook. The range is 10 to 7200 seconds.</p>
<p>The default timeout is 600 seconds.</p>
<ul>
<li><p>Static Value—The command timeout in seconds.</p></li>
<li><p>Direct Mapping—Select the command timeout from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Command Line Argument</td>
<td><p>The optional command line arguments required to run the Ansible playbook.</p>
<ul>
<li><p>Static Value—The command line argument.</p></li>
<li><p>Direct Mapping—Select the input from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul>
<p>Escape character backslash(\) needs to be used when the command line arguments contain double quotes(").</p>
<p><strong>Note:</strong> For Invoke Ansible Playbook - Reusable Task, escape character backslash(\) is not necessary when the command line arguments contain double quotes(").</p>
<p>The following command line options are not supported by the Ansible Playbook task.</p>
<ul>
<li><p>-vvv</p></li>
<li><p>-vvvv</p></li>
<li><p>-k, -K</p></li>
<li><p>-c</p></li>
<li><p>--connection</p></li>
<li><p>--sftp-extra-args</p></li>
<li><p>--scp-extra-args</p></li>
<li><p>--ask-vault-password</p></li>
<li><p>--step</p></li>
</ul>
<ul>
<li><blockquote>
<p>For information on the available command line arguments, see <a href="https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html">https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html</a>.</p>
</blockquote></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the task Output properties:</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Exit Code</td>
<td>The exit code after the execution of the Ansible Playbook against the given endpoint.</td>
</tr>
<tr class="even">
<td>Execution Summary</td>
<td>The summary after the execution of Ansible Playbook against the given endpoint.</td>
</tr>
<tr class="odd">
<td>Execution Log Path</td>
<td>The Ansible execution log path on the Ansible Control node after the execution of Ansible Playbook against the given endpoint.</td>
</tr>
</tbody>
</table>
<p>Template Parameters</p>
<p>The request body template can refer to values from workflow inputs,
previous task outputs, or implicit parameters. The following table
explains the template parameters.</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.workflow.input.&lt;ParameterName&gt;}}</td>
<td>Workflow input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;TaskRefName&gt;.output.<br />
Parameters.&lt;ParameterName&gt;}}</td>
<td>Previous task output reference. <strong>TaskRefName</strong> is the name of the previous task having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<p>Template Functions</p>
<p>The template engine has in-built functions to transform values before
they are populated in the request templates. The following table
explains the functions supported in <strong>Invoke Ansible Playbook</strong> task.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TrimSpace</td>
<td><p>Returns a string after removing whitespaces from a the string.</p>
<p>Example:</p>
<p>{{TrimSpace .global.workflow.input.HostName}}</p></td>
</tr>
<tr class="even">
<td>ContainsString</td>
<td><p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<p>{{if (ContainsString .global.workflow.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}</p></td>
</tr>
<tr class="odd">
<td>FindAllString</td>
<td><p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \”([0-9]+)\”)}}</p>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="even">
<td>ToJson</td>
<td><p>Converts a value to a JSON format.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \"([0-9]+)\") | ToJson}}</p>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="odd">
<td>AsArray</td>
<td><p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<p>{{AsArray .global.workflow.output.serverMo}}</p>
<p>The above example returns an array of one server Mo.</p></td>
</tr>
<tr class="even">
<td>Substring</td>
<td><p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<p>{{Substring .global.workflow.input.StorageId 2 6}}</p>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p></td>
</tr>
<tr class="odd">
<td>IpToCidr</td>
<td><p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<p>{{IpToCidr .global.workflow.input.Ip .global.workflow.input.Netmask}}</p>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p></td>
</tr>
<tr class="even">
<td>LookupInSlice</td>
<td><p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<p>{{LookupInSlice .global.workflow.input.IpAddressList \”10.10.10.10\”}}</p>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p></td>
</tr>
<tr class="odd">
<td>Index</td>
<td><p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<p>{{ index .global.workflow.input.nodes .global.workflow.input.idx }} </p>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p></td>
</tr>
<tr class="even">
<td>Itob</td>
<td><p>Converts an integer to a boolean.</p>
<p>Example:</p>
<p>{{ Itob global.workflow.input.OnOffFlip }} </p>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p></td>
</tr>
<tr class="odd">
<td>Itoa</td>
<td><p>Converts a given number to a string value.</p>
<p>Example:</p>
<p>{{ Itoa global.workflow.input.Port }} </p>
<p>The above example returns “12345” for input 12345.</p></td>
</tr>
<tr class="even">
<td>Itof</td>
<td><p>Converts a given integer to a float value.</p>
<p>Example:</p>
<p>{{ Itof global.workflow.input.Rate }}</p>
<p>The above example returns 15.0 for an input 15.</p></td>
</tr>
<tr class="odd">
<td>Btoa</td>
<td><p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<p>{{ Btoa global.workflow.input.OnOffFlip }}</p>
<p>The above example returns “true” for input true.</p></td>
</tr>
<tr class="even">
<td>Btoi</td>
<td><p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<p>{{ Btoi global.workflow.input.OnOffFlip }}</p>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p></td>
</tr>
<tr class="odd">
<td>Atob</td>
<td><p>Converts the given string into a Boolean value.</p>
<p>Example:</p>
<p>{{ Atob global.workflow.input.OnOffFlip }}Returns true for input “true”</p></td>
</tr>
<tr class="even">
<td>Atoi</td>
<td><p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<p>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”</p></td>
</tr>
<tr class="odd">
<td>Ftoa</td>
<td><p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<p>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”</p></td>
</tr>
<tr class="even">
<td>Ftoi</td>
<td><p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<p>{{ Ftoi global.workflow.input.Rate }}</p>
<p>The above example returns 15 for an input 15.833.</p></td>
</tr>
<tr class="odd">
<td>Eval</td>
<td><p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<p>{{Eval \"{{.global.workflow.input.Size}} / 1024\" .}}GB</p></td>
</tr>
</tbody>
</table>
<p>Template Engine Syntax</p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>Ansible Playbook Task Example</p>
<p><strong>Example: Create a workflow to run Ansible Playbook task to install
Nginx on the hosts</strong></p>
<p>The following example workflow has two tasks—Ansible Playbook and SSH
Command tasks. The first task runs the Ansible Playbook on a controller
and installs Nginx on host nodes. In this task, the Playbook Path, Host
Inventory, Sudo Password, and other inputs are provided by the workflow
input fields. The second task, SSH Command, connects to the Ansible
endpoint target over SSH and verifies the Ansible logs.</p>
<p>The workflow input fields required for this example are as follows:</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Workflow Input</th>
<th>Input Fields</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Install Package</td>
<td><ul>
<li><p>Reference Name—InstallPackage</p></li>
<li><p>Type—String</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Host Inventory</td>
<td><ul>
<li><p>Reference Name—HostInventory</p></li>
<li><p>Type—String</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>SudoPassword</td>
<td><ul>
<li><p>Reference Name—SudoPassword</p></li>
<li><p>Type—String</p></li>
<li><p>Secure option is selected. The values of these properties are encrypted and stored in Intersight.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Command Line Arguments</td>
<td><ul>
<li><p>Reference Name—CommandLineArguments</p></li>
<li><p>Type—String</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the Ansible Playbook task properties:</p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ansible Controller</td>
<td>The target on which the Ansible Playbook task is executed.</td>
</tr>
<tr class="even">
<td>Playbook Path</td>
<td>Static Value—${workflow.input.InstallPackage}</td>
</tr>
<tr class="odd">
<td>Host Inventory</td>
<td>Static Value—${workflow.input.HostInventory}</td>
</tr>
<tr class="even">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Command Line Argument</td>
<td>Static Value—${workflow.input.CommandLineArguments}</td>
</tr>
</tbody>
</table>
<p>The following table displays the SSH command task properties:</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td>The Ansible Controller VM that is used in the previous task.</td>
</tr>
<tr class="even">
<td>SSH Command</td>
<td><p>Command—cat {{.global.InvokeAnsiblePlaybook1.output.ExecutionLogPath}}</p>
<p>In the above example, <em>InvokeAnsiblePlaybook1</em> is the task reference name of the previous task. To determine the task reference name, navigate to the Code view. For example:</p>
<p>"Tasks": <br />
    ...<br />
   "Description": "Executes Ansible Playbook against the given endpoint. This task can be executed on targets added as Ansible Endpoint in Intersight.\n",<br />
      "Label": "Invoke Ansible Playbook - Install Package",<br />
      "Name": "InvokeAnsiblePlaybook1",<br />
...</p></td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Expected Exit Codes</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Show Command Output</td>
<td>Select Show Command Option check box.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><ul>
<li><p>Node 1</p>
<ul>
<li><p>Regular Expression— 10.106.*?\"changed\":.*?\"stderr\":\s\"$&lt;VersionOnNode1&gt;\",</p></li>
<li><p>Name—VersionOnNode1</p></li>
</ul>
<ul>
<li><blockquote>
<p>Type String</p>
</blockquote></li>
</ul></li>
<li><p>Node 2</p>
<ul>
<li><p>Regular Expression—10.106.*?\"changed\":.*?\"stderr\":\s\"$&lt;VersionOnNode2&gt;\",</p></li>
<li><p>Name—VersionOnNode2</p></li>
</ul>
<ul>
<li><blockquote>
<p>Type—String</p>
</blockquote></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>After you execute the workflow, you would see the following output:</p>
<p>.<br>
├── ConfigResults: [ 1 ]<br>
├── Object: { 3 }<br>
│   └── ConfigResCtx: { 1 }<br>
│       ├── EntityData: { 1 }<br>
│       │   └── task: workflow.SshTask<br>
│       ├── State: Ok<br>
│       └── Type: Config<br>
├── Command Output:<br>
│   ├── 2021-10-30 04:22:59,999 p=512757 u=qali n=ansible | Using /etc/ansible/ansible.cfg as config file<br>
│   ├── 2021-10-30 04:23:00,224 p=512757 u=qali n=ansible | PLAY [Install nginx] ***********************************************************<br>
│   ├── 2021-10-30 04:23:00,237 p=512757 u=qali n=ansible | TASK [Gathering Facts] *********************************************************<br>
│   ├── 2021-10-30 04:23:01,801 p=512757 u=qali n=ansible | ok: [guest@10.10.10.1]<br>
│   ├── 2021-10-30 04:23:02,033 p=512757 u=qali n=ansible | ok: [root@10.10.10.2]<br>
│   ├── 2021-10-30 04:23:02,042 p=512757 u=qali n=ansible | TASK [Add epel-release repo] ***************************************************<br>
│   ├── 2021-10-30 04:23:03,060 p=512757 u=qali n=ansible | ok: [guest@10.10.10.1] =&gt; {&ldquo;changed&rdquo;: false, &ldquo;msg&rdquo;: &ldquo;&quot;, &ldquo;rc&rdquo;: 0, &ldquo;results&rdquo;: [&ldquo;epel-release-7-12.noarch providing epel-release is already installed&rdquo;]}<br>
│   ├── 2021-10-30 04:23:27,036 p=512757 u=qali n=ansible | ok: [root@10.10.10.2] =&gt; {&ldquo;changed&rdquo;: false, &ldquo;msg&rdquo;: &ldquo;Nothing to do&rdquo;, &ldquo;rc&rdquo;: 0, &ldquo;results&rdquo;: []}<br>
│   ├── 2021-10-30 04:23:27,042 p=512757 u=qali n=ansible | TASK [Install nginx] ***********************************************************<br>
│   ├── 2021-10-30 04:23:27,887 p=512757 u=qali n=ansible | ok: [guest@10.10.10.1] =&gt; {&ldquo;changed&rdquo;: false, &ldquo;msg&rdquo;: &ldquo;&quot;, &ldquo;rc&rdquo;: 0, &ldquo;results&rdquo;: [&ldquo;1:nginx-1.20.1-9.el7.x86_64 providing nginx is already installed&rdquo;]}<br>
│   ├── 2021-10-30 04:23:29,534 p=512757 u=qali n=ansible | ok: [root@10.10.10.2] =&gt; {&ldquo;changed&rdquo;: false, &ldquo;msg&rdquo;: &ldquo;Nothing to do&rdquo;, &ldquo;rc&rdquo;: 0, &ldquo;results&rdquo;: []}<br>
│   ├── 2021-10-30 04:23:29,541 p=512757 u=qali n=ansible | TASK [Nginx Version] ***********************************************************<br>
│   ├── 2021-10-30 04:23:30,086 p=512757 u=qali n=ansible | changed: [guest@10.10.10.1] =&gt; {&ldquo;changed&rdquo;: true, &ldquo;cmd&rdquo;: [&ldquo;nginx&rdquo;, &ldquo;-v&rdquo;], &ldquo;delta&rdquo;: &ldquo;0:00:00.006230&rdquo;, &ldquo;end&rdquo;: &ldquo;2021-10-29 05:52:52.465579&rdquo;, &ldquo;rc&rdquo;: 0, &ldquo;start&rdquo;: &ldquo;2021-10-29 05:52:52.459349&rdquo;, &ldquo;stderr&rdquo;: &ldquo;nginx version: nginx/1.20.1&rdquo;, &ldquo;stderr_lines&rdquo;: [&ldquo;nginx version: nginx/1.20.1&rdquo;], &ldquo;stdout&rdquo;: &ldquo;&quot;, &ldquo;stdout_lines&rdquo;: []}<br>
│   ├── 2021-10-30 04:23:30,236 p=512757 u=qali n=ansible | changed: [root@10.10.10.2] =&gt; {&ldquo;changed&rdquo;: true, &ldquo;cmd&rdquo;: [&ldquo;nginx&rdquo;, &ldquo;-v&rdquo;], &ldquo;delta&rdquo;: &ldquo;0:00:00.005168&rdquo;, &ldquo;end&rdquo;: &ldquo;2021-10-29 06:04:28.863644&rdquo;, &ldquo;rc&rdquo;: 0, &ldquo;start&rdquo;: &ldquo;2021-10-29 06:04:28.858476&rdquo;, &ldquo;stderr&rdquo;: &ldquo;nginx version: nginx/1.14.1&rdquo;, &ldquo;stderr_lines&rdquo;: [&ldquo;nginx version: nginx/1.14.1&rdquo;], &ldquo;stdout&rdquo;: &ldquo;&quot;, &ldquo;stdout_lines&rdquo;: []}<br>
│   ├── 2021-10-30 04:23:30,248 p=512757 u=qali n=ansible | TASK [Start NGiNX] *************************************************************<br>
│   ├── 2021-10-30 04:23:31,043 p=512757 u=qali n=ansible | ok: [guest@10.10.10.1] =&gt; {&ldquo;changed&rdquo;: false, &ldquo;name&rdquo;: &ldquo;nginx&rdquo;, &ldquo;state&rdquo;: &ldquo;started&rdquo;, &ldquo;status&rdquo;: {&ldquo;ActiveEnterTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:20:15 EDT&rdquo;, &ldquo;ActiveEnterTimestampMonotonic&rdquo;: &ldquo;24390544004045&rdquo;, &ldquo;ActiveExitTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;ActiveState&rdquo;: &ldquo;active&rdquo;, &ldquo;After&rdquo;: &ldquo;remote-fs.target nss-lookup.target systemd-journald.socket basic.target system.slice -.mount tmp.mount network-online.target&rdquo;, &ldquo;AllowIsolate&rdquo;: &ldquo;no&rdquo;, &ldquo;AmbientCapabilities&rdquo;: &ldquo;0&rdquo;, &ldquo;AssertResult&rdquo;: &ldquo;yes&rdquo;, &ldquo;AssertTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:20:15 EDT&rdquo;, &ldquo;AssertTimestampMonotonic&rdquo;: &ldquo;24390543923354&rdquo;, &ldquo;Before&rdquo;: &ldquo;shutdown.target&rdquo;, &ldquo;BlockIOAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;BlockIOWeight&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;CPUAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;CPUQuotaPerSecUSec&rdquo;: &ldquo;infinity&rdquo;, &ldquo;CPUSchedulingPolicy&rdquo;: &ldquo;0&rdquo;, &ldquo;CPUSchedulingPriority&rdquo;: &ldquo;0&rdquo;, &ldquo;CPUSchedulingResetOnFork&rdquo;: &ldquo;no&rdquo;, &ldquo;CPUShares&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;CanIsolate&rdquo;: &ldquo;no&rdquo;, &ldquo;CanReload&rdquo;: &ldquo;yes&rdquo;, &ldquo;CanStart&rdquo;: &ldquo;yes&rdquo;, &ldquo;CanStop&rdquo;: &ldquo;yes&rdquo;, &ldquo;CapabilityBoundingSet&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;ConditionResult&rdquo;: &ldquo;yes&rdquo;, &ldquo;ConditionTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:20:15 EDT&rdquo;, &ldquo;ConditionTimestampMonotonic&rdquo;: &ldquo;24390543923353&rdquo;, &ldquo;Conflicts&rdquo;: &ldquo;shutdown.target&rdquo;, &ldquo;ControlGroup&rdquo;: &ldquo;/system.slice/nginx.service&rdquo;, &ldquo;ControlPID&rdquo;: &ldquo;0&rdquo;, &ldquo;DefaultDependencies&rdquo;: &ldquo;yes&rdquo;, &ldquo;Delegate&rdquo;: &ldquo;no&rdquo;, &ldquo;Description&rdquo;: &ldquo;The nginx HTTP and reverse proxy server&rdquo;, &ldquo;DevicePolicy&rdquo;: &ldquo;auto&rdquo;, &ldquo;ExecMainCode&rdquo;: &ldquo;0&rdquo;, &ldquo;ExecMainExitTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;ExecMainPID&rdquo;: &ldquo;10910&rdquo;, &ldquo;ExecMainStartTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:20:15 EDT&rdquo;, &ldquo;ExecMainStartTimestampMonotonic&rdquo;: &ldquo;24390544003959&rdquo;, &ldquo;ExecMainStatus&rdquo;: &ldquo;0&rdquo;, &ldquo;ExecReload&rdquo;: &ldquo;{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx -s reload ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }&quot;, &ldquo;ExecStart&rdquo;: &ldquo;{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx ; ignore_errors=no ; start_time=[Wed 2021-10-27 09:20:15 EDT] ; stop_time=[Wed 2021-10-27 09:20:15 EDT] ; pid=10909 ; code=exited ; status=0 }&quot;, &ldquo;ExecStartPre&rdquo;: &ldquo;{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx -t ; ignore_errors=no ; start_time=[Wed 2021-10-27 09:20:15 EDT] ; stop_time=[Wed 2021-10-27 09:20:15 EDT] ; pid=10905 ; code=exited ; status=0 }&quot;, &ldquo;FailureAction&rdquo;: &ldquo;none&rdquo;, &ldquo;FileDescriptorStoreMax&rdquo;: &ldquo;0&rdquo;, &ldquo;FragmentPath&rdquo;: &ldquo;/usr/lib/systemd/system/nginx.service&rdquo;, &ldquo;GuessMainPID&rdquo;: &ldquo;yes&rdquo;, &ldquo;IOScheduling&rdquo;: &ldquo;0&rdquo;, &ldquo;Id&rdquo;: &ldquo;nginx.service&rdquo;, &ldquo;IgnoreOnIsolate&rdquo;: &ldquo;no&rdquo;, &ldquo;IgnoreOnSnapshot&rdquo;: &ldquo;no&rdquo;, &ldquo;IgnoreSIGPIPE&rdquo;: &ldquo;yes&rdquo;, &ldquo;InactiveEnterTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;InactiveExitTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:20:15 EDT&rdquo;, &ldquo;InactiveExitTimestampMonotonic&rdquo;: &ldquo;24390543931397&rdquo;, &ldquo;JobTimeoutAction&rdquo;: &ldquo;none&rdquo;, &ldquo;JobTimeoutUSec&rdquo;: &ldquo;0&rdquo;, &ldquo;KillMode&rdquo;: &ldquo;process&rdquo;, &ldquo;KillSignal&rdquo;: &ldquo;3&rdquo;, &ldquo;LimitAS&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitCORE&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitCPU&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitDATA&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitFSIZE&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitLOCKS&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitMEMLOCK&rdquo;: &ldquo;65536&rdquo;, &ldquo;LimitMSGQUEUE&rdquo;: &ldquo;819200&rdquo;, &ldquo;LimitNICE&rdquo;: &ldquo;0&rdquo;, &ldquo;LimitNOFILE&rdquo;: &ldquo;4096&rdquo;, &ldquo;LimitNPROC&rdquo;: &ldquo;15066&rdquo;, &ldquo;LimitRSS&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitRTPRIO&rdquo;: &ldquo;0&rdquo;, &ldquo;LimitRTTIME&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LimitSIGPENDING&rdquo;: &ldquo;15066&rdquo;, &ldquo;LimitSTACK&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;LoadState&rdquo;: &ldquo;loaded&rdquo;, &ldquo;MainPID&rdquo;: &ldquo;10910&rdquo;, &ldquo;MemoryAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;MemoryCurrent&rdquo;: &ldquo;2322432&rdquo;, &ldquo;MemoryLimit&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;MountFlags&rdquo;: &ldquo;0&rdquo;, &ldquo;Names&rdquo;: &ldquo;nginx.service&rdquo;, &ldquo;NeedDaemonReload&rdquo;: &ldquo;no&rdquo;, &ldquo;Nice&rdquo;: &ldquo;0&rdquo;, &ldquo;NoNewPrivileges&rdquo;: &ldquo;no&rdquo;, &ldquo;NonBlocking&rdquo;: &ldquo;no&rdquo;, &ldquo;NotifyAccess&rdquo;: &ldquo;none&rdquo;, &ldquo;OOMScoreAdjust&rdquo;: &ldquo;0&rdquo;, &ldquo;OnFailureJobMode&rdquo;: &ldquo;replace&rdquo;, &ldquo;PIDFile&rdquo;: &ldquo;/run/nginx.pid&rdquo;, &ldquo;PermissionsStartOnly&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateDevices&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateNetwork&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateTmp&rdquo;: &ldquo;yes&rdquo;, &ldquo;ProtectHome&rdquo;: &ldquo;no&rdquo;, &ldquo;ProtectSystem&rdquo;: &ldquo;no&rdquo;, &ldquo;RefuseManualStart&rdquo;: &ldquo;no&rdquo;, &ldquo;RefuseManualStop&rdquo;: &ldquo;no&rdquo;, &ldquo;RemainAfterExit&rdquo;: &ldquo;no&rdquo;, &ldquo;Requires&rdquo;: &ldquo;-.mount system.slice basic.target&rdquo;, &ldquo;RequiresMountsFor&rdquo;: &ldquo;/var/tmp&rdquo;, &ldquo;Restart&rdquo;: &ldquo;no&rdquo;, &ldquo;RestartUSec&rdquo;: &ldquo;100ms&rdquo;, &ldquo;Result&rdquo;: &ldquo;success&rdquo;, &ldquo;RootDirectoryStartOnly&rdquo;: &ldquo;no&rdquo;, &ldquo;RuntimeDirectoryMode&rdquo;: &ldquo;0755&rdquo;, &ldquo;SameProcessGroup&rdquo;: &ldquo;no&rdquo;, &ldquo;SecureBits&rdquo;: &ldquo;0&rdquo;, &ldquo;SendSIGHUP&rdquo;: &ldquo;no&rdquo;, &ldquo;SendSIGKILL&rdquo;: &ldquo;yes&rdquo;, &ldquo;Slice&rdquo;: &ldquo;system.slice&rdquo;, &ldquo;StandardError&rdquo;: &ldquo;inherit&rdquo;, &ldquo;StandardInput&rdquo;: &ldquo;null&rdquo;, &ldquo;StandardOutput&rdquo;: &ldquo;journal&rdquo;, &ldquo;StartLimitAction&rdquo;: &ldquo;none&rdquo;, &ldquo;StartLimitBurst&rdquo;: &ldquo;5&rdquo;, &ldquo;StartLimitInterval&rdquo;: &ldquo;10000000&rdquo;, &ldquo;StartupBlockIOWeight&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;StartupCPUShares&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;StatusErrno&rdquo;: &ldquo;0&rdquo;, &ldquo;StopWhenUnneeded&rdquo;: &ldquo;no&rdquo;, &ldquo;SubState&rdquo;: &ldquo;running&rdquo;, &ldquo;SyslogLevelPrefix&rdquo;: &ldquo;yes&rdquo;, &ldquo;SyslogPriority&rdquo;: &ldquo;30&rdquo;, &ldquo;SystemCallErrorNumber&rdquo;: &ldquo;0&rdquo;, &ldquo;TTYReset&rdquo;: &ldquo;no&rdquo;, &ldquo;TTYVHangup&rdquo;: &ldquo;no&rdquo;, &ldquo;TTYVTDisallocate&rdquo;: &ldquo;no&rdquo;, &ldquo;TasksAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;TasksCurrent&rdquo;: &ldquo;3&rdquo;, &ldquo;TasksMax&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;TimeoutStartUSec&rdquo;: &ldquo;1min 30s&rdquo;, &ldquo;TimeoutStopUSec&rdquo;: &ldquo;5s&rdquo;, &ldquo;TimerSlackNSec&rdquo;: &ldquo;50000&rdquo;, &ldquo;Transient&rdquo;: &ldquo;no&rdquo;, &ldquo;Type&rdquo;: &ldquo;forking&rdquo;, &ldquo;UMask&rdquo;: &ldquo;0022&rdquo;, &ldquo;UnitFilePreset&rdquo;: &ldquo;disabled&rdquo;, &ldquo;UnitFileState&rdquo;: &ldquo;disabled&rdquo;, &ldquo;Wants&rdquo;: &ldquo;network-online.target&rdquo;, &ldquo;WatchdogTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:20:15 EDT&rdquo;, &ldquo;WatchdogTimestampMonotonic&rdquo;: &ldquo;24390544003990&rdquo;, &ldquo;WatchdogUSec&rdquo;: &ldquo;0&rdquo;}}<br>
│   ├── 2021-10-30 04:23:31,244 p=512757 u=qali n=ansible | ok: [root@10.10.10.2] =&gt; {&ldquo;changed&rdquo;: false, &ldquo;name&rdquo;: &ldquo;nginx&rdquo;, &ldquo;state&rdquo;: &ldquo;started&rdquo;, &ldquo;status&rdquo;: {&ldquo;ActiveEnterTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:31:49 EDT&rdquo;, &ldquo;ActiveEnterTimestampMonotonic&rdquo;: &ldquo;3803190467261&rdquo;, &ldquo;ActiveExitTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;ActiveState&rdquo;: &ldquo;active&rdquo;, &ldquo;After&rdquo;: &ldquo;-.mount tmp.mount system.slice systemd-journald.socket network.target nss-lookup.target remote-fs.target basic.target sysinit.target systemd-tmpfiles-setup.service&rdquo;, &ldquo;AllowIsolate&rdquo;: &ldquo;no&rdquo;, &ldquo;AllowedCPUs&rdquo;: &ldquo;&quot;, &ldquo;AllowedMemoryNodes&rdquo;: &ldquo;&quot;, &ldquo;AmbientCapabilities&rdquo;: &ldquo;&quot;, &ldquo;AssertResult&rdquo;: &ldquo;yes&rdquo;, &ldquo;AssertTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:31:49 EDT&rdquo;, &ldquo;AssertTimestampMonotonic&rdquo;: &ldquo;3803190328406&rdquo;, &ldquo;Before&rdquo;: &ldquo;shutdown.target&rdquo;, &ldquo;BlockIOAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;BlockIOWeight&rdquo;: &ldquo;[not set]&quot;, &ldquo;CPUAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;CPUAffinity&rdquo;: &ldquo;&quot;, &ldquo;CPUAffinityFromNUMA&rdquo;: &ldquo;no&rdquo;, &ldquo;CPUQuotaPerSecUSec&rdquo;: &ldquo;infinity&rdquo;, &ldquo;CPUQuotaPeriodUSec&rdquo;: &ldquo;infinity&rdquo;, &ldquo;CPUSchedulingPolicy&rdquo;: &ldquo;0&rdquo;, &ldquo;CPUSchedulingPriority&rdquo;: &ldquo;0&rdquo;, &ldquo;CPUSchedulingResetOnFork&rdquo;: &ldquo;no&rdquo;, &ldquo;CPUShares&rdquo;: &ldquo;[not set]&quot;, &ldquo;CPUUsageNSec&rdquo;: &ldquo;[not set]&quot;, &ldquo;CPUWeight&rdquo;: &ldquo;[not set]&quot;, &ldquo;CacheDirectoryMode&rdquo;: &ldquo;0755&rdquo;, &ldquo;CanFreeze&rdquo;: &ldquo;yes&rdquo;, &ldquo;CanIsolate&rdquo;: &ldquo;no&rdquo;, &ldquo;CanReload&rdquo;: &ldquo;yes&rdquo;, &ldquo;CanStart&rdquo;: &ldquo;yes&rdquo;, &ldquo;CanStop&rdquo;: &ldquo;yes&rdquo;, &ldquo;CapabilityBoundingSet&rdquo;: &ldquo;cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend&rdquo;, &ldquo;CollectMode&rdquo;: &ldquo;inactive&rdquo;, &ldquo;ConditionResult&rdquo;: &ldquo;yes&rdquo;, &ldquo;ConditionTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:31:49 EDT&rdquo;, &ldquo;ConditionTimestampMonotonic&rdquo;: &ldquo;3803190328406&rdquo;, &ldquo;ConfigurationDirectoryMode&rdquo;: &ldquo;0755&rdquo;, &ldquo;Conflicts&rdquo;: &ldquo;shutdown.target&rdquo;, &ldquo;ControlGroup&rdquo;: &ldquo;/system.slice/nginx.service&rdquo;, &ldquo;ControlPID&rdquo;: &ldquo;0&rdquo;, &ldquo;DefaultDependencies&rdquo;: &ldquo;yes&rdquo;, &ldquo;DefaultMemoryLow&rdquo;: &ldquo;0&rdquo;, &ldquo;DefaultMemoryMin&rdquo;: &ldquo;0&rdquo;, &ldquo;Delegate&rdquo;: &ldquo;no&rdquo;, &ldquo;Description&rdquo;: &ldquo;The nginx HTTP and reverse proxy server&rdquo;, &ldquo;DevicePolicy&rdquo;: &ldquo;auto&rdquo;, &ldquo;DynamicUser&rdquo;: &ldquo;no&rdquo;, &ldquo;EffectiveCPUs&rdquo;: &ldquo;&quot;, &ldquo;EffectiveMemoryNodes&rdquo;: &ldquo;&quot;, &ldquo;ExecMainCode&rdquo;: &ldquo;0&rdquo;, &ldquo;ExecMainExitTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;ExecMainPID&rdquo;: &ldquo;2348498&rdquo;, &ldquo;ExecMainStartTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:31:49 EDT&rdquo;, &ldquo;ExecMainStartTimestampMonotonic&rdquo;: &ldquo;3803190463259&rdquo;, &ldquo;ExecMainStatus&rdquo;: &ldquo;0&rdquo;, &ldquo;ExecReload&rdquo;: &ldquo;{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }&quot;, &ldquo;ExecStart&rdquo;: &ldquo;{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx ; ignore_errors=no ; start_time=[Wed 2021-10-27 09:31:49 EDT] ; stop_time=[Wed 2021-10-27 09:31:49 EDT] ; pid=2348496 ; code=exited ; status=0 }&quot;, &ldquo;ExecStartPre&rdquo;: &ldquo;{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx -t ; ignore_errors=no ; start_time=[Wed 2021-10-27 09:31:49 EDT] ; stop_time=[Wed 2021-10-27 09:31:49 EDT] ; pid=2348495 ; code=exited ; status=0 }&quot;, &ldquo;FailureAction&rdquo;: &ldquo;none&rdquo;, &ldquo;FileDescriptorStoreMax&rdquo;: &ldquo;0&rdquo;, &ldquo;FragmentPath&rdquo;: &ldquo;/usr/lib/systemd/system/nginx.service&rdquo;, &ldquo;FreezerState&rdquo;: &ldquo;running&rdquo;, &ldquo;GID&rdquo;: &ldquo;[not set]&quot;, &ldquo;GuessMainPID&rdquo;: &ldquo;yes&rdquo;, &ldquo;IOAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;IOSchedulingClass&rdquo;: &ldquo;0&rdquo;, &ldquo;IOSchedulingPriority&rdquo;: &ldquo;0&rdquo;, &ldquo;IOWeight&rdquo;: &ldquo;[not set]&quot;, &ldquo;IPAccounting&rdquo;: &ldquo;no&rdquo;, &ldquo;IPEgressBytes&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;IPEgressPackets&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;IPIngressBytes&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;IPIngressPackets&rdquo;: &ldquo;18446744073709551615&rdquo;, &ldquo;Id&rdquo;: &ldquo;nginx.service&rdquo;, &ldquo;IgnoreOnIsolate&rdquo;: &ldquo;no&rdquo;, &ldquo;IgnoreSIGPIPE&rdquo;: &ldquo;yes&rdquo;, &ldquo;InactiveEnterTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;InactiveExitTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:31:49 EDT&rdquo;, &ldquo;InactiveExitTimestampMonotonic&rdquo;: &ldquo;3803190345159&rdquo;, &ldquo;InvocationID&rdquo;: &ldquo;3ea4654765104d85977c279dbe1f7588&rdquo;, &ldquo;JobRunningTimeoutUSec&rdquo;: &ldquo;infinity&rdquo;, &ldquo;JobTimeoutAction&rdquo;: &ldquo;none&rdquo;, &ldquo;JobTimeoutUSec&rdquo;: &ldquo;infinity&rdquo;, &ldquo;KeyringMode&rdquo;: &ldquo;private&rdquo;, &ldquo;KillMode&rdquo;: &ldquo;mixed&rdquo;, &ldquo;KillSignal&rdquo;: &ldquo;3&rdquo;, &ldquo;LimitAS&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitASSoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitCORE&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitCORESoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitCPU&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitCPUSoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitDATA&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitDATASoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitFSIZE&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitFSIZESoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitLOCKS&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitLOCKSSoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitMEMLOCK&rdquo;: &ldquo;65536&rdquo;, &ldquo;LimitMEMLOCKSoft&rdquo;: &ldquo;65536&rdquo;, &ldquo;LimitMSGQUEUE&rdquo;: &ldquo;819200&rdquo;, &ldquo;LimitMSGQUEUESoft&rdquo;: &ldquo;819200&rdquo;, &ldquo;LimitNICE&rdquo;: &ldquo;0&rdquo;, &ldquo;LimitNICESoft&rdquo;: &ldquo;0&rdquo;, &ldquo;LimitNOFILE&rdquo;: &ldquo;262144&rdquo;, &ldquo;LimitNOFILESoft&rdquo;: &ldquo;1024&rdquo;, &ldquo;LimitNPROC&rdquo;: &ldquo;6751&rdquo;, &ldquo;LimitNPROCSoft&rdquo;: &ldquo;6751&rdquo;, &ldquo;LimitRSS&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitRSSSoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitRTPRIO&rdquo;: &ldquo;0&rdquo;, &ldquo;LimitRTPRIOSoft&rdquo;: &ldquo;0&rdquo;, &ldquo;LimitRTTIME&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitRTTIMESoft&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitSIGPENDING&rdquo;: &ldquo;6751&rdquo;, &ldquo;LimitSIGPENDINGSoft&rdquo;: &ldquo;6751&rdquo;, &ldquo;LimitSTACK&rdquo;: &ldquo;infinity&rdquo;, &ldquo;LimitSTACKSoft&rdquo;: &ldquo;8388608&rdquo;, &ldquo;LoadState&rdquo;: &ldquo;loaded&rdquo;, &ldquo;LockPersonality&rdquo;: &ldquo;no&rdquo;, &ldquo;LogLevelMax&rdquo;: &ldquo;-1&rdquo;, &ldquo;LogRateLimitBurst&rdquo;: &ldquo;0&rdquo;, &ldquo;LogRateLimitIntervalUSec&rdquo;: &ldquo;0&rdquo;, &ldquo;LogsDirectoryMode&rdquo;: &ldquo;0755&rdquo;, &ldquo;MainPID&rdquo;: &ldquo;2348498&rdquo;, &ldquo;MemoryAccounting&rdquo;: &ldquo;yes&rdquo;, &ldquo;MemoryCurrent&rdquo;: &ldquo;6414336&rdquo;, &ldquo;MemoryDenyWriteExecute&rdquo;: &ldquo;no&rdquo;, &ldquo;MemoryHigh&rdquo;: &ldquo;infinity&rdquo;, &ldquo;MemoryLimit&rdquo;: &ldquo;infinity&rdquo;, &ldquo;MemoryLow&rdquo;: &ldquo;0&rdquo;, &ldquo;MemoryMax&rdquo;: &ldquo;infinity&rdquo;, &ldquo;MemoryMin&rdquo;: &ldquo;0&rdquo;, &ldquo;MemorySwapMax&rdquo;: &ldquo;infinity&rdquo;, &ldquo;MountAPIVFS&rdquo;: &ldquo;no&rdquo;, &ldquo;MountFlags&rdquo;: &ldquo;&quot;, &ldquo;NFileDescriptorStore&rdquo;: &ldquo;0&rdquo;, &ldquo;NRestarts&rdquo;: &ldquo;0&rdquo;, &ldquo;NUMAMask&rdquo;: &ldquo;&quot;, &ldquo;NUMAPolicy&rdquo;: &ldquo;n/a&rdquo;, &ldquo;Names&rdquo;: &ldquo;nginx.service&rdquo;, &ldquo;NeedDaemonReload&rdquo;: &ldquo;no&rdquo;, &ldquo;Nice&rdquo;: &ldquo;0&rdquo;, &ldquo;NoNewPrivileges&rdquo;: &ldquo;no&rdquo;, &ldquo;NonBlocking&rdquo;: &ldquo;no&rdquo;, &ldquo;NotifyAccess&rdquo;: &ldquo;none&rdquo;, &ldquo;OOMScoreAdjust&rdquo;: &ldquo;0&rdquo;, &ldquo;OnFailureJobMode&rdquo;: &ldquo;replace&rdquo;, &ldquo;PIDFile&rdquo;: &ldquo;/run/nginx.pid&rdquo;, &ldquo;PermissionsStartOnly&rdquo;: &ldquo;no&rdquo;, &ldquo;Perpetual&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateDevices&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateMounts&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateNetwork&rdquo;: &ldquo;no&rdquo;, &ldquo;PrivateTmp&rdquo;: &ldquo;yes&rdquo;, &ldquo;PrivateUsers&rdquo;: &ldquo;no&rdquo;, &ldquo;ProtectControlGroups&rdquo;: &ldquo;no&rdquo;, &ldquo;ProtectHome&rdquo;: &ldquo;no&rdquo;, &ldquo;ProtectKernelModules&rdquo;: &ldquo;no&rdquo;, &ldquo;ProtectKernelTunables&rdquo;: &ldquo;no&rdquo;, &ldquo;ProtectSystem&rdquo;: &ldquo;no&rdquo;, &ldquo;RefuseManualStart&rdquo;: &ldquo;no&rdquo;, &ldquo;RefuseManualStop&rdquo;: &ldquo;no&rdquo;, &ldquo;RemainAfterExit&rdquo;: &ldquo;no&rdquo;, &ldquo;RemoveIPC&rdquo;: &ldquo;no&rdquo;, &ldquo;Requires&rdquo;: &ldquo;system.slice sysinit.target -.mount&rdquo;, &ldquo;RequiresMountsFor&rdquo;: &ldquo;/var/tmp&rdquo;, &ldquo;Restart&rdquo;: &ldquo;no&rdquo;, &ldquo;RestartUSec&rdquo;: &ldquo;100ms&rdquo;, &ldquo;RestrictNamespaces&rdquo;: &ldquo;no&rdquo;, &ldquo;RestrictRealtime&rdquo;: &ldquo;no&rdquo;, &ldquo;RestrictSUIDSGID&rdquo;: &ldquo;no&rdquo;, &ldquo;Result&rdquo;: &ldquo;success&rdquo;, &ldquo;RootDirectoryStartOnly&rdquo;: &ldquo;no&rdquo;, &ldquo;RuntimeDirectoryMode&rdquo;: &ldquo;0755&rdquo;, &ldquo;RuntimeDirectoryPreserve&rdquo;: &ldquo;no&rdquo;, &ldquo;RuntimeMaxUSec&rdquo;: &ldquo;infinity&rdquo;, &ldquo;SameProcessGroup&rdquo;: &ldquo;no&rdquo;, &ldquo;SecureBits&rdquo;: &ldquo;0&rdquo;, &ldquo;SendSIGHUP&rdquo;: &ldquo;no&rdquo;, &ldquo;SendSIGKILL&rdquo;: &ldquo;yes&rdquo;, &ldquo;Slice&rdquo;: &ldquo;system.slice&rdquo;, &ldquo;StandardError&rdquo;: &ldquo;inherit&rdquo;, &ldquo;StandardInput&rdquo;: &ldquo;null&rdquo;, &ldquo;StandardInputData&rdquo;: &ldquo;&quot;, &ldquo;StandardOutput&rdquo;: &ldquo;journal&rdquo;, &ldquo;StartLimitAction&rdquo;: &ldquo;none&rdquo;, &ldquo;StartLimitBurst&rdquo;: &ldquo;5&rdquo;, &ldquo;StartLimitIntervalUSec&rdquo;: &ldquo;10s&rdquo;, &ldquo;StartupBlockIOWeight&rdquo;: &ldquo;[not set]&quot;, &ldquo;StartupCPUShares&rdquo;: &ldquo;[not set]&quot;, &ldquo;StartupCPUWeight&rdquo;: &ldquo;[not set]&quot;, &ldquo;StartupIOWeight&rdquo;: &ldquo;[not set]&quot;, &ldquo;StateChangeTimestamp&rdquo;: &ldquo;Wed 2021-10-27 09:31:49 EDT&rdquo;, &ldquo;StateChangeTimestampMonotonic&rdquo;: &ldquo;3803190467261&rdquo;, &ldquo;StateDirectoryMode&rdquo;: &ldquo;0755&rdquo;, &ldquo;StatusErrno&rdquo;: &ldquo;0&rdquo;, &ldquo;StopWhenUnneeded&rdquo;: &ldquo;no&rdquo;, &ldquo;SubState&rdquo;: &ldquo;running&rdquo;, &ldquo;SuccessAction&rdquo;: &ldquo;none&rdquo;, &ldquo;SyslogFacility&rdquo;: &ldquo;3&rdquo;, &ldquo;SyslogLevel&rdquo;: &ldquo;6&rdquo;, &ldquo;SyslogLevelPrefix&rdquo;: &ldquo;yes&rdquo;, &ldquo;SyslogPriority&rdquo;: &ldquo;30&rdquo;, &ldquo;SystemCallErrorNumber&rdquo;: &ldquo;0&rdquo;, &ldquo;TTYReset&rdquo;: &ldquo;no&rdquo;, &ldquo;TTYVHangup&rdquo;: &ldquo;no&rdquo;, &ldquo;TTYVTDisallocate&rdquo;: &ldquo;no&rdquo;, &ldquo;TasksAccounting&rdquo;: &ldquo;yes&rdquo;, &ldquo;TasksCurrent&rdquo;: &ldquo;2&rdquo;, &ldquo;TasksMax&rdquo;: &ldquo;10802&rdquo;, &ldquo;TimeoutStartUSec&rdquo;: &ldquo;1min 30s&rdquo;, &ldquo;TimeoutStopUSec&rdquo;: &ldquo;5s&rdquo;, &ldquo;TimerSlackNSec&rdquo;: &ldquo;50000&rdquo;, &ldquo;Transient&rdquo;: &ldquo;no&rdquo;, &ldquo;Type&rdquo;: &ldquo;forking&rdquo;, &ldquo;UID&rdquo;: &ldquo;[not set]&quot;, &ldquo;UMask&rdquo;: &ldquo;0022&rdquo;, &ldquo;UnitFilePreset&rdquo;: &ldquo;disabled&rdquo;, &ldquo;UnitFileState&rdquo;: &ldquo;disabled&rdquo;, &ldquo;UtmpMode&rdquo;: &ldquo;init&rdquo;, &ldquo;WatchdogTimestampMonotonic&rdquo;: &ldquo;0&rdquo;, &ldquo;WatchdogUSec&rdquo;: &ldquo;0&rdquo;}}<br>
│   ├── 2021-10-30 04:23:31,246 p=512757 u=qali n=ansible | PLAY RECAP *********************************************************************<br>
│   ├── 2021-10-30 04:23:31,246 p=512757 u=qali n=ansible | guest@10.10.10.1 : ok=5 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0<br>
│   └── 2021-10-30 04:23:31,246 p=512757 u=qali n=ansible | root@10.10.10.2 : ok=5 changed=1 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0<br>
├── Exit Code: 0<br>
└── Extracted Parameters: { 2 }<br>
    ├── <strong>VersionOnNode1: nginx version: nginx/1.14.1</strong><br>
    └── <strong>VersionOnNode2: nginx version: nginx/1.20.1</strong><br>
         </p>
<p>The following is a sample code view:</p>
<p>{<br>
  &ldquo;Tags&rdquo;: [],<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  &ldquo;InputDefinition&rdquo;: [<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;IsValueSet&rdquo;: true,<br>
        &ldquo;Override&rdquo;: true,<br>
        &ldquo;Value&rdquo;: &ldquo;/home/qali/vspancha/playbooks/install_nginx.yml&rdquo;<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;The path of the ansible playbook residing on the Ansible Endpoint target.\n&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Install Package&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InstallPackage&rdquo;,<br>
      &ldquo;Required&rdquo;: true,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;Secure&rdquo;: false,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      }<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;IsValueSet&rdquo;: true,<br>
        &ldquo;Override&rdquo;: true,<br>
        &ldquo;Value&rdquo;: &ldquo;/home/qali/vspancha/playbooks/nginx_hosts&rdquo;<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;The path of the host inventory file residing on the Ansible Endpoint target or comma separated list of hosts on which Ansible playbook execution happens.\n&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Host Inventory&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;HostInventory&rdquo;,<br>
      &ldquo;Required&rdquo;: true,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;Secure&rdquo;: false,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      }<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: &quot;&rdquo;<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;SudoPassword&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SudoPassword&rdquo;,<br>
      &ldquo;Required&rdquo;: true,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;Secure&rdquo;: true,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      }<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;IsValueSet&rdquo;: true,<br>
        &ldquo;Override&rdquo;: true,<br>
        &ldquo;Value&rdquo;: &ldquo;&ndash;extra-vars &lsquo;ansible_become_pass={{.global.workflow.input.SudoPassword}}&rsquo;&rdquo;<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;The command line arguments for the execution of the ansible playbook against the given endpoint. \nEscape character backslash(\\) needs to be used when the command line arguments contain double quotes(\&quot;) in them.\n\nBelow command line options are not supported by the Ansible task.\n1. -vvv\n2. -vvvv\n3. -k, -K\n4. -c\n5. &ndash;connection\n6. &ndash;sftp-extra-args\n7. &ndash;scp-extra-args\n8. &ndash;ask-vault-password\n9. &ndash;step\n\nPlease refer the ansible-playbook documentation here\nhttps://docs.ansible.com/ansible/latest/cli/ansible-playbook.html for the list of other supported command line options.\n&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Command Line Arguments&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;CommandLineArguments&rdquo;,<br>
      &ldquo;Required&rdquo;: false,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;Secure&rdquo;: false,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      }<br>
    }<br>
  ],<br>
  &ldquo;InputParameterSet&rdquo;: [],<br>
  &ldquo;Label&rdquo;: &ldquo;Chander-Ansible-UserCase&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;Chander-Ansible-UserCase&rdquo;,<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Properties&rdquo;: {<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkflowProperties&rdquo;,<br>
    &ldquo;Cloneable&rdquo;: true,<br>
    &ldquo;EnableDebug&rdquo;: false,<br>
    &ldquo;ExternalMeta&rdquo;: true,<br>
    &ldquo;Retryable&rdquo;: false,<br>
    &ldquo;RollbackOnFailure&rdquo;: false,<br>
    &ldquo;SupportStatus&rdquo;: &ldquo;Supported&rdquo;<br>
  },<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;InvokeAnsiblePlaybook1&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes Ansible Playbook against the given endpoint. This task can be executed on targets added as Ansible Endpoint in Intersight.\n&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke Ansible Playbook - Install Package&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokeAnsiblePlaybook1&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;AnsibleController&rdquo;: {<br>
          &ldquo;Moid&rdquo;: &ldquo;6172a1be6f72612d31cd4908&rdquo;,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;asset.Target&rdquo;<br>
        },<br>
        &ldquo;CommandLineArguments&rdquo;: &ldquo;${workflow.input.CommandLineArguments}&rdquo;,<br>
        &ldquo;HostInventory&rdquo;: &ldquo;${workflow.input.HostInventory}&rdquo;,<br>
        &ldquo;PlaybookPath&rdquo;: &ldquo;${workflow.input.InstallPackage}&rdquo;<br>
      },<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;InvokeSshCommands2&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;617b9248696f6e2d30c2fc95&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokeAnsiblePlaybook&rdquo;,<br>
      &ldquo;Version&rdquo;: 1<br>
    },<br>
    {<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes SSH commands against the given endpoint. This task can be executed on targets added as SSH Endpoint in Intersight.\n&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke SSH Commands - Ansible Play logs 1&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands2&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;ResponseParser&rdquo;: {<br>
          &ldquo;Parameters&rdquo;: [<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;VersionOnNode1&rdquo;,<br>
              &ldquo;RegexLine&rdquo;: &ldquo;10.106.*?\\\&ldquo;changed\\\&rdquo;:.*?\\\&ldquo;stderr\\\&rdquo;:\\s\\\&quot;$&lt;VersionOnNode1&gt;\\\&rdquo;,&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            },<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;VersionOnNode2&rdquo;,<br>
              &ldquo;RegexLine&rdquo;: &ldquo;10.105.*?\\\&ldquo;changed\\\&rdquo;:.*?\\\&ldquo;stderr\\\&rdquo;:\\s\\\&quot;$&lt;VersionOnNode2&gt;\\\&rdquo;,&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            }<br>
          ]<br>
        },<br>
        &ldquo;ShowCommandOutput&rdquo;: true,<br>
        &ldquo;SshCommand&rdquo;: {<br>
          &ldquo;Command&rdquo;: &ldquo;cat {{.global.InvokeAnsiblePlaybook1.output.ExecutionLogPath}}&rdquo;,<br>
          &ldquo;CommandType&rdquo;: &ldquo;NonInteractiveCmd&rdquo;<br>
        },<br>
        &ldquo;Target&rdquo;: {<br>
          &ldquo;Moid&rdquo;: &ldquo;617664826f72612d31ce8bae&rdquo;,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;asset.Target&rdquo;<br>
        }<br>
      },<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;6172c602696f6e2d30d270a5&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokeSshCommands&rdquo;,<br>
      &ldquo;Version&rdquo;: 1<br>
    }<br>
  ],<br>
  &ldquo;UiInputFilters&rdquo;: [],<br>
  &ldquo;UiRenderingData&rdquo;: {<br>
    &ldquo;Positions&rdquo;: [<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
        &ldquo;X&rdquo;: 263.5,<br>
        &ldquo;Y&rdquo;: 40.5<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 281.33331298828125,<br>
        &ldquo;Y&rdquo;: 398.4323780336132<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 451.833251953125,<br>
        &ldquo;Y&rdquo;: 388.4387670304674<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokeAnsiblePlaybook1&rdquo;,<br>
        &ldquo;X&rdquo;: 178.5,<br>
        &ldquo;Y&rdquo;: 117<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands2&rdquo;,<br>
        &ldquo;X&rdquo;: 176.83331298828125,<br>
        &ldquo;Y&rdquo;: 215.1672194151248<br>
      }<br>
    ]<br>
  },<br>
  &ldquo;Version&rdquo;: 1,<br>
  &ldquo;Catalog&rdquo;: {<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.Catalog&rdquo;,<br>
    &ldquo;Moid&rdquo;: &ldquo;5efbdb7e696f6e2d303fda29&rdquo;,<br>
    &ldquo;link&rdquo;: &ldquo;<a href="https://intersight.com/api/v1/workflow/Catalogs/5efbdb7e696f6e2d303fda29%22">https://intersight.com/api/v1/workflow/Catalogs/5efbdb7e696f6e2d303fda29&quot;</a><br>
  },<br>
  &ldquo;WorkflowMetadata&rdquo;: null<br>
}</p>
<p><span id="_Refd24e14025" class="anchor"></span>Executors – Invoke
Ansible Playbook - Reusable Task</p>
<p>Intersight Cloud Orchestrator allows workflow designers to run Ansible
Playbook on the Ansible Controller node using the <strong>Invoke Ansible
Playbook</strong> reusable task in the workflow.</p>
<p>For more inforormation on Invoke Ansible Playbook - Embedded Task, see
<a href="file://E:%5Chelp%5Cresources%5CExecutor_Ansible">Invoke Ansible Playbook - Embedded
Task</a>.</p>
<p>Supported Targets</p>
<p>The Invoke Ansible Playbook task can be run only on the targets that are
added as an Ansible Endpoint target type in Cisco Intersight.</p>
<p>The <strong>Invoke Ansible Playbook</strong> task is executed as an orchestrator task
and does not include the management of the Ansible Controller node.</p>
<p>To run the Ansible Playbook task on the Ansible Controller node from
Cisco Intersight, ensure that:</p>
<ul>
<li>
<p>The Ansible target is reachable through Intersight Assist when
hosted on the customer premises.</p>
</li>
<li>
<p>The Ansible Playbook modules and Ansible Playbook executables
required to run the playbooks are already installed on the Ansible
Controller node.</p>
</li>
<li>
<p>The Ansible Controller node has password-less SSH access to the
hosts.</p>
</li>
<li>
<p>The Ansible Controller node can resolve the endpoint hostnames if
the Ansible Host Inventory file specifies the hostnames.</p>
</li>
</ul>
<p>For more information on Intersight Target Claim, see <a href="file://E:%5Chelp%5Cgetting_started%5Cclaim_targets">Target Claim Using
Intersight Assist</a>.</p>
<p>Using the Executor Ansible Playook Reusable Task</p>
<p>Use the <strong>Invoke Ansible Playbook</strong> from the <strong>Executors</strong> section in
the Intersight Orchestrator Task Designer UI to create a Invoke Ansible
Playbook reusable task.</p>
<p>For more information on tasks, see <a href="file://E:%5Chelp%5Cresources%5CTask_Designer">Defining a
Task</a>.</p>
<p>The following table explains the Invoke Ansible Playbook task
properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td>For more information, see <a href="file://E:\\help\\resources\\Task_Designer">Defining a Task</a>.</td>
</tr>
<tr class="even">
<td>Inputs</td>
<td><p>Ansible Controller—The target on which the Ansible Playbook task is run. By default, the Ansible Controller task input is created for the task.</p>
<p>The Ansible Playbook target must be in the Connected state.</p></td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><p>To extract the required values from the command responses and map it to task outputs, do the following:</p>
<ol type="1">
<li><p>Create Task Output—Specify the task output.</p></li>
<li><p>Map to Task Output—Check the check box to map the task output to an command response.</p></li>
<li><p>Task Output—Select the command response to which the task output is mapped. The options available are:</p></li>
</ol>
<ul>
<li><p><em>Exit Code | Invoke Ansible Playbook</em></p></li>
<li><p><em>Execution Summary | Invoke Ansible Playbook</em></p></li>
<li><p><em>Execution Log Path | Invoke Ansible Playbook</em></p></li>
</ul>
<p>For example, if you create two task outputs <em>Exitcode</em> and <em>Logapth</em> and map it to <em>Exit Code | Invoke Ansible Playbook</em> and <em>Execution Log Path | Invoke Ansible Playbook</em> respectively, after the workflow is executed, the output will show:</p></td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke Ansible Playbook executor input:</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Playbook Path</td>
<td><p>The path of the Ansible Playbook file that resides on the Ansible Controller node added as Ansible Endpoint target in Intersight.</p>
<ul>
<li><p>Static Value—The path of the Ansible Playbook.</p></li>
<li><p>Direct Mapping—Select an existing task input or task output field.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Host Inventory</td>
<td><p>The path of the host inventory file that resides on the Ansible Controller or a comma-separated list of hosts on which the Ansible Playbook task is run.</p>
<ul>
<li><p>Static Value—The path of the host inventory file that resides on the Ansible Controller or a comma-separated list of hosts.</p></li>
</ul>
<ul>
<li><blockquote>
<p>For example, you can enter the hostname as root@10.10.10.10,</p>
</blockquote></li>
</ul>
<blockquote>
<p><strong>Note:</strong> The hostname must be suffixed with a comma (,).</p>
</blockquote>
<ul>
<li><p>Direct Mapping—Select the path from the task input or task output.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td><p>The command timeout in seconds for the execution of the Ansible Playbook. The range is 10 to 7200 seconds.</p>
<p>The default timeout is 600 seconds.</p>
<ul>
<li><p>Static Value—The command timeout in seconds.</p></li>
<li><p>Direct Mapping—Select the command timeout from the task input or task output.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Command Line Argument</td>
<td><p>The optional command line arguments required to run the Ansible playbook.</p>
<ul>
<li><p>Static Value—The command line argument.</p></li>
<li><p>Direct Mapping—Select the input from the task input or task output.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul>
<p><strong>Note:</strong> For Invoke Ansible Playbook - Reusable Task, escape character backslash(\) is not necessary when the command line arguments contain double quotes(").</p>
<p>The following command line options are not supported by the Ansible Playbook task.</p>
<ul>
<li><p>-vvv</p></li>
<li><p>-vvvv</p></li>
<li><p>-k, -K</p></li>
<li><p>-c</p></li>
<li><p>--connection</p></li>
<li><p>--sftp-extra-args</p></li>
<li><p>--scp-extra-args</p></li>
<li><p>--ask-vault-password</p></li>
<li><p>--step</p></li>
</ul>
<ul>
<li><blockquote>
<p>For information on the available command line arguments, see <a href="https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html">https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html</a>.</p>
</blockquote></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the Ansible Playbook executor Outputs:</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Exit Code</td>
<td>The exit code after the execution of the Ansible Playbook against the given endpoint.</td>
</tr>
<tr class="even">
<td>Execution Summary</td>
<td>The summary after the execution of Ansible Playbook against the given endpoint.</td>
</tr>
<tr class="odd">
<td>Execution Log Path</td>
<td>The Ansible execution log path on the Ansible Control node after the execution of Ansible Playbook against the given endpoint.</td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke Ansible Playbook task Outcomes:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Outcomes</td>
<td><p>To set the custom execution status and status message based on the obtained outputs, do the following:</p>
<ol type="1">
<li><p>Click Add Outcome.</p></li>
<li><p>Name—The name for the outcome.</p></li>
<li><p>Outcome Type—Select the outcome type. The options available are Success, Skip To Success, Error, Terminal Error, Skip Task Execution, or Status.</p></li>
</ol>
<ol start="32" type="1">
<li><p>For more information on Outcomes, see <a href="file://E:\\help\\resources\\Task_Designer">Outcomes</a>.</p></li>
</ol>
<ol start="4" type="1">
<li><p>Message—The message when the condition is met.</p></li>
<li><p>Condition—The condition for the outcome.</p></li>
</ol>
<ol start="33" type="1">
<li><p>For example, {{eq .global.InvokeAnsiblePlaybook1.output.ExitCode "0"}}.</p></li>
<li><p>This condition checks whether the output `ExitCode` of the executor named `InvokeAnsiblePlaybook1` equals to 0. If the condition is true, the task status is set to the value provided in `Outcome Type` and task status message is set to value provided in `Message`.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>Template Parameters</p>
<p>The request body template can refer to values from task inputs, previous
task outputs, or implicit parameters. The following table explains the
template parameters.</p>
<table>
<colgroup>
<col style="width: 67%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.task.input.&lt;ParameterName&gt;}}</td>
<td>Task input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;ExecutorRefName&gt;.output.&lt;ParameterName&gt;}}</td>
<td>Previous executor output reference. <strong>ExecutorRefName</strong> is the name of the previous executor having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<p>Template Functions</p>
<p>The template engine has in-built functions to transform values before
they are populated in the request templates. The following table
explains the functions supported in <strong>Invoke SSH Commands</strong> task.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TrimSpace</td>
<td><p>Returns a string after removing white spaces from a the string.</p>
<p>Example:</p>
<p>{{TrimSpace .global.task.input.HostName}}</p></td>
</tr>
<tr class="even">
<td>ContainsString</td>
<td><p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<p>{{if (ContainsString .global.task.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}</p></td>
</tr>
<tr class="odd">
<td>FindAllString</td>
<td><p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<p>{{(FindAllString .global.task.input.NumberString \”([0-9]+)\”)}}</p>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="even">
<td>ToJson</td>
<td><p>Converts a value to a JSON format.</p>
<p>Example:</p>
<p>{{(FindAllString .global.task.input.NumberString \"([0-9]+)\") | ToJson}}</p>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="odd">
<td>AsArray</td>
<td><p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<p>{{AsArray .global.task.output.serverMo}}</p>
<p>The above example returns an array of one server Mo.</p></td>
</tr>
<tr class="even">
<td>Substring</td>
<td><p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<p>{{Substring .global.task.input.StorageId 2 6}}</p>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p></td>
</tr>
<tr class="odd">
<td>IpToCidr</td>
<td><p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<p>{{IpToCidr .global.task.input.Ip .global.task.input.Netmask}}</p>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p></td>
</tr>
<tr class="even">
<td>LookupInSlice</td>
<td><p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<p>{{LookupInSlice .global.task.input.IpAddressList \”10.10.10.10\”}}</p>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p></td>
</tr>
<tr class="odd">
<td>Index</td>
<td><p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<p>{{ index .global.task.input.nodes .global.task.input.idx }} </p>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p></td>
</tr>
<tr class="even">
<td>Itob</td>
<td><p>Converts an integer to a boolean.</p>
<p>Example:</p>
<p>{{ Itob global.task.input.OnOffFlip }} </p>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p></td>
</tr>
<tr class="odd">
<td>Itoa</td>
<td><p>Converts a given number to a string value.</p>
<p>Example:</p>
<p>{{ Itoa global.task.input.Port }} </p>
<p>The above example returns “12345” for input 12345.</p></td>
</tr>
<tr class="even">
<td>Itof</td>
<td><p>Converts a given integer to a float value.</p>
<p>Example:</p>
<p>{{ Itof global.task.input.Rate }}</p>
<p>The above example returns 15.0 for an input 15.</p></td>
</tr>
<tr class="odd">
<td>Btoa</td>
<td><p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<p>{{ Btoa global.task.input.OnOffFlip }}</p>
<p>The above example returns “true” for input true.</p></td>
</tr>
<tr class="even">
<td>Btoi</td>
<td><p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<p>{{ Btoi global.task.input.OnOffFlip }}</p>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p></td>
</tr>
<tr class="odd">
<td>Atob</td>
<td><p>Converts the given string into a boolean value.</p>
<p>Example:</p>
<p>{{ Atob global.task.input.OnOffFlip }}Returns true for input “true”</p></td>
</tr>
<tr class="even">
<td>Atoi</td>
<td><p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<p>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”</p></td>
</tr>
<tr class="odd">
<td>Ftoa</td>
<td><p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<p>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”</p></td>
</tr>
<tr class="even">
<td>Ftoi</td>
<td><p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<p>{{ Ftoi global.task.input.Rate }}</p>
<p>The above example returns 15 for an input 15.833.</p></td>
</tr>
<tr class="odd">
<td>Eval</td>
<td><p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<p>{{Eval \"{{.global.task.input.Size}} / 1024\" .}}GB</p></td>
</tr>
</tbody>
</table>
<p>Template Engine Syntax</p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>Invoke Ansible Playbook Reusable Task Example</p>
<p><strong>Example: Create a reusable task to run Ansible Playbook on the hosts</strong></p>
<p>This example task runs on an Intersight Ansible Playbook controller. In
this task, the Ansible Playbook path and host inventory list fields are
provided by the task input fields.</p>
<p>The task properties required for this example are as following:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td><ul>
<li><p>Organization—The organization that you are creating the task in.</p></li>
<li><p>Display Name—A user friendly short name to identify the task definition.</p></li>
<li><p>Reference Name—The name of the Task definition.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Inputs</td>
<td><ul>
<li><p>Ansible Controller—By default, the Ansible Controller task input is created for the task.</p>
<ul>
<li><p>Reference Name—AnsibleController</p></li>
<li><p>Type—Target Data Type</p></li>
</ul></li>
<li><p>Playbook Path—The user defined task input for the path of the Ansible Playbook.</p>
<ul>
<li><p>Reference Name—PlaybookPath</p></li>
<li><p>Type—String</p></li>
</ul></li>
<li><p>Host Inventory—The user defined task input for the path of the host inventory file.</p>
<ul>
<li><p>Reference Name—HostInventory</p></li>
<li><p>Type—String</p></li>
</ul></li>
</ul></td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><ul>
<li><p>ExitCode—Task output</p>
<ul>
<li><p>Reference Name—ExitCode</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Exit Code | Invoke Ansible Playbook</em></p></li>
</ul></li>
<li><p>Summary—Task output</p>
<ul>
<li><p>Reference Name—Summary</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Execution Summary | Invoke Ansible Playbook</em></p></li>
</ul></li>
<li><p>Logpath—Task output</p>
<ul>
<li><p>Reference Name—Logpath</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Execution Log Path | Invoke Ansible Playbook</em></p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke Ansible Playbook executor
inputs:</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Playbook Path</td>
<td>Direct Mapping—{{.global.task.input.PlaybookPath}}</td>
</tr>
<tr class="even">
<td>Host Inventory</td>
<td>Direct Mapping—{{.global.task.input.HostInventory}}</td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Command Line Argument</td>
<td><p>Static—-vv</p>
<p>Command line argument --vv is for the Ansible execution log verbosity.</p></td>
</tr>
</tbody>
</table>
<p><span id="_Refd24e15533" class="anchor"></span>Executors – Invoke SSH
Commands - Embedded Task</p>
<p>Intersight Cloud Orchestrator allows workflow designers to run commands
over SSH by using the <strong>Invoke SSH Commands</strong> task in the workflows. The
<strong>Invoke SSH Commands</strong> task is an out-of-box solution that allows you
to automate operations on the SSH targets. This feature allows a
workflow designer to extend the automation capabilities of the workflow
engine beyond what is natively available in the task library and
interact with the SSH target.</p>
<p>The <strong>Invoke SSH Commands</strong> task executes SSH commands against the given
Intersight SSH endpoint target.</p>
<p>Supported Targets</p>
<p>The Invoke SSH Commands task can be run only on the targets that are
added as an SSH or Ansible endpoint target type in Cisco Intersight.</p>
<p>To run the SSH Command task on the SSH endpoint target from Cisco
Intersight, ensure that:</p>
<ul>
<li>
<p>The endpoint is reachable through Intersight Assist.</p>
</li>
<li>
<p>The endpoint target is in the Connected state.</p>
</li>
<li>
<p>The endpoint credentials are valid.</p>
</li>
</ul>
<p>For more information on Intersight Target Claim, see <a href="file://E:%5Chelp%5Cgetting_started%5Cclaim_targets">Target Claim Using
Intersight Assist</a>.</p>
<p>Using the Invoke SSH Commands task</p>
<p>Use the <strong>Invoke SSH Commands</strong> from the <strong>Executors</strong> section in the
Workflow Designer UI to create a task to invoke SSH commands on a
target.</p>
<p>The following table explains the task Input properties:</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><p>The external SSH endpoint target on which the SSH commands task is run.</p>
<p>The SSH target must be in the Connected state.</p>
<p>You can specify the external target as:</p>
<ul>
<li><p>Static Value—Click Select External Target to select an SSH target from the Intersight target inventory.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>SSH Command</td>
<td><p>The SSH commands that need to be executed on the remote server along with the details of command type.</p>
<p>Command— The SSH command string to execute against the given target. You need to specify only the command string.</p>
<p>You can specify multiple commands that need to run on the given target. For more information, see <a href="file://E:\\help\\resources\\Executor_SSH">Using SSH Commands</a> .</p>
<p><strong>Note:</strong> The command chaining is allowed only when the command type is non-interactive.</p>
<ul>
<li><p>Static Value—The SSH commands that are to be run on the remote server.</p>
<ul>
<li><p>Non-Interactive Command—The SSH command that does not require user prompts.</p></li>
<li><p>Interactive Command—The SSH commands that require user prompts. For example, the Sudo or install packages command prompts for the user inputs. To specify the user inputs for the command, do the following:</p>
<ul>
<li><p>Expect —The regular expression of the expect prompt of the interactive command. You must provide the complete regular expression of the Expect string and the expression must end with the special character '$' to match the end of the Expect string.</p></li>
<li><p>Send—The answer string to the expect prompt. You can specify a string value or a workflow input.</p></li>
<li><p>End prompt—The regular expression of the Shell Prompt of the remote server or target. You must provide the complete regular expression of the Shell Prompt and it must end with special character '$' to match the end of the Shell Prompt string.</p></li>
</ul></li>
</ul></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td><p>The command timeout in seconds for the execution of the command against the given endpoint. The range is 10 to 7200 seconds.</p>
<p>The default timeout value is 600 seconds.</p>
<ul>
<li><p>Static Value—The command timeout in seconds for the execution of the command against the given target.</p></li>
<li><p>Direct Mapping——Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Expected Exit Codes</td>
<td><p>The list of expected exit codes for the SSH command that is run by the task. Task status is set to Success if the obtained exit code is present in the list of expected exit codes.</p>
<p>If this input is not specified, then the default exit code is 0 and is used to determine the status of command execution.</p>
<ul>
<li><p>Static Value—The exit code for the SSH command that is run by the task.</p></li>
<li><p>Direct Mapping—Select the expected exit codes from the workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Show Command Output</td>
<td><p>Set this value to True if the entire command response needs to be displayed as part of the task output.</p>
<p>This default value is False.</p>
<ul>
<li><p>Static Value—Select the Show Command Output check box to display the entire command response as a part of the task output.</p></li>
<li><p>Direct Mapping—Select a Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>The response parser specification which is used to extract the values from the command response.</p>
<ul>
<li><p>Static Value</p>
<ul>
<li><p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is '$&lt;Name of the parameter&gt;'. For example, if we need to capture <em>'intersight'</em> in the sample response 'intersight@cisco.com', the regular expression looks like $&lt;Name&gt;\@cisco\.com where '<em>Name</em>' is the name given to this captured parameter.</p></li>
<li><p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$&lt;Name&gt;.</p></li>
<li><p>Type—The response parameter type—String, Integer, Float, or Boolean.</p></li>
</ul>
<ul>
<li><blockquote>
<p>The default value is String.</p>
</blockquote></li>
</ul></li>
<li><p>Direct Mapping—Select a Workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul>
<p>For more information, see <a href="file://E:\\help\\resources\\Executor_SSH">Response Parser</a>.</p></td>
</tr>
</tbody>
</table>
<p>The following table explains the task Output properties:</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Exit Code</td>
<td>The exit code after the execution of the command against the given endpoint.</td>
</tr>
<tr class="even">
<td>Command Output</td>
<td><p>The complete response after the execution of the command against the given endpoint.</p>
<p>The output is displayed only if the task input parameter Show Command Output is set to True.</p></td>
</tr>
<tr class="odd">
<td>Command Execution Error</td>
<td>Captures the error encountered while executing the command.</td>
</tr>
<tr class="even">
<td>Extracted Parameters</td>
<td>The response parser extracted outputs from the command execution response.</td>
</tr>
</tbody>
</table>
<p>Using SSH Commands</p>
<p>You can specify multiple commands that need to run on the given target
by chaining the commands with special characters. The following table
explains the operators.</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Operators</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&amp;&amp; (Logical AND)</td>
<td>The command following this operator will only execute if the command preceding this operator has been successfully executed.</td>
</tr>
<tr class="even">
<td>; (Semi-colon)</td>
<td>The command following this operator will execute even if the command preceding this operator is not successfully executed.</td>
</tr>
<tr class="odd">
<td>|| ( Logical OR)</td>
<td>The command succeeding this operator is only executed if the command preceding it has failed.</td>
</tr>
<tr class="even">
<td>| (Pipe)</td>
<td>The output of the first command acts as input to the second command.</td>
</tr>
<tr class="odd">
<td>! (NOT)</td>
<td>Negates an expression within a command. It is much like an “except” statement.</td>
</tr>
<tr class="even">
<td>&gt;,&gt;&gt;, &lt; (Redirection)</td>
<td>Redirects the output of a command or a group of commands to a file or stream.</td>
</tr>
</tbody>
</table>
<p>Template Parameters</p>
<p>The request body template can refer to values from workflow inputs,
previous task outputs, or implicit parameters. The following table
explains the template parameters.</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.workflow.input.&lt;ParameterName&gt;}}</td>
<td>Workflow input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;TaskRefName&gt;.output.<br />
Parameters.&lt;ParameterName&gt;}}</td>
<td>Previous task output reference. <strong>TaskRefName</strong> is the name of the previous task having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<p>Template Functions</p>
<p>The template engine has in-built functions to transform values before
they are populated in the request templates. The following table
explains the functions supported in <strong>Invoke SSH Command</strong> task.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TrimSpace</td>
<td><p>Returns a string after removing white spaces from a the string.</p>
<p>Example:</p>
<p>{{TrimSpace .global.workflow.input.HostName}}</p></td>
</tr>
<tr class="even">
<td>ContainsString</td>
<td><p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<p>{{if (ContainsString .global.workflow.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}</p></td>
</tr>
<tr class="odd">
<td>FindAllString</td>
<td><p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \”([0-9]+)\”)}}</p>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="even">
<td>ToJson</td>
<td><p>Converts a value to a JSON format.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \"([0-9]+)\") | ToJson}}</p>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="odd">
<td>AsArray</td>
<td><p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<p>{{AsArray .global.workflow.output.serverMo}}</p>
<p>The above example returns an array of one server Mo.</p></td>
</tr>
<tr class="even">
<td>Substring</td>
<td><p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<p>{{Substring .global.workflow.input.StorageId 2 6}}</p>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p></td>
</tr>
<tr class="odd">
<td>IpToCidr</td>
<td><p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<p>{{IpToCidr .global.workflow.input.Ip .global.workflow.input.Netmask}}</p>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p></td>
</tr>
<tr class="even">
<td>LookupInSlice</td>
<td><p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<p>{{LookupInSlice .global.workflow.input.IpAddressList \”10.10.10.10\”}}</p>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p></td>
</tr>
<tr class="odd">
<td>Index</td>
<td><p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<p>{{ index .global.workflow.input.nodes .global.workflow.input.idx }} </p>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p></td>
</tr>
<tr class="even">
<td>Itob</td>
<td><p>Converts an integer to a boolean.</p>
<p>Example:</p>
<p>{{ Itob global.workflow.input.OnOffFlip }} </p>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p></td>
</tr>
<tr class="odd">
<td>Itoa</td>
<td><p>Converts a given number to a string value.</p>
<p>Example:</p>
<p>{{ Itoa global.workflow.input.Port }} </p>
<p>The above example returns “12345” for input 12345.</p></td>
</tr>
<tr class="even">
<td>Itof</td>
<td><p>Converts a given integer to a float value.</p>
<p>Example:</p>
<p>{{ Itof global.workflow.input.Rate }}</p>
<p>The above example returns 15.0 for an input 15.</p></td>
</tr>
<tr class="odd">
<td>Btoa</td>
<td><p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<p>{{ Btoa global.workflow.input.OnOffFlip }}</p>
<p>The above example returns “true” for input true.</p></td>
</tr>
<tr class="even">
<td>Btoi</td>
<td><p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<p>{{ Btoi global.workflow.input.OnOffFlip }}</p>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p></td>
</tr>
<tr class="odd">
<td>Atob</td>
<td><p>Converts the given string into a boolean value.</p>
<p>Example:</p>
<p>{{ Atob global.workflow.input.OnOffFlip }}Returns true for input “true”</p></td>
</tr>
<tr class="even">
<td>Atoi</td>
<td><p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<p>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”</p></td>
</tr>
<tr class="odd">
<td>Ftoa</td>
<td><p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<p>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”</p></td>
</tr>
<tr class="even">
<td>Ftoi</td>
<td><p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<p>{{ Ftoi global.workflow.input.Rate }}</p>
<p>The above example returns 15 for an input 15.833.</p></td>
</tr>
<tr class="odd">
<td>Eval</td>
<td><p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<p>{{Eval \"{{.global.workflow.input.Size}} / 1024\" .}}GB</p></td>
</tr>
</tbody>
</table>
<p>Template Engine Syntax</p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>Response Parser</p>
<p>A response parser is a collection of parameters that model values to be
extracted from the SSH command response.</p>
<p><strong>Example: Create a response parser to get the IP address for a ping
command</strong></p>
<p>To get the IP address for the host such as <em><a href="https://www.example.com">www.example.com</a></em>, you can
use the ping command:</p>
<p>ping example.com -4<br>
Pinging example.com [<strong>93.184.216.34</strong>] with 32 bytes of data:<br>
Reply from 93.184.216.34: bytes=32 time=229ms TTL=53<br>
Reply from 93.184.216.34: bytes=32 time=230ms TTL=53<br>
Reply from 93.184.216.34: bytes=32 time=230ms TTL=53<br>
Reply from 93.184.216.34: bytes=32 time=229ms TTL=53ping example.com</p>
<p>To extract the IP address from the command output for an SSH Command
task, you can configure the response parser as:</p>
<ul>
<li>
<p>Regular Expression—Pinging\s+example.com\s+\[$&lt;IP&gt;\]\s+.*</p>
</li>
<li>
<p>Name—IP</p>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> This name should be the same that is provided in the Regular
Expression field. In the above example, the Regular Expression uses
name $&lt;IP&gt; so the Name specified must be &ldquo;IP&rdquo;.</p>
</blockquote>
<ul>
<li>Type—String</li>
</ul>
<p>SSH Command Task Examples</p>
<p><strong>Example 1: Create a workflow with SSH Command task to install VIM
package on a host using interactive SSH commands</strong></p>
<p>The example below shows the execution of a script to install the vim
package on a host. In this example, the shell prompt
qali@automationvm-15:~$ appears. When the sudo ./vimInstall.sh command
is run, the user is prompted for the sudo password using the prompt
[sudo] password for qali:. The user enters the correct sudo password
(Send/Answer string) and the installation process starts.</p>
<p>qali@automationvm-15:~$ sudo ./vimInstall.sh<br>
[sudo] password for qali:<br>
Reading package lists&hellip; Done<br>
Building dependency tree<br>
Reading state information&hellip; Done<br>
Suggested packages:<br>
ctags vim-doc vim-scripts<br>
The following NEW packages will be installed:<br>
vim<br>
0 upgraded, 1 newly installed, 0 to remove and 224 not upgraded.<br>
Need to get 1238 kB of archives.<br>
After this operation, 3111 kB of additional disk space will be used.<br>
Get:1 http://in.archive.ubuntu.com/ubuntu focal-updates/main amd64 vim amd64 2:8.1.2269-1ubuntu5.3 [1238 kB]<br>
Fetched 1238 kB in 18s (68.8 kB/s)<br>
Selecting previously unselected package vim.<br>
(Reading database &hellip; 296388 files and directories currently installed.)<br>
Preparing to unpack &hellip;/vim_2%3a8.1.2269-1ubuntu5.3_amd64.deb &hellip;<br>
Unpacking vim (2:8.1.2269-1ubuntu5.3) &hellip;<br>
Setting up vim (2:8.1.2269-1ubuntu5.3) &hellip;<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vim (vim) in auto mode<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vimdiff (vimdiff) in auto mode<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rvim (rvim) in auto mode<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rview (rview) in auto mode<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vi (vi) in auto mode<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/view (view) in auto mode<br>
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/ex (ex) in auto mode<br>
qali@automationvm-15:~$</p>
<p>To automate this task, you can create a workflow with a single Executor
Invoke SSH Command task. This task runs on an Intersight SSH Command
endpoint target. In this task, the Sudo password is provided by the
workflow input field, and the VM installation script is available in the
SSH endpoint target.</p>
<p>This workflow input field required for this example is as follows:</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Workflow Input</th>
<th>Input Fields</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sudo Password</td>
<td><ul>
<li><p>Reference Name—SudoPassword</p></li>
<li><p>Type—String</p></li>
<li><p>Secure option is selected. The values of these properties are encrypted and stored in Intersight.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table lists the SSH Command task properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td>The target on which the SSH commands are executed.</td>
</tr>
<tr class="even">
<td>SSH Command</td>
<td><p>Command—sudo ./vimInstall.sh</p>
<ul>
<li><p>Expect—The Expect string obtained while executing the SSH command is [sudo] password for qali:. You need to specify the Expect input as the regular expression of the Obtained prompt \[sudo\]\spassword\sfor\sqali:\s$.</p></li>
<li><p>Send—{{.global.workflow.input.SudoPassword}}</p></li>
<li><p>Shell Prompt—The shell prompt obtained before executing the SSH command is qali@automationvm-15:~$. You need to specify the regular expression of the obtained shell prompt qali\@automationvm-15:~\$\s$</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Expected Exit Codes</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Show Command Output</td>
<td>Select Show Command Option check box.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>When you run the sudo ./vimInstall.sh command, you get the following output:</p>
<p>...<br />
Reading state information... Done<br />
<strong>vim is already the newest version (2:8.1.2269-1ubuntu5.3).</strong><br />
The following package was automatically installed and is no longer required:<br />
libllvm11</p>
<p>To extracts the VM package version and display it, configure the response parser as:</p>
<ul>
<li><p>Regular Expression—vim.*\($&lt;VimPackageVersion&gt;\).</p></li>
<li><p>Name—VimPackageVersion</p></li>
</ul>
<ul>
<li><blockquote>
<p>Type—String</p>
</blockquote></li>
</ul>
<p>The response parser specified above, extracts the VM package version and displays it under the Extracted Parameters task output.</p>
<p>├── Extracted Parameters: [ 1 ]/<br />
│   └── VimPackageVersion:2:8.1.2269-1ubuntu5.3</p></td>
</tr>
</tbody>
</table>
<p>After you execute the workflow, the task output is:</p>
<p>.<br>
├── ConfigResults: [ 1 ]/<br>
│   └── Object: { 3 }/<br>
│       └── ConfigResCtx:{ 1 }/<br>
│           ├── EntityData: { 1 }/<br>
│           │   └── task: workflow.SshTask<br>
│           ├── State: Ok<br>
│           └── Type: Config<br>
├── Command Output:/<br>
│   ├── &hellip;<br>
│         vim is already the newest version (2:8.1.2269-1ubuntu5.3).<br>
│         The following package was automatically installed and is no longer required:<br>
│         libllvm11<br>
│         Use &lsquo;sudo apt autoremove&rsquo; to remove it.<br>
│         0 upgraded, 0 newly installed, 0 to remove and 59 not upgraded.<br>
├── Exit Code: 0<br>
└── Extracted Parameters: { 1 }/<br>
    └── <strong>VimPackageVersion: 2:8.1.2269-1ubuntu5.3</strong><br>
         </p>
<p>The following is a sample code view.</p>
<p>{<br>
  &ldquo;Catalog&rdquo;: {<br>
    &ldquo;Moid&rdquo;: &ldquo;5efbdb7e696f6e2d303fda29&rdquo;,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.Catalog&rdquo;,<br>
    &ldquo;link&rdquo;: &ldquo;<a href="https://intersight.com/api/v1/workflow/Catalogs/5efbdb7e696f6e2d303fda29%22">https://intersight.com/api/v1/workflow/Catalogs/5efbdb7e696f6e2d303fda29&quot;</a><br>
  },<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  &ldquo;InputDefinition&rdquo;: [<br>
    {<br>
      &ldquo;Default&rdquo;: {<br>
        &ldquo;IsValueSet&rdquo;: false,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DefaultValue&rdquo;,<br>
        &ldquo;Override&rdquo;: false,<br>
        &ldquo;Value&rdquo;: null<br>
      },<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;DisplayMeta&rdquo;: {<br>
        &ldquo;InventorySelector&rdquo;: true,<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.DisplayMeta&rdquo;,<br>
        &ldquo;WidgetType&rdquo;: &ldquo;None&rdquo;<br>
      },<br>
      &ldquo;InputParameters&rdquo;: null,<br>
      &ldquo;Label&rdquo;: &ldquo;Sudo Password&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SudoPassword&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataType&rdquo;,<br>
      &ldquo;Properties&rdquo;: {<br>
        &ldquo;Constraints&rdquo;: {<br>
          &ldquo;EnumList&rdquo;: [],<br>
          &ldquo;Max&rdquo;: 0,<br>
          &ldquo;Min&rdquo;: 0,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;workflow.Constraints&rdquo;,<br>
          &ldquo;Regex&rdquo;: &quot;&rdquo;<br>
        },<br>
        &ldquo;InventorySelector&rdquo;: [],<br>
        &ldquo;ObjectType&rdquo;: &ldquo;workflow.PrimitiveDataProperty&rdquo;,<br>
        &ldquo;Secure&rdquo;: true,<br>
        &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
      },<br>
      &ldquo;Required&rdquo;: false<br>
    }<br>
  ],<br>
  &ldquo;InputParameterSet&rdquo;: [],<br>
  &ldquo;Label&rdquo;: &ldquo;SSH-Command-Task-Interactive&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;SSH-Command-Task-Interactive&rdquo;,<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Properties&rdquo;: {<br>
    &ldquo;Cloneable&rdquo;: true,<br>
    &ldquo;EnableDebug&rdquo;: false,<br>
    &ldquo;ExternalMeta&rdquo;: true,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkflowProperties&rdquo;,<br>
    &ldquo;Retryable&rdquo;: false,<br>
    &ldquo;RollbackOnFailure&rdquo;: false,<br>
    &ldquo;SupportStatus&rdquo;: &ldquo;Supported&rdquo;<br>
  },<br>
  &ldquo;Tags&rdquo;: [],<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;InvokeSshCommands1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes SSH commands against the given target. This task can be executed on targets added as SSH Target in Intersight.\n&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;ResponseParser&rdquo;: {<br>
          &ldquo;Parameters&rdquo;: [<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;VimPackageVersion&rdquo;,<br>
              &ldquo;RegexLine&rdquo;: &ldquo;vim.*\\($&lt;VimPackageVersion&gt;\\).&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            }<br>
          ]<br>
        },<br>
        &ldquo;ShowCommandOutput&rdquo;: true,<br>
        &ldquo;SshCommand&rdquo;: {<br>
          &ldquo;Command&rdquo;: &ldquo;sudo ./vimInstall.sh&rdquo;,<br>
          &ldquo;CommandType&rdquo;: &ldquo;InteractiveCmd&rdquo;,<br>
          &ldquo;ExpectPrompts&rdquo;: [<br>
            {<br>
              &ldquo;Expect&rdquo;: &ldquo;\\[sudo\\]\\spassword\\sfor\\sqali:\\s$&rdquo;,<br>
              &ldquo;Send&rdquo;: &ldquo;{{.global.workflow.input.SudoPassword}}&rdquo;<br>
            }<br>
          ],<br>
          &ldquo;ShellPrompt&rdquo;: &ldquo;qali\\@automationvm-15:~\\$\\s$&rdquo;<br>
        },<br>
        &ldquo;Target&rdquo;: {<br>
          &ldquo;Moid&rdquo;: &ldquo;6177bcab6f72612d31fb23f5&rdquo;,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;asset.Target&rdquo;<br>
        }<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke SSH Commands&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;6172c602696f6e2d30d270a5&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokeSshCommands&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 1<br>
    }<br>
  ],<br>
  &ldquo;UiInputFilters&rdquo;: [],<br>
  &ldquo;UiRenderingData&rdquo;: {<br>
    &ldquo;Positions&rdquo;: [<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
        &ldquo;X&rdquo;: 263,<br>
        &ldquo;Y&rdquo;: 35<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 263,<br>
        &ldquo;Y&rdquo;: 194<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 405,<br>
        &ldquo;Y&rdquo;: 194<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands1&rdquo;,<br>
        &ldquo;X&rdquo;: 178,<br>
        &ldquo;Y&rdquo;: 106<br>
      }<br>
    ]<br>
  },<br>
  &ldquo;Version&rdquo;: 1,<br>
  &ldquo;WorkflowMetadata&rdquo;: null<br>
}</p>
<p><strong>Example 2: Create a workflow with SSH Command tasks to list the
folders and files in the current working directory on the host using
output mapping</strong></p>
<p>The following example workflow has two SSH command tasks. The first task
runs the pwd command on the SSH endpoint target and obtains the current
working directory in the output. The second task takes the workflow
output from the previous task and runs the ls -lrt command on the
extracted path on the endpoint target.</p>
<p>The following table lists the properties for the SSH Command Task 1:</p>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td>The target on which the SSH commands are executed.</td>
</tr>
<tr class="even">
<td>SSH Command</td>
<td>Static | Non-interactive | Command—pwd</td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Expected Exit Codes</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Show Command Output</td>
<td>Select Show Command Option check box.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>When you run the pwd command, you get the following output:</p>
<p>$pwd<br />
/home/user</p>
<p>To extracts the path and display it, configure the response parser as:</p>
<ul>
<li><p>Regular Expression—$&lt;Path&gt;</p></li>
<li><p>Name—Path</p></li>
</ul>
<ul>
<li><blockquote>
<p>Type—String</p>
</blockquote></li>
</ul>
<p>The response parser specified above, extracts the path and displays it under the Extracted Parameters task output:</p>
<p>├── Extracted Parameters: [ 1 ]/<br />
│   └── Path:/home/user</p></td>
</tr>
</tbody>
</table>
<p>The following table lists the properties for the SSH Command Task 2:</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td>The target on which the SSH commands are executed.</td>
</tr>
<tr class="even">
<td>SSH Command</td>
<td><p>The output for the first task extracts the path and displays it under the Extracted Parameters task output as:</p>
<p>├── Extracted Parameters: [ 1 ]/<br />
│   └── Path:/home/user</p>
<p>To map the output of the previous task as the input, specify the SSH command as:</p>
<p>Static | Non-interactive | Command—ls -lrt {{.global.InvokeSshCommands1.output.ExtractedParameters.Path}}</p>
<p>In the above example, <em>InvokeSshCommands1</em> is the task reference name of the previous task. To determine the task reference name, navigate to the Code view. For example:</p>
<p>"Tasks": <br />
    ...<br />
   "Label": "Invoke SSH Commands",<br />
      "Name": "InvokeSshCommands1",<br />
      "ObjectType": "workflow.WorkerTask",<br />
...</p></td>
</tr>
<tr class="odd">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Expected Exit Codes</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Show Command Output</td>
<td>Select Show Command Option check box.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>None.</td>
</tr>
</tbody>
</table>
<p>After you execute the workflow, the task output is:</p>
<p>.<br>
├── ConfigResults: [ 1 ]<br>
│   └── Object:{ 3 }<br>
│       ├── ConfigResCtx:{ 1 }<br>
│       │   ├── EntityData:{ 1 }<br>
│       │   └── task:workflow.SshTask<br>
│       ├── State:Ok<br>
│       └── Type:Config<br>
└── Command Output:total 62544<br>
    ├── -rw-rw-r&ndash; 1 qali qali 6549016 Jul 22 2020 intersight_devops_python_sdk_v3_0.0.1.16837.tar.gz<br>
    ├── -rw-r&ndash;r&ndash; 1 qali qali 8980 Apr 5 2021 examples.desktop<br>
    ├── drwxr-xr-x 2 qali qali 4096 Apr 5 2021 Videos<br>
    ├── drwxr-xr-x 2 qali qali 4096 Apr 5 2021 Templates<br>
    ├── drwxr-xr-x 2 qali qali 4096 Apr 5 2021 Public<br>
    ├── drwxr-xr-x 2 qali qali 4096 Apr 5 2021 Pictures<br>
    ├── drwxr-xr-x 2 qali qali 4096 Apr 5 2021 Music<br>
    ├── drwxr-xr-x 2 qali qali 4096 Apr 5 2021 Documents<br>
    ├── &hellip;<br>
    └── Exit Code:0</p>
<p>The following is a sample code view:</p>
<p>{<br>
  &ldquo;Catalog&rdquo;: {<br>
    &ldquo;Moid&rdquo;: &ldquo;5efbdb7e696f6e2d303fda29&rdquo;,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.Catalog&rdquo;,<br>
    &ldquo;link&rdquo;: &ldquo;<a href="https://www.intersight.com/api/v1/workflow/Catalogs/5efbdb7e696f6e2d303fda29%22">https://www.intersight.com/api/v1/workflow/Catalogs/5efbdb7e696f6e2d303fda29&quot;</a><br>
  },<br>
  &ldquo;DefaultVersion&rdquo;: true,<br>
  &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
  &ldquo;InputDefinition&rdquo;: [],<br>
  &ldquo;InputParameterSet&rdquo;: [],<br>
  &ldquo;Label&rdquo;: &ldquo;NonIntMappingSsh&rdquo;,<br>
  &ldquo;Name&rdquo;: &ldquo;NonIntMappingSsh&rdquo;,<br>
  &ldquo;OutputDefinition&rdquo;: [],<br>
  &ldquo;OutputParameters&rdquo;: null,<br>
  &ldquo;Properties&rdquo;: {<br>
    &ldquo;Cloneable&rdquo;: true,<br>
    &ldquo;EnableDebug&rdquo;: false,<br>
    &ldquo;ExternalMeta&rdquo;: true,<br>
    &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkflowProperties&rdquo;,<br>
    &ldquo;Retryable&rdquo;: false,<br>
    &ldquo;RollbackOnFailure&rdquo;: false,<br>
    &ldquo;SupportStatus&rdquo;: &ldquo;Supported&rdquo;<br>
  },<br>
  &ldquo;Tags&rdquo;: [],<br>
  &ldquo;Tasks&rdquo;: [<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
      &ldquo;NextTask&rdquo;: &ldquo;InvokeSshCommands1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.StartTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.SuccessEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Label&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.FailureEndTask&rdquo;<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes SSH commands against the given endpoint. This task can be executed on targets added as SSH Endpoint in Intersight.\n&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;ResponseParser&rdquo;: {<br>
          &ldquo;Parameters&rdquo;: [<br>
            {<br>
              &ldquo;Name&rdquo;: &ldquo;Path&rdquo;,<br>
              &ldquo;RegexLine&rdquo;: &ldquo;$&lt;Path&gt;&rdquo;,<br>
              &ldquo;Type&rdquo;: &ldquo;string&rdquo;<br>
            }<br>
          ]<br>
        },<br>
        &ldquo;ShowCommandOutput&rdquo;: true,<br>
        &ldquo;SshCommand&rdquo;: {<br>
          &ldquo;Command&rdquo;: &ldquo;pwd&rdquo;,<br>
          &ldquo;CommandType&rdquo;: &ldquo;NonInteractiveCmd&rdquo;<br>
        },<br>
        &ldquo;Target&rdquo;: {<br>
          &ldquo;Moid&rdquo;: &ldquo;618a500a6f72612d31586284&rdquo;,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;asset.Target&rdquo;<br>
        }<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke SSH Commands&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands1&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;InvokeSshCommands2&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;6172c602696f6e2d30d270a5&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokeSshCommands&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 1<br>
    },<br>
    {<br>
      &ldquo;CatalogMoid&rdquo;: &ldquo;5c2fc884696f6e2d316c5d59&rdquo;,<br>
      &ldquo;Description&rdquo;: &ldquo;Executes SSH commands against the given endpoint. This task can be executed on targets added as SSH Endpoint in Intersight.\n&rdquo;,<br>
      &ldquo;InputParameters&rdquo;: {<br>
        &ldquo;ShowCommandOutput&rdquo;: true,<br>
        &ldquo;SshCommand&rdquo;: {<br>
          &ldquo;Command&rdquo;: &ldquo;ls -lrt {{.global.InvokeSshCommands1.output.ExtractedParameters.Path}}&rdquo;,<br>
          &ldquo;CommandType&rdquo;: &ldquo;NonInteractiveCmd&rdquo;<br>
        },<br>
        &ldquo;Target&rdquo;: {<br>
          &ldquo;Moid&rdquo;: &ldquo;618a500a6f72612d31586284&rdquo;,<br>
          &ldquo;ObjectType&rdquo;: &ldquo;asset.Target&rdquo;<br>
        }<br>
      },<br>
      &ldquo;Label&rdquo;: &ldquo;Invoke SSH Commands1&rdquo;,<br>
      &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands2&rdquo;,<br>
      &ldquo;ObjectType&rdquo;: &ldquo;workflow.WorkerTask&rdquo;,<br>
      &ldquo;OnFailure&rdquo;: &ldquo;&rdquo;,<br>
      &ldquo;OnSuccess&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
      &ldquo;RollbackDisabled&rdquo;: false,<br>
      &ldquo;TaskDefinitionId&rdquo;: &ldquo;6172c602696f6e2d30d270a5&rdquo;,<br>
      &ldquo;TaskDefinitionName&rdquo;: &ldquo;InvokeSshCommands&rdquo;,<br>
      &ldquo;UseDefault&rdquo;: false,<br>
      &ldquo;Version&rdquo;: 1<br>
    }<br>
  ],<br>
  &ldquo;UiInputFilters&rdquo;: [],<br>
  &ldquo;UiRenderingData&rdquo;: {<br>
    &ldquo;Positions&rdquo;: [<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;StartTask&rdquo;,<br>
        &ldquo;X&rdquo;: 10,<br>
        &ldquo;Y&rdquo;: 18<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;SuccessEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 10,<br>
        &ldquo;Y&rdquo;: 697<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;FailureEndTask&rdquo;,<br>
        &ldquo;X&rdquo;: 152,<br>
        &ldquo;Y&rdquo;: 697<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands1&rdquo;,<br>
        &ldquo;X&rdquo;: 178.5,<br>
        &ldquo;Y&rdquo;: 105.7421875<br>
      },<br>
      {<br>
        &ldquo;Name&rdquo;: &ldquo;InvokeSshCommands2&rdquo;,<br>
        &ldquo;X&rdquo;: 178.25390625,<br>
        &ldquo;Y&rdquo;: 204.75390625<br>
      }<br>
    ]<br>
  },<br>
  &ldquo;Version&rdquo;: 1,<br>
  &ldquo;WorkflowMetadata&rdquo;: null<br>
}</p>
<p><span id="_Refd24e17342" class="anchor"></span>Executors – Invoke SSH
Commands - Reusable Task</p>
<p>Intersight Cloud Orchestrator allows workflow designers to run commands
over SSH by using the <strong>Invoke SSH Commands</strong> reusable task in the
workflows.</p>
<p>The <strong>Invoke SSH Commands</strong> task executes SSH commands against the given
Intersight SSH endpoint target.</p>
<p>Supported Targets</p>
<p>The Invoke SSH Commands task can be run only on the targets that are
added as an SSH or Ansible endpoint target type in Cisco Intersight.</p>
<p>To run the SSH Command task on the SSH or Ansible endpoint target from
Cisco Intersight, ensure that:</p>
<ul>
<li>
<p>The endpoint is reachable through Intersight Assist.</p>
</li>
<li>
<p>The endpoint target is in the Connected state.</p>
</li>
<li>
<p>The endpoint credentials are valid.</p>
</li>
</ul>
<p>For more information on Intersight Target Claim, see <a href="file://E:%5Chelp%5Cgetting_started%5Cclaim_targets">Target Claim Using
Intersight Assist</a>.</p>
<p>Using the Executor SSH Commands Reusable Task</p>
<p>Use the <strong>Invoke SSH Commands</strong> from the <strong>Executors</strong> section in the
Intersight Orchestrator Task Designer UI to create a Invoke SSH Commands
reusable task.</p>
<p>For more information on tasks, see <a href="file://E:%5Chelp%5Cresources%5CTask_Designer">Defining a
Task</a>.</p>
<p>The following table explains the Invoke SSH Commands task properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td>For more information, see <a href="file://E:\\help\\resources\\Task_Designer">Defining a Task</a>.</td>
</tr>
<tr class="even">
<td>Inputs</td>
<td><p>External Target—The external target on which the SSH commands are run. By default, the External Target task input is created for the task.</p>
<p>The SSH commands can be run only on targets added as SSH or Ansible endpoint target in Intersight and are in the connected state.</p></td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><p>To extract the required values from the command responses and map it to task outputs, do the following:</p>
<ol type="1">
<li><p>Create Task Output—Specify the task output.</p></li>
<li><p>Map to Task Output—Check the check box to map the task output to an command response.</p></li>
<li><p>Task Output—Select the command response to which the task output is mapped. The options available are:</p></li>
</ol>
<ul>
<li><p><em>Exit Code | Invoke SSH Commands</em></p></li>
<li><p><em>Command Output | Invoke SSH Commands</em></p></li>
<li><p><em>Command Execution Error| Invoke SSH Commands</em></p></li>
<li><p><em>Extracted Parameters | Invoke SSH Commands</em></p></li>
</ul>
<ol start="35" type="1">
<li><p>For more information on task outputs, see Executor Output properties.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke SSH Commands executor input:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SSH Command</td>
<td><p>The SSH commands that need to be executed on the remote server along with the details of command type.</p>
<p>Command— The SSH command string to execute against the given target. You need to specify only the command string.</p>
<p>You can specify multiple commands that need to run on the given target. For more information, see <a href="file://E:\\help\\resources\\Executor_SSH">Using SSH Commands</a>.</p>
<p><strong>Note:</strong> The command chaining is allowed only when the command type is non-interactive.</p>
<ul>
<li><p>Static Value—The SSH commands that are to be run on the remote server.</p>
<ul>
<li><p>Non-Interactive Command—The SSH command that does not require user prompts.</p></li>
<li><p>Interactive Command—The SSH commands that require user prompts. For example, the Sudo or install packages command prompts for the user inputs. To specify the user inputs for the command, do the following:</p>
<ul>
<li><p>Expect —The regular expression of the expect prompt of the interactive command. You must provide the complete regular expression of the Expect string and the expression must end with the special character '$' to match the end of the Expect string.</p></li>
<li><p>Send—The answer string to the expect prompt. You can specify a string value.</p></li>
<li><p>End prompt—The regular expression of the Shell Prompt of the remote server or target. You must provide the complete regular expression of the Shell Prompt and it must end with special character '$' to match the end of the Shell Prompt string.</p></li>
</ul></li>
</ul></li>
<li><p>Direct Mapping—Select an existing task input or task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>You can map only a custom data type of type SSH Command.</p>
</blockquote></li>
</ul>
<blockquote>
<p><strong>Note:</strong> Direct mapping of task input or output of string data type is not valid.</p>
</blockquote>
<ul>
<li><p>Advanced Mapping—You can use Go template expressions for advance use cases where data manipulation is required.</p></li>
</ul>
<ul>
<li><blockquote>
<p>For example, to use substring of the task input StringInput in the SSH command, the advanced mapping can be:</p>
</blockquote></li>
<li><blockquote>
<p>{Command: "{{Substring .global.task.input.StringInput 5 15}}", <br />
CommandType: "NonInteractiveCmd"}</p>
</blockquote></li>
<li><blockquote>
<p>The <em>CommandType</em> can be `NonInteractiveCmd` and `InteractiveCmd`.</p>
</blockquote></li>
<li><blockquote>
<p>Following is an example for the 'InteractiveCmd':</p>
</blockquote></li>
<li><blockquote>
<p>{<br />
"Command": "{{Substring .global.task.input.StringInput 5 15}}",<br />
"CommandType": "InteractiveCmd",<br />
"ExpectPrompts": [<br />
{<br />
"Expect": "Password:\\s+$",<br />
"Send": "dummyValue"<br />
}<br />
],<br />
"ShellPrompt": "\\[root\\@onprem-appliance\\]\\s+$"<br />
}</p>
</blockquote></li>
<li><blockquote>
<p>For more information on template functions, see <a href="file://E:\\help\\resources\\Executor_SSH_Reusable">Template Functions</a>.</p>
</blockquote></li>
</ul></td>
</tr>
<tr class="even">
<td>Command Timeout</td>
<td><p>The command timeout in seconds for the execution of the command against the given endpoint. The range is 10 to 7200 seconds.</p>
<p>The default timeout value is 600 seconds.</p>
<ul>
<li><p>Static Value—The command timeout in seconds for the execution of the command against the given target.</p></li>
<li><p>Direct Mapping——Select an existing task input or task output field.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Expected Exit Codes</td>
<td><p>The list of expected exit codes for the SSH command that is run by the task. Task status is set to Success if the obtained exit code is present in the list of expected exit codes.</p>
<p>If this input is not specified, then the default exit code is 0 and is used to determine the status of command execution.</p>
<ul>
<li><p>Static Value—The exit code for the SSH command that is run by the task.</p></li>
<li><p>Direct Mapping—Select the expected exit codes from the task input or task output.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>The response parser specification which is used to extract the values from the command response.</p>
<ul>
<li><p>Static Value</p>
<ul>
<li><p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is '$&lt;Name of the parameter&gt;'. For example, if we need to capture <em>'intersight'</em> in the sample response 'intersight@cisco.com', the regular expression looks like $&lt;Name&gt;\@cisco\.com where '<em>Name</em>' is the name given to this captured parameter.</p></li>
<li><p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$&lt;Name&gt;.</p></li>
<li><p>Type—The response parameter type—String, Integer, Float, or Boolean.</p></li>
</ul>
<ul>
<li><blockquote>
<p>The default value is String.</p>
</blockquote></li>
</ul></li>
<li><p>Direct Mapping—Select a task input or task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul>
<p>For more information, see <a href="file://E:\\help\\resources\\Executor_SSH">Response Parser</a>.</p></td>
</tr>
</tbody>
</table>
<p>The following table explains the SSH Command executor Outputs :</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Exit Code</td>
<td>The exit code after the execution of the command against the given endpoint.</td>
</tr>
<tr class="even">
<td>Command Output</td>
<td>The complete response after the execution of the command against the given endpoint.</td>
</tr>
<tr class="odd">
<td>Command Execution Error</td>
<td>Captures the error encountered while executing the command.</td>
</tr>
<tr class="even">
<td>Extracted Parameters</td>
<td>The response parser extracted outputs from the command execution response.</td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke SSH Commands task Outcomes:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Outcomes</td>
<td><p>To set the custom execution status and status message based on the obtained outputs, do the following:</p>
<ol type="1">
<li><p>Click Add Outcome.</p></li>
<li><p>Name—The name for the outcome.</p></li>
<li><p>Outcome Type—Select the outcome type. The options available are Success, Skip To Success, Error, Terminal Error, Skip Task Execution, or Status.</p></li>
</ol>
<ol start="36" type="1">
<li><p>For more information on Outcomes, see <a href="file://E:\\help\\resources\\Task_Designer">Outcomes</a>.</p></li>
</ol>
<ol start="4" type="1">
<li><p>Message—The message when the condition is met.</p></li>
<li><p>Condition—The condition for the outcome.</p></li>
</ol>
<ol start="37" type="1">
<li><p>For example, {{eq .global.InvokeSshCommands1.output.ExitCode "0"}}.</p></li>
<li><p>This condition checks whether the output `ExitCode` of the executor named `InvokeSshCommands1` equals to 0. If the condition is true, the task status is set to the value provided in `Outcome Type` and task status message is set to value provided in `Message`.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>Using SSH Commands</p>
<p>You can specify multiple commands that need to run on the given target
by chaining the commands with special characters. The following table
explains the operators.</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Operators</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&amp;&amp; (Logical AND)</td>
<td>The command following this operator will only execute if the command preceding this operator has been successfully executed.</td>
</tr>
<tr class="even">
<td>; (Semi-colon)</td>
<td>The command following this operator will execute even if the command preceding this operator is not successfully executed.</td>
</tr>
<tr class="odd">
<td>|| ( Logical OR)</td>
<td>The command succeeding this operator is only executed if the command preceding it has failed.</td>
</tr>
<tr class="even">
<td>| (Pipe)</td>
<td>The output of the first command acts as input to the second command.</td>
</tr>
<tr class="odd">
<td>! (NOT)</td>
<td>Negates an expression within a command. It is much like an “except” statement.</td>
</tr>
<tr class="even">
<td>&gt;,&gt;&gt;, &lt; (Redirection)</td>
<td>Redirects the output of a command or a group of commands to a file or stream.</td>
</tr>
</tbody>
</table>
<p>Template Parameters</p>
<p>The request body template can refer to values from task inputs, previous
task outputs, or implicit parameters. The following table explains the
template parameters.</p>
<table>
<colgroup>
<col style="width: 67%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.task.input.&lt;ParameterName&gt;}}</td>
<td>Task input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;ExecutorRefName&gt;.output.&lt;ParameterName&gt;}}</td>
<td>Previous executor output reference. <strong>ExecutorRefName</strong> is the name of the previous executor having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<p>Template Functions</p>
<p>The template engine has in-built functions to transform values before
they are populated in the request templates. The following table
explains the functions supported in <strong>Invoke SSH Commands</strong> task.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TrimSpace</td>
<td><p>Returns a string after removing white spaces from a the string.</p>
<p>Example:</p>
<p>{{TrimSpace .global.task.input.HostName}}</p></td>
</tr>
<tr class="even">
<td>ContainsString</td>
<td><p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<p>{{if (ContainsString .global.task.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}</p></td>
</tr>
<tr class="odd">
<td>FindAllString</td>
<td><p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<p>{{(FindAllString .global.task.input.NumberString \”([0-9]+)\”)}}</p>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="even">
<td>ToJson</td>
<td><p>Converts a value to a JSON format.</p>
<p>Example:</p>
<p>{{(FindAllString .global.task.input.NumberString \"([0-9]+)\") | ToJson}}</p>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="odd">
<td>AsArray</td>
<td><p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<p>{{AsArray .global.task.output.serverMo}}</p>
<p>The above example returns an array of one server Mo.</p></td>
</tr>
<tr class="even">
<td>Substring</td>
<td><p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<p>{{Substring .global.task.input.StorageId 2 6}}</p>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p></td>
</tr>
<tr class="odd">
<td>IpToCidr</td>
<td><p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<p>{{IpToCidr .global.task.input.Ip .global.task.input.Netmask}}</p>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p></td>
</tr>
<tr class="even">
<td>LookupInSlice</td>
<td><p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<p>{{LookupInSlice .global.task.input.IpAddressList \”10.10.10.10\”}}</p>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p></td>
</tr>
<tr class="odd">
<td>Index</td>
<td><p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<p>{{ index .global.task.input.nodes .global.task.input.idx }} </p>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p></td>
</tr>
<tr class="even">
<td>Itob</td>
<td><p>Converts an integer to a boolean.</p>
<p>Example:</p>
<p>{{ Itob global.task.input.OnOffFlip }} </p>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p></td>
</tr>
<tr class="odd">
<td>Itoa</td>
<td><p>Converts a given number to a string value.</p>
<p>Example:</p>
<p>{{ Itoa global.task.input.Port }} </p>
<p>The above example returns “12345” for input 12345.</p></td>
</tr>
<tr class="even">
<td>Itof</td>
<td><p>Converts a given integer to a float value.</p>
<p>Example:</p>
<p>{{ Itof global.task.input.Rate }}</p>
<p>The above example returns 15.0 for an input 15.</p></td>
</tr>
<tr class="odd">
<td>Btoa</td>
<td><p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<p>{{ Btoa global.task.input.OnOffFlip }}</p>
<p>The above example returns “true” for input true.</p></td>
</tr>
<tr class="even">
<td>Btoi</td>
<td><p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<p>{{ Btoi global.task.input.OnOffFlip }}</p>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p></td>
</tr>
<tr class="odd">
<td>Atob</td>
<td><p>Converts the given string into a boolean value.</p>
<p>Example:</p>
<p>{{ Atob global.task.input.OnOffFlip }}Returns true for input “true”</p></td>
</tr>
<tr class="even">
<td>Atoi</td>
<td><p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<p>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”</p></td>
</tr>
<tr class="odd">
<td>Ftoa</td>
<td><p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<p>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”</p></td>
</tr>
<tr class="even">
<td>Ftoi</td>
<td><p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<p>{{ Ftoi global.task.input.Rate }}</p>
<p>The above example returns 15 for an input 15.833.</p></td>
</tr>
<tr class="odd">
<td>Eval</td>
<td><p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<p>{{Eval \"{{.global.task.input.Size}} / 1024\" .}}GB</p></td>
</tr>
</tbody>
</table>
<p>Template Engine Syntax</p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>Response Parser</p>
<p>A response parser is a collection of parameters that model values to be
extracted from the SSH command response.</p>
<p><strong>Example: Create a response parser to get the IP address for a ping
command</strong></p>
<p>To get the IP address for the host such as <em><a href="https://www.example.com">www.example.com</a></em>, you can
use the ping command:</p>
<p>ping example.com -4<br>
Pinging example.com [<strong>93.184.216.34</strong>] with 32 bytes of data:<br>
Reply from 93.184.216.34: bytes=32 time=229ms TTL=53<br>
Reply from 93.184.216.34: bytes=32 time=230ms TTL=53<br>
Reply from 93.184.216.34: bytes=32 time=230ms TTL=53<br>
Reply from 93.184.216.34: bytes=32 time=229ms TTL=53ping example.com</p>
<p>To extract the IP address from the command output for an SSH Command
task, you can configure the response parser as:</p>
<ul>
<li>
<p>Regular Expression—Pinging\s+example.com\s+\[$&lt;IP&gt;\]\s+.*</p>
</li>
<li>
<p>Name—IP</p>
</li>
</ul>
<blockquote>
<p><strong>Note:</strong> This name should be the same that is provided in the Regular
Expression field. In the above example, the Regular Expression uses
name $&lt;IP&gt; so the Name specified must be &ldquo;IP&rdquo;.</p>
</blockquote>
<ul>
<li>Type—String</li>
</ul>
<p>Invoke SSH Command Reusable Task Examples</p>
<p><strong>Example 1: Create a reusable SSH Command task to list the current
working directory on the host</strong></p>
<p>This example task runs on an Intersight SSH endpoint target. This task
runs the <em>pwd</em> command on the SSH endpoint target and obtains the
current working directory in the output.</p>
<p>The task properties required for this example are as following:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td><ul>
<li><p>Organization—The organization that you are creating the task in.</p></li>
<li><p>Display Name—A user friendly short name to identify the task definition.</p></li>
<li><p>Reference Name—The name of the Task definition.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Inputs</td>
<td><ul>
<li><p>External Target—By default, the External Target task input is created for the task.</p>
<ul>
<li><p>Reference Name—Target</p></li>
<li><p>Type—Target Data Type</p></li>
</ul></li>
</ul></td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><ul>
<li><p>ExitCode—Task output</p>
<ul>
<li><p>Reference Name—ExitCode</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Exit Code | Invoke SSH Command</em></p></li>
</ul></li>
<li><p>Response—Task output</p>
<ul>
<li><p>Reference Name—Response</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Command Output| Invoke SSH Command</em></p></li>
</ul></li>
<li><p>Lastline—Task output</p>
<ul>
<li><p>Reference Name—Response</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Extracted Parameters | Invoke SSH Command</em> - <em>WorkingDirectory</em></p></li>
</ul></li>
<li><p>Error—Task output</p>
<ul>
<li><p>Reference Name—Error</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Extracted Parameters | Invoke SSH Command</em> - <em>CommandExecutionError</em></p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke SSH Command executor inputs:</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SSH Command</td>
<td>Static | Non-interactive—Command—pwd</td>
</tr>
<tr class="even">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Expected Exit Codes</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>When you run the pwd command, you get the following output:</p>
<p>$pwd<br />
/home/user</p>
<p>To extracts the path and display it, configure the response parser as:</p>
<ul>
<li><p>Regular Expression—$&lt;WorkingDirectory&gt;</p></li>
<li><p>Name—WorkingDirectory</p></li>
<li><p>Type—String</p></li>
</ul>
<p>The configured response parser captures the entire response line.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example 2: Create a reusable SSH Command task to install jq Linux
command line utility on a host using interactive SSH commands</strong></p>
<p>This example task runs on an Intersight SSH endpoint target. In this
task, the <em>Sudo</em> password is provided by the command input field, and jq
Linux command line utility is installed on the SSH endpoint target.</p>
<p>The task properties required for this example are as following:</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td><ul>
<li><p>Organization—The organization that you are creating the task in.</p></li>
<li><p>Display Name—A user friendly short name to identify the task definition.</p></li>
<li><p>Reference Name—The name of the Task definition.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Inputs</td>
<td><ul>
<li><p>External Target—By default, the External Target task input is created for the task.</p>
<ul>
<li><p>Reference Name—Target</p></li>
<li><p>Type—Target Data Type</p></li>
</ul></li>
</ul></td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><ul>
<li><p>ExitCode—Task output</p>
<ul>
<li><p>Reference Name—ExitCode</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Exit Code | Invoke SSH Command</em></p></li>
</ul></li>
<li><p>Response—Task output</p>
<ul>
<li><p>Reference Name—Response</p></li>
<li><p>Type—String</p></li>
<li><p>Map to Task Output—<em>Command Output| Invoke SSH Command</em></p></li>
</ul></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the Invoke SSH Command executor inputs:</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SSH Command</td>
<td><p>Static | Interactive—Command—<em>sudo yum install -y jq</em> | Interactive</p>
<ul>
<li><p>Expect—The Expect string obtained while executing the SSH command is <em>[sudo]</em> password for <em>qali:</em>. You need to specify the Expect input as the regular expression of the Obtained prompt <em>\[sudo\]\spassword\sfor\sqali:\s$</em>.</p></li>
<li><p>Send—<em>testPasswd</em>.</p></li>
<li><p>Shell Prompt—The shell prompt obtained before executing the SSH command is <em>qali@automationvm-15:~$</em>. You need to specify the regular expression of the obtained shell prompt <em>qali\@automationvm-15:~\$\s?$</em>.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Command Timeout</td>
<td>Default value.</td>
</tr>
<tr class="odd">
<td>Expected Exit Codes</td>
<td>Default value.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>Default value.</td>
</tr>
</tbody>
</table>
<p><span id="_Refd24e19406" class="anchor"></span>Executors – Invoke Web
API Request</p>
<p>Intersight Orchestrator allows workflow designers to perform web API
requests by using the <strong>Invoke Web API Request</strong> task in workflows. The
<strong>Web API Request</strong> task allows executing web API requests on external
targets not managed by Intersight or on the Intersight API endpoints.</p>
<p>Intersight Orchestrator framework provides predefined reusable tasks
that form the basis of workflows to automate customer operations. In
some scenarios, predefined tasks are not enough to automate customer
operations:</p>
<ul>
<li>
<p>New parameters are added to the device specific API to enhance the
existing functionality or the device exposes new functionality which
is not available in the task library.</p>
</li>
<li>
<p>To orchestrate the device operations for devices that are not
currently managed by Intersight.</p>
</li>
</ul>
<p>The <strong>Web API Request</strong> task is an out-of-box solution that allows you
to automate operations on the endpoints by invoking web APIs via HTTP or
HTTPS. This feature allows a workflow designer to extend the automation
capabilities of the workflow engine beyond what is natively available in
the task library and interact with any HTTP or HTTPS endpoint.</p>
<p>Supported Endpoints</p>
<p>Natively supported Intersight targets on which a Web API Task is tested
and verified are Cisco UCS Director, Pure Storage Flash Array, NetApp
Active Iq Unified Manager, Hitachi Virtual Storage Platform, VMware
vCenter Server, Terraform Cloud, and Cisco Application Policy
Infrastructure Controller (APIC).</p>
<p><strong>Note:</strong> The Web API task is supported on Cisco UCS Director 6.8.3.0 or
later.</p>
<p>The Web API task can also be executed on any HTTP(S) endpoint, which is
added as HTTP Endpoint target type in Intersight Targets, provided the
endpoint is reachable either directly from Intersight or via Intersight
Assist when hosted on customer premises.</p>
<p>HTTP Endpoints</p>
<p>The Invoke Web API Request task allows sending HTTP(S) requests to HTTP
Endpoint. HTTP Endpoint is an external entity that can be configured
under Intersight Targets and can be accessed in Intersight Orchestrator
workflows through the APIs exposed by the endpoint. HTTP Endpoint must
be accessed via Intersight Assist if the endpoint resides in customer
premises. This can be facilitated by associating the Intersight Assist
input while claiming the HTTP Endpoint target. The target entities that
are directly reachable from the Intersight Cloud do not need Intersight
Assist.</p>
<p>Endpoints that support the following HTTP Authentication schemes can be
added as Targets:</p>
<ul>
<li>
<p>Basic HTTP Authentication–Requires username and password to
authenticate the endpoint.</p>
</li>
<li>
<p>Bearer Token Authentication–Requires token to authenticate the
endpoint.</p>
</li>
</ul>
<p><strong>Note:</strong> Bearer Token Authentication requires a valid access token to
invoke the endpoint API. You should refresh the access token if it is
expired and update the HTTP Endpoint target with the refreshed token.</p>
<p>You can also add HTTP Endpoint target without authentication. This is to
facilitate invoking HTTP(S) API on the endpoints that do not require any
authentication or on the endpoint that requires an authentication method
that is not natively supported. In the later scenario, you should
provide the authentication parameters in the required format in the web
API task. The Invoke Nexus device API to authenticate using aaaLogin in
the web API examples illustrate invoking web API task on Nexus switch
that requires aaaLogin authentication mechanism.</p>
<p>External targets not connected to Intersight can be modeled as HTTP
Endpoint objects as follows:</p>
<ul>
<li>
<p>Capture all the required information to connect to and authenticate
the target. For example, to invoke HTTP or HTTPS web APIs on the
target using the Invoke Web API Request, HTTP Endpoint must have IP
address, port number, and the authentication parameters to connect
to the endpoint.</p>
</li>
<li>
<p>Supports a single HTTP connection parameter set per Target and
Target name is mandatory. HTTP Endpoint with different name having
the same IP address or hostname cannot be created.</p>
</li>
</ul>
<p>Using the Invoke Web API Request</p>
<p>Use the <strong>Invoke Web API Request Task</strong> from <strong>Executors</strong> section in
the Intersight Orchestrator UI to create a request for a target. The
target can be Intersight API or an external endpoint added as HTTP
Endpoint in the Intersight Targets. The following table explains the
input properties.</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td>Maps a HTTP Endpoint. An external target not selected indicates that the request will be considered as an Intersight API request.</td>
</tr>
<tr class="even">
<td>Method</td>
<td>Standard HTTP method requested for the specified URL.</td>
</tr>
<tr class="odd">
<td>URL</td>
<td>Relative URL of the RestAPI endpoint without hostname and port details. For external targets, this field points to the relative URL path of the RestAPI endpoint. If an external target is empty, this field points to the relative path of the Intersight API endpoint.</td>
</tr>
<tr class="even">
<td>Headers</td>
<td>Request headers that are sent in the key value pairs. The values should be array of type string.</td>
</tr>
<tr class="odd">
<td>Cookies</td>
<td>The key value pairs provided in this input are sent in HTTP 'Cookie' header. The values should be array of type string.</td>
</tr>
<tr class="even">
<td>Content Type</td>
<td>Response content type. Currently supports JSON.</td>
</tr>
<tr class="odd">
<td>Body</td>
<td>(Optional) The request body includes two values: The content type of the request body—JSON or Text and the actual request body. The request body is a template if a workflow input or previous task output values are referred in the request body.</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>Structure of the response parser providing a list of values to be extracted from the API response.</td>
</tr>
<tr class="odd">
<td>Outcomes</td>
<td>(Optional) Allows to define the custom API execution status and/or custom execution message based on the task outputs.</td>
</tr>
</tbody>
</table>
<p>Template Parameters</p>
<p>The request body template can refer to values from workflow inputs,
previous task outputs, or implicit parameters for Intersight API calls.
The following table explains the template parameters.</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.workflow.input.&lt;ParameterName&gt;}}</td>
<td>Workflow input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;TaskRefName&gt;.output.<br />
Parameters.&lt;ParameterName&gt;}}</td>
<td>Previous task output reference. <strong>TaskRefName</strong> is the name of the previous task having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<p>Template Functions</p>
<p>The template engine has in-built functions to transform values before
they are populated in the request templates. The following table
explains the functions supported in <strong>Invoke Web API Request</strong> task.</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TrimSpace</td>
<td><p>Returns a string after removing whitespaces from a the string.</p>
<p>Example:</p>
<p>{{TrimSpace .global.workflow.input.HostName}}</p></td>
</tr>
<tr class="even">
<td>ContainsString</td>
<td><p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<p>{{if (ContainsString .global.workflow.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}</p></td>
</tr>
<tr class="odd">
<td>FindAllString</td>
<td><p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \”([0-9]+)\”)}}</p>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="even">
<td>ToJson</td>
<td><p>Converts a value to a JSON format.</p>
<p>Example:</p>
<p>{{(FindAllString .global.workflow.input.NumberString \"([0-9]+)\") | ToJson}}</p>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p></td>
</tr>
<tr class="odd">
<td>AsArray</td>
<td><p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<p>{{AsArray .global.workflow.output.serverMo}}</p>
<p>The above example returns an array of one server Mo.</p></td>
</tr>
<tr class="even">
<td>Substring</td>
<td><p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<p>{{Substring .global.workflow.input.StorageId 2 6}}</p>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p></td>
</tr>
<tr class="odd">
<td>IpToCidr</td>
<td><p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<p>{{IpToCidr .global.workflow.input.Ip .global.workflow.input.Netmask}}</p>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p></td>
</tr>
<tr class="even">
<td>LookupInSlice</td>
<td><p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<p>{{LookupInSlice .global.workflow.input.IpAddressList \”10.10.10.10\”}}</p>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p></td>
</tr>
<tr class="odd">
<td>Index</td>
<td><p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<p>{{ index .global.workflow.input.nodes .global.workflow.input.idx }} </p>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p></td>
</tr>
<tr class="even">
<td>Itob</td>
<td><p>Converts an integer to a boolean.</p>
<p>Example:</p>
<p>{{ Itob global.workflow.input.OnOffFlip }} </p>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p></td>
</tr>
<tr class="odd">
<td>Itoa</td>
<td><p>Converts a given number to a string value.</p>
<p>Example:</p>
<p>{{ Itoa global.workflow.input.Port }} </p>
<p>The above example returns “12345” for input 12345.</p></td>
</tr>
<tr class="even">
<td>Itof</td>
<td><p>Converts a given integer to a float value.</p>
<p>Example:</p>
<p>{{ Itof global.workflow.input.Rate }}</p>
<p>The above example returns 15.0 for an input 15.</p></td>
</tr>
<tr class="odd">
<td>Btoa</td>
<td><p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<p>{{ Btoa global.workflow.input.OnOffFlip }}</p>
<p>The above example returns “true” for input true.</p></td>
</tr>
<tr class="even">
<td>Btoi</td>
<td><p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<p>{{ Btoi global.workflow.input.OnOffFlip }}</p>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p></td>
</tr>
<tr class="odd">
<td>Atob</td>
<td><p>Converts the given string into a Boolean value.</p>
<p>Example:</p>
<p>{{ Atob global.workflow.input.OnOffFlip }}Returns true for input “true”</p></td>
</tr>
<tr class="even">
<td>Atoi</td>
<td><p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<p>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”</p></td>
</tr>
<tr class="odd">
<td>Ftoa</td>
<td><p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<p>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”</p></td>
</tr>
<tr class="even">
<td>Ftoi</td>
<td><p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<p>{{ Ftoi global.workflow.input.Rate }}</p>
<p>The above example returns 15 for an input 15.833.</p></td>
</tr>
<tr class="odd">
<td>Eval</td>
<td><p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<p>{{Eval \"{{.global.workflow.input.Size}} / 1024\" .}}GB</p></td>
</tr>
</tbody>
</table>
<p>Template Engine Syntax</p>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<p>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</p>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}</p>
<p>{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}</p>
<p>Response Parser</p>
<p>A response parser allows extracting values from API responses. A
response parser is a collection of parameters that model values to be
extracted from the API response. Each parameter needs to specify the
following values:</p>
<ul>
<li>
<p><strong>Path</strong>—Content specific path reference pointing to the location
where the value is present in the response. Currently, JSON is
supported. The path is JSONPath.</p>
</li>
<li>
<p><strong>Name</strong>—Unique name in the response parser to identify and extract
a specific value.</p>
</li>
<li>
<p><strong>Type</strong>—Type of the value extracted from the response.</p>
</li>
</ul>
<p><strong>Note:</strong> The values extracted using the response parser are populated
in the task output parameters.</p>
<p>Outcomes</p>
<p>An outcome is the combination of a condition and task status. You use
the extracted values from the API response to determine the task status
and set the status with an appropriate message, when the condition
matches. You can specify one or more outcomes and the outcomes are
evaluated in the specified order. The first outcome condition that
matches, sets the task status and message. Outcomes is an optional input
to web API task and if not specified, task status is set to failed when
the HTTP status code is between 400 to 600, else the status is marked as
successful.</p>
<p>The outcomes of a task are as follows:</p>
<ul>
<li>
<p><strong>Success</strong>—Marks the task as Success if the condition matches.</p>
</li>
<li>
<p><strong>Error</strong>—Marks the task as Failed if the condition matches.</p>
</li>
<li>
<p><strong>Terminal error</strong>—Marks the API execution as Failed if the
condition matches. This marks a non-recoverable error and no retries
are attempted.</p>
</li>
<li>
<p><strong>Skip Task Execution</strong>—Skips the execution of a task if the
respective condition matches.</p>
</li>
</ul>
<p>Outcomes feature is illustrated in the example - Fetch details of NetApp
volume using volume ID.</p>
<p><strong>Web API Responses</strong></p>
<p>The web API responses for the requests are sent in the following
parameters as described in the following table.</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Headers</td>
<td><p>Response headers extracted from the API response. The extracted response headers can be referred to and mapped using the following format:</p>
<p>{{.global.&lt;TaskRefName&gt;.output.Headers.&lt;HeaderName&gt;}}.</p>
<p>For example if the task reference name is <strong>InvokeGenericWebApi1</strong>, to get ContentLength header, the reference name will be:</p>
<p>{{.global.InvokeGenericWebApi1.output.Headers.ContentLength}}.</p></td>
</tr>
<tr class="even">
<td>Cookies</td>
<td>List of cookies obtained from the response in the form of key value pairs.</td>
</tr>
<tr class="odd">
<td>Status Code</td>
<td>HTTP status code of the web API response.</td>
</tr>
<tr class="even">
<td>Status Message</td>
<td>HTTP status message of the web API response.</td>
</tr>
<tr class="odd">
<td>Parameters</td>
<td><p>List of output parameters extracted from the response. The output capture template format is as follows:</p>
<p>{{.global.[Name of the previous task].output.Parameters.<br />
[Name of the parameter in response parser of the previous task]}}</p>
<p>For example, if the response parser captures a string value as `Moid` from the API response, the corresponding output mapping for `Moid` is as follows:</p>
<p>{{.global.[TaskRefName].output.Parameters.Moid}}</p>
<p>In the above example, <strong>TaskRefName</strong> refers to a task which has MOID as output parameter.</p></td>
</tr>
</tbody>
</table>
<p><strong>Note: TaskRefName</strong> for the output mapping must be referred from the
corresponding task name in the JSON View tab of Workflow Designer.</p>
<p>Web API Request Task Examples</p>
<p><strong>Example: Create a NetApp Volume and Create Snapshot of the Volume –
Illustrates Task Output Mapping</strong></p>
<p>The following example workflow has two Invoke Web API tasks. The first
task shows how to create a NetApp volume. In this task, the UUID is
extracted for the newly created volume from the response. The second
task fetches the previously created volume details using the first
task’s captured UUID output and Create Snapshot for the same Volume.
This example assumes that the workflow inputs names are <strong>VolumeName</strong>,
<strong>VolumeSize</strong>, <strong>StorageVM</strong>, and <strong>Aggregate</strong> already exists.</p>
<p>The following is a sample API request sent to NetApp to create a volume.</p>
<p>POST /api/storage/volumes?return_timeout=0&amp;return_records=true HTTP/1.1<br>
{<br>
&ldquo;name&rdquo;: &ldquo;backup&rdquo;,<br>
&ldquo;size&rdquo;: &ldquo;4TB&rdquo;, &ldquo;svm&rdquo;: {<br>
&ldquo;name&rdquo;: &ldquo;backup-svm&rdquo;<br>
},<br>
&ldquo;aggregates&rdquo;: [<br>
{<br>
&ldquo;name&rdquo;: &ldquo;backup-aggregate&rdquo;<br>
}<br>
]<br>
}</p>
<p>The following is a sample response received from NetApp.</p>
<p>{<br>
&ldquo;num_records&rdquo;: 1, &ldquo;records&rdquo;: [<br>
{<br>
&ldquo;uuid&rdquo;: &ldquo;19d79da1-2e89-11eb-9685-00a0986a3b4f&rdquo;, &ldquo;name&rdquo;: &ldquo;&rdquo;,<br>
&ldquo;size&rdquo;:4294967296,<br>
&ldquo;aggregates&rdquo;: [<br>
{<br>
&ldquo;name&rdquo;: &ldquo;backup-aggregate&rdquo;<br>
}<br>
],<br>
&ldquo;svm&rdquo;: {<br>
&ldquo;name&rdquo;: &ldquo;backup-svm&rdquo;<br>
}<br>
}<br>
],<br>
&ldquo;job&rdquo;: {<br>
&ldquo;uuid&rdquo;: &ldquo;19db360a-2e89-11eb-9685-00a0986a3b4f&rdquo;, &ldquo;_links&rdquo;: {<br>
&ldquo;self&rdquo;: {<br>
&ldquo;href&rdquo;: &ldquo;/api/cluster/jobs/19db360a-2e89-11eb-9685-00a0986a3b4f&rdquo;<br>
}<br>
}<br>
}<br>
}</p>
<p>From the above response, the JSON path for the <strong>uuid</strong> value in the
<strong>records</strong> parameter is <strong>$.records[0].uuid</strong>.</p>
<p>The following table displays the required web API request task input and
response parser to achieve the above requirements.</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Target</td>
<td>External targets can be mapped to Targets either as custom value or workflow input.</td>
</tr>
<tr class="even">
<td>Method</td>
<td>"Method": "POST",</td>
</tr>
<tr class="odd">
<td>URL</td>
<td>"Url": "/api/storage/volumes?<br />
return_records=true",</td>
</tr>
<tr class="even">
<td>Body</td>
<td><p>The request body has templates with values referred from workflow input as follows:</p>
<p>"Body": {<br />
"name":<br />
"{{.global.workflow.input.VolumeName}}",<br />
"size":<br />
"{{.global.workflow.input.VolumeSize}}",<br />
"svm": {<br />
"name":<br />
"{{.global.workflow.input.StorageVm}}"<br />
},<br />
"aggregates": [<br />
{<br />
"name":<br />
"{{.global.workflow.input.Aggregate}}"<br />
}<br />
]<br />
}</p></td>
</tr>
<tr class="odd">
<td>Content Type</td>
<td>"ContentType": "json",</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>"ResponseParser": {<br />
"Parameters": [<br />
{<br />
"Name": "Uuid",<br />
"Path": "$.records[0].uuid",<br />
"Type": "string"<br />
}</td>
</tr>
</tbody>
</table>
<p>The following is a sample API request sent to NetApp to create snapshots
using volume UUID:</p>
<p>POST /api/storage/volumes/19d79da1-2e89-11eb-9685-00a0986a3b4f/snapshots<br>
{&ldquo;name&rdquo;: &ldquo;BackupVolume&rdquo;, &ldquo;comment&rdquo;: &ldquo;backup Data&rdquo; }</p>
<p>The following is a sample response received from NetApp.</p>
<p>{<br>
    &ldquo;job&rdquo;: {<br>
        &ldquo;uuid&rdquo;: &ldquo;13194cda-7d20-11eb-9991-00a0986a3b4f&rdquo;,<br>
        &ldquo;_links&rdquo;: {<br>
            &ldquo;self&rdquo;: {<br>
                &ldquo;href&rdquo;: &ldquo;/api/cluster/jobs/13194cda-7d20-11eb-9991-00a0986a3b4f&rdquo;<br>
            }<br>
        }<br>
    }<br>
}</p>
<p>The web API request task inputs and response parser are captured from
the snapshots UUID. The URL input requires previous task’s UUID output.
The name of web API tasks within a workflow is named
InvokeGenericWebApi&lt;number&gt;, irrespective of what the user names it.
To get previous task name through workflow designer, click the JSON View
button and make a note of the Task Name, for example,
InvokeGenericWebApi1.</p>
<img src="./images//media/image4.jpeg" style="width:6.69291in;height:2.926in" />
<p>The output mapping template format is as follows:</p>
<p>{{.global.InvokeGenericWebApi1.output.Parameters.Uuid}}</p>
<p>The following table displays the required web API request task input and
response parser to achieve the above requirements.</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Target</td>
<td>External targets can be mapped to Targets either as custom value or workflow input.</td>
</tr>
<tr class="even">
<td>Method</td>
<td>"Method": "POST",</td>
</tr>
<tr class="odd">
<td>URL</td>
<td><p>"Url": "/api/storage/volumes/{{.global.InvokeGenericWebApi1.output.Parameters.Uuid}}/snapshots",</p>
<p><strong>Note: InvokeGenericWebApi1</strong> is the task reference name of the previous task in the workflow.</p></td>
</tr>
<tr class="even">
<td>Body</td>
<td><p>The request body has templates with values referred from workflow input as follows:</p>
<p>"Body": {"name": "{{.global.workflow.input.SnapshotName}}", "comment": "Backup Copy" }</p></td>
</tr>
<tr class="odd">
<td>Content Type</td>
<td>"ContentType": "json",</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>"ResponseParser": <br />
{ "Parameters": [ { "Name": "SUuid", "Path": "$.job.uuid", "Type": "string" }</td>
</tr>
</tbody>
</table>
<p><strong>Example: Create a Serial over LAN (SOL) Policy</strong></p>
<p>The following example shows how to create Serial over LAN (SOL) in
Intersight using RestAPI calls.</p>
<p>The following is a sample of the API request.</p>
<p>{<br>
&ldquo;Name&rdquo;: &ldquo;SolPolicy&rdquo;,<br>
&ldquo;ComPort&rdquo;: &ldquo;com0&rdquo;,<br>
&ldquo;Organization&rdquo;: {<br>
&ldquo;ObjectType&rdquo;: &ldquo;organization.Organization&rdquo;,<br>
&ldquo;Moid&rdquo;: &ldquo;5facccc96972652d305616a7&rdquo;<br>
}<br>
}</p>
<p>The following is a sample API response.</p>
<p>{<br>
&ldquo;Moid&rdquo;: &ldquo;5fbcdca26275722d31de7519&rdquo;,<br>
&ldquo;ObjectType&rdquo;: &ldquo;sol.Policy&rdquo;,<br>
&ldquo;ClassId&rdquo;: &ldquo;sol.Policy&rdquo;,<br>
&ldquo;CreateTime&rdquo;: &ldquo;2020-11-24T10:12:51.160304663Z&rdquo;,<br>
&ldquo;ModTime&rdquo;: &ldquo;2020-11-24T10:12:51.160304663Z&rdquo;,<br>
&ldquo;Tags&rdquo;: [],<br>
&ldquo;Owners&rdquo;: [<br>
&ldquo;5facccc67564612d33a29166&rdquo;<br>
],<br>
&ldquo;SharedScope&rdquo;: &ldquo;&rdquo;,<br>
&ldquo;AccountMoid&rdquo;: &ldquo;5facccc67564612d33a29166&rdquo;,<br>
&ldquo;DomainGroupMoid&rdquo;: &ldquo;5facccc67564612d33a29167&rdquo;,<br>
&ldquo;Ancestors&rdquo;: null,<br>
&ldquo;PermissionResources&rdquo;: [{<br>
&ldquo;ObjectType&rdquo;: &ldquo;organization.Organization&rdquo;,<br>
&ldquo;ClassId&rdquo;: &ldquo;mo.MoRef&rdquo;,<br>
&ldquo;Moid&rdquo;: &ldquo;5facccc96972652d305616a7&rdquo;,<br>
&ldquo;link&rdquo;: &ldquo;<a href="https://intersight.com/api/v1/organization/Organizations/5facccc96972652d305616a7%22">https://intersight.com/api/v1/organization/Organizations/5facccc96972652d305616a7&quot;</a><br>
}],<br>
&ldquo;Description&rdquo;: &ldquo;&rdquo;,<br>
&ldquo;Name&rdquo;: &ldquo;SolPolicy&rdquo;,<br>
&ldquo;BaudRate&rdquo;: 9600,<br>
&ldquo;ComPort&rdquo;: &ldquo;com0&rdquo;,<br>
&ldquo;Enabled&rdquo;: true,<br>
&ldquo;SshPort&rdquo;: 2400,<br>
&ldquo;Organization&rdquo;: {<br>
&ldquo;ObjectType&rdquo;: &ldquo;organization.Organization&rdquo;,<br>
&ldquo;ClassId&rdquo;: &ldquo;mo.MoRef&rdquo;,<br>
&ldquo;Moid&rdquo;: &ldquo;5facccc96972652d305616a7&rdquo;,<br>
&ldquo;link&rdquo;: &ldquo;<a href="https://intersight.com/api/v1/organization/Organizations/5facccc96972652d305616a7%22">https://intersight.com/api/v1/organization/Organizations/5facccc96972652d305616a7&quot;</a><br>
},<br>
&ldquo;Profiles&rdquo;: null<br>
}</p>
<p>The following table explains the input properties.</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Method</td>
<td>POST</td>
</tr>
<tr class="even">
<td>URL</td>
<td>/v1/sol/Policies</td>
</tr>
<tr class="odd">
<td>Content Type</td>
<td>JSON</td>
</tr>
<tr class="even">
<td>Body</td>
<td><p>The <strong>Text</strong> field will have the following value:</p>
<p>{<br />
"Name": "{{.global.workflow.input.Name}}",<br />
"ComPort": "{{.global.workflow.input.ComPort}}",<br />
"Organization": {<br />
"ObjectType": "organization.Organization",<br />
"Moid": "{{.security.OrganizationMoid}}"<br />
}<br />
}</p>
<p>The <strong>Content Type</strong> must be JSON.</p></td>
</tr>
<tr class="odd">
<td>Response Parser</td>
<td><p>The <strong>Response Parser</strong> field will have the following parameter:</p>
<ul>
<li><p><strong>Name</strong>:</p></li>
</ul>
<ul>
<li><blockquote>
<p>MOID</p>
</blockquote></li>
</ul>
<ul>
<li><p><strong>Path</strong>:</p></li>
</ul>
<ul>
<li><blockquote>
<p>$.Moid</p>
</blockquote></li>
</ul>
<ul>
<li><p><strong>Type</strong>:</p></li>
</ul>
<ul>
<li><blockquote>
<p>string</p>
</blockquote></li>
</ul></td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The <strong>Body</strong> input parameter is optional as it would be empty
for a GET call method.</p>
<p><strong>Example: Fetch details of NetApp volume using volume ID</strong></p>
<p>The following example shows how to fetch the NetApp volume using Uuid of
the volume. It demonstrates the usage of outcomes to set status of API
execution and status message based on the API response.</p>
<p>The following is a sample URL of the request</p>
<p>/api/storage/volumes/0049cef7-8a23-11ea-87ab-00a098605c19</p>
<p>The following is a sample API response.</p>
<p>{<br>
    &ldquo;uuid&rdquo;: &ldquo;0049cef7-8a23-11ea-87ab-00a098605c19&rdquo;,<br>
    &ldquo;name&rdquo;: &ldquo;backup_volume&rdquo;,<br>
    &ldquo;size&rdquo;: 1130258432,<br>
    &ldquo;state&rdquo;: &ldquo;online&rdquo;,<br>
    &ldquo;aggregates&rdquo;: [<br>
        {<br>
            &ldquo;name&rdquo;: &ldquo;aggr01&rdquo;,<br>
            &ldquo;uuid&rdquo;: &ldquo;8347fd83-34b1-4234-a8ba-6c53bad0fc6a&rdquo;<br>
        }<br>
    ],<br>
    &ldquo;snapmirror&rdquo;: {<br>
        &ldquo;is_protected&rdquo;: true<br>
    },<br>
    &ldquo;space&rdquo;: {<br>
        &ldquo;size&rdquo;: 1130258432,<br>
        &ldquo;available&rdquo;: 1065709568,<br>
        &ldquo;used&rdquo;: 8036352<br>
    }<br>
}</p>
<p>The following table explains the input properties.</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Method</td>
<td>GET</td>
</tr>
<tr class="even">
<td>URL</td>
<td>/api/storage/volumes/0049cef7-8a23-11ea-87ab-00a098605c19</td>
</tr>
<tr class="odd">
<td>Content Type</td>
<td>JSON</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>"ResponseParser": {<br />
"Parameters": [<br />
{<br />
"Name": "Name",<br />
"Path": "$.name",<br />
"Type": "string"<br />
},<br />
{<br />
"Name": "State",<br />
"Path": "$.state",<br />
"Type": "string"<br />
},<br />
{<br />
"Name": "AvailableSize",<br />
"Path": "$.space.available",<br />
"Type": "float"<br />
},<br />
{<br />
"Name": "IsProtected",<br />
"Path": "$.snapmirror.is_protected",<br />
"Type": "boolean"<br />
}<br />
]<br />
}</td>
</tr>
<tr class="odd">
<td>Outcomes</td>
<td>"Outcomes": [<br />
{<br />
"Condition": "{{and (ge .local.response.HttpStatusCode 400)<br />
(lt .local.response.HttpStatusCode 600)}}"<br />
"Message"  : "API request failed - {{.local.response.HttpStatusCode}}:{{.local.response.HttpStatusMsg}}",<br />
"Name"     : "API Invoke Error",<br />
"Type"     : "Error"<br />
},<br />
{<br />
"Condition": "{{ne .local.response.State "online"}}",<br />
"Message"  : "Fetched Volume {{.local.response.Name}} is offline",<br />
"Name"     : "Offline Volume",<br />
"Type"     : "Error"<br />
},<br />
{<br />
"Condition": "{{lt .local.response.AvailableSize 100000000}}",<br />
"Message"  : "Available space in the volume {{.local.response.Name}} is less than 100 MB.",<br />
"Name"     : "Out of Space",<br />
"Type"     : "Error"<br />
},<br />
{<br />
"Condition": "{{eq .local.response.IsProtected false}}",<br />
"Message"  : "Fetched Volume {{.local.response.Name}} is not protected.",<br />
"Name"     : "Insecure Volume",<br />
"Type"     : "Error"<br />
},<br />
{<br />
"Condition": "true",<br />
"Message"  : "Volume prerequisite checks succeeded.",<br />
"Name"     : "All Good",<br />
"Type"     : "Success"<br />
}<br />
]</td>
</tr>
</tbody>
</table>
<p>The response parser specification captures these outputs from the
response such as Name, State, AvailableSize, and IsProtected.</p>
<p>The extracted values can be used to set the task status using outcomes.
The syntax to refer the API outputs in outcomes is
.local.response.&lt;api-output-parameter-name&gt; where
api-output-parameter-name can refer:</p>
<ul>
<li>
<p>Predefined API output parameters such as HttpStatusCode,
HttpStatusMsg</p>
</li>
<li>
<p>Output parameters captured using Response Parser.</p>
</li>
</ul>
<blockquote>
<p><strong>Important:</strong> If the specified output parameter is not available, the
template engine throws validation error message when API is executed.
Following syntax can be used to check if output parameter exists in
response and then use.</p>
<p>{{if index .local.response api-param-name }} {{.local.response.&lt;api-output-parameter-name&gt;}} {{end}}</p>
</blockquote>
<p>In this example, the following outcomes are added based on the API
response.</p>
<ol>
<li>For the API invocation error where the HTTP status code is between
400 to 600 indicates. If the condition evaluates to true then an
error message is set to show the status code and status message.</li>
</ol>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td><p><strong>API Invoke Error</strong></p>
<p>The name identifies an outcome in the outcomes list. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td>Condition</td>
<td><p>{{and (ge .local.response.HttpStatusCode 400) <br />
      (lt .local.response.HttpStatusCode 600)}}</p>
<p>This condition checks whether the response status code of API is between 400 and 600.</p></td>
</tr>
<tr class="odd">
<td>Outcome Type</td>
<td><p><strong>Error</strong></p>
<p>If the Condition is true, status of API is set to Failed.</p></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p>API request failed - {{.local.response.HttpStatusCode}}:{{.local.response.HttpStatusMsg}}</p>
<p>If the Condition is true, status message of API is set to above.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>An API error is thrown if the fetched volume is not online. An
example for string comparison is the following.</li>
</ol>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td><p><strong>Offline Volume</strong></p>
<p>The name identifies an outcome in the outcomes list. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td>Condition</td>
<td><p>{{ne .local.response.State "online"}}</p>
<p>This condition checks whether the captured output string State is equal to online. Please make sure the string value is enclosed in double quotes.</p></td>
</tr>
<tr class="odd">
<td>Outcome Type</td>
<td><p><strong>Error</strong></p>
<p>If the Condition is true, status of API is set to Failed.</p></td>
</tr>
<tr class="even">
<td>Message</td>
<td><p>Fetched Volume {{.local.response.Name}} is offline </p>
<p>If the Condition is true, status message of API is set to above.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>An API error is thrown if the fetched volume does not have a of
minimum 100 MB free space.</li>
</ol>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><p><strong>Out of Space</strong></p>
<p>The name identifies an outcome in the outcomes list. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td><strong>Condition</strong></td>
<td><p>{{lt .local.response.AvailableSize 100000000}}</p>
<p>This condition checks whether the available space is less than 100 MB. The fetched AvailableSize is of type float64.</p></td>
</tr>
<tr class="odd">
<td><strong>Outcome Type</strong></td>
<td><p><strong>Error</strong></p>
<p>If the Condition is true, status of API is set to Failed.</p></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p>Available space in the volume {{.local.response.Name}} is less than 100 MB</p>
<p>If the Condition is true, status message of API is set to above.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>An API error is thrown if the fetched volume’s secure property is
not set. An example for Boolean comparison is the following.</li>
</ol>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><p><strong>Insecure Volume</strong></p>
<p>The name identifies an outcome in the outcomes list. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td><strong>Condition</strong></td>
<td><p>{{eq .local.response.IsProtected false}} </p>
<p>This condition checks whether the captured IsProtected output parameter is not set.</p></td>
</tr>
<tr class="odd">
<td><strong>Outcome Type</strong></td>
<td><p><strong>Error</strong></p>
<p>If the Condition is true, status of API is set to Failed.</p></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p>Fetched Volume {{.local.response.Name}} is not protected.</p>
<p>If the Condition is true, status message of API is set to above.</p></td>
</tr>
</tbody>
</table>
<ol>
<li>This can be termed as the final outcome for a successful completion.</li>
</ol>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Outcome Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><p><strong>All Good</strong></p>
<p>The name identifies an outcome in the outcomes list of task designer. The name is not used for any other purpose.</p></td>
</tr>
<tr class="even">
<td><strong>Condition</strong></td>
<td><p><strong>True</strong></p>
<p>{{eq .local.response.HttpStatusCode 200}}</p>
<p><strong>True</strong> can be used as the condition to capture all scenarios or the specific success response status code can be used, which is 200.</p></td>
</tr>
<tr class="odd">
<td><strong>Outcome Type</strong></td>
<td><strong>Success</strong></td>
</tr>
<tr class="even">
<td><strong>Message</strong></td>
<td><p><strong>Volume prerequisite checks succeeded.</strong></p>
<p>Above message is set as status message.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example: Invoke Nexus device API to authenticate using aaaLogin and
create VLAN – Illustrates custom Target authentication in the web API
workflow</strong></p>
<p>The following example workflow has two Invoke Web API tasks. The first
task shows how to authenticate against Nexus switch using aaaLogin and
second API creates a VLAN on the switch using the authentication token
extracted from the first login API. It is assumed that Nexus switch is
added as HTTP Endpoint target without authentication parameters.</p>
<p>The following is a sample API request sent to authenticate against Nexus
device and fetch the authentication token.</p>
<p><strong>URL</strong> : POST /api/aaaLogin.json<br>
<strong>Body</strong>:<br>
{<br>
&ldquo;aaaUser&rdquo;: {<br>
&ldquo;attributes&rdquo;: {<br>
&ldquo;name&rdquo;: &ldquo;username&rdquo;,<br>
&ldquo;pwd&rdquo;: &ldquo;password&rdquo;<br>
}<br>
}<br>
}</p>
<p>The following is a sample response received from Nexus device, Token key
in the response holds the Token which should be used in subsequent API
calls to authenticate.</p>
<p>{<br>
&ldquo;totalCount&rdquo;: &ldquo;1&rdquo;,<br>
&ldquo;imdata&rdquo;: [<br>
{<br>
&ldquo;aaaLogin&rdquo;: {<br>
&ldquo;attributes&rdquo;: {<br>
&ldquo;token&rdquo;: &ldquo;Token Value&rdquo;,<br>
&ldquo;refreshTimeoutSeconds&rdquo;: &ldquo;9600&rdquo;,<br>
&ldquo;maximumLifetimeSeconds&rdquo;: &ldquo;86400&rdquo;,<br>
&ldquo;guiIdleTimeoutSeconds&rdquo;: &ldquo;9600&rdquo;,<br>
&ldquo;userName&rdquo;: &ldquo;username&rdquo;,<br>
}<br>
}<br>
}<br>
]<br>
}</p>
<p>From the above response, the JSON path of the token value is
$.imdata[0].aaaLogin.attributes.token.</p>
<p>The following table displays the required web API request task input and
response parser to achieve the above requirements.</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Target</strong></td>
<td><p>External targets can be mapped to Targets either as custom value or workflow input.</p>
<p><strong>Note:</strong> Nexus switch is added as HTTP Endpoint by disabling Authentication Required input slider.</p></td>
</tr>
<tr class="even">
<td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="odd">
<td><strong>URL</strong></td>
<td>/api/aaaLogin.json</td>
</tr>
<tr class="even">
<td><strong>Body</strong></td>
<td><p>The request body has templates with values referred from workflow input as follows:</p>
<p>Password workflow input should be marked as secure property to make sure the value is hidden and encrypted while data-in-transit and data-at-rest.</p>
<p>"Body": {<br />
{<br />
"aaaUser": {<br />
"attributes": {<br />
"name": "{{.global.workflow.input.Username}}",<br />
"pwd": "{{.global.workflow.input.Password}}",<br />
}<br />
}<br />
}<br />
}</p></td>
</tr>
<tr class="odd">
<td><strong>Content Type</strong></td>
<td>JSON</td>
</tr>
<tr class="even">
<td><strong>Response Parser</strong></td>
<td><p>The Response Parser field will have the following parameter:</p>
<p>"ResponseParser": {<br />
"Parameters": [<br />
{<br />
"Name": "AuthToken",<br />
"Path": "$.imdata[0].aaaLogin.attributes.token"<br />
"Type": "string"<br />
}<br />
]<br />
}</p></td>
</tr>
</tbody>
</table>
<p>The following is a sample API request sent to Nexus switch to create
VLAN 501 with authentication token populated in the cookie input.</p>
<p><strong>URL</strong> : POST /api/mo/sys/bd.json<br>
<strong>Cookie</strong> : APIC-cookie=&lt;Token-Value&gt;<br>
<strong>Body</strong> :<br>
{<br>
&ldquo;bdEntity&rdquo;: {<br>
&ldquo;children&rdquo;: [<br>
{<br>
&ldquo;l2BD&rdquo;: {<br>
&ldquo;attributes&rdquo;: {<br>
&ldquo;fabEncap&rdquo;: &ldquo;vlan-501&rdquo;,<br>
&ldquo;pcTag&rdquo;: &ldquo;1&rdquo;<br>
}<br>
}<br>
}<br>
]<br>
}<br>
}</p>
<p>The output of first task &ldquo;AuthToken&rdquo; needs to be populated in the cookie
input of the create VLAN task.</p>
<p>The output mapping template format is as
follows:{{.global.InvokeGenericWebApi1.output.Parameters.AuthToken}}</p>
<p>The following table displays the required web API request task inputs to
achieve the above requirements.</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Target</strong></td>
<td><p>External targets can be mapped to Targets either as custom value or workflow input.</p>
<p><strong>Note:</strong> Nexus switch is added as HTTP Endpoint by disabling Authentication Required input slider.</p></td>
</tr>
<tr class="even">
<td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="odd">
<td><strong>URL</strong></td>
<td>/api/mo/sys/bd.json</td>
</tr>
<tr class="even">
<td><strong>Cookie</strong></td>
<td>{<br />
APIC-cookie={{.global.InvokeGenericWebApi1.output.Parameters.AuthToken}}<br />
}</td>
</tr>
<tr class="odd">
<td><strong>Body</strong></td>
<td>{<br />
"bdEntity": {<br />
"children": [<br />
{<br />
"l2BD": {<br />
"attributes": {<br />
"fabEncap": "vlan-501",<br />
"pcTag": "1"<br />
}<br />
}<br />
}<br />
]<br />
}<br />
}</td>
</tr>
<tr class="even">
<td><strong>Content Type</strong></td>
<td>JSON</td>
</tr>
</tbody>
</table>
<p><strong>Example: Create a Virtual Machine using Content Library and Attach a
SCSI Controller to the created virtual machine–Illustrates Task Output
Mapping</strong></p>
<p>The following example workflow has two Invoke Web API tasks. The first
task shows how to create a virtual machine using content library. In
this task, the Virtual machine ID is extracted for the newly created
virtual machine. The second task fetches the virtual machine ID of
previously created virtual machine and add a SCSI controller to the
created virtual machine. This example assumes that the workflow inputs
names are <strong>libraryID</strong>, <strong>datastoreID</strong>, <strong>folderID, hostID,
respoolID</strong>, and <strong>External Targets</strong> already exists.</p>
<p>The following is a sample API request sent to vCenter endpoint to create
a virtual machine using content library.</p>
<p>POST /rest/com/vmware/vcenter/ovf/library-item/id:{{.global.workflow.input.libraryID}}?~action=deploy<br>
{<br>
{<br>
&ldquo;deployment_spec&rdquo;: {<br>
&ldquo;accept_all_EULA&rdquo;: true,<br>
&ldquo;default_datastore_id&rdquo;: &ldquo;{{.global.workflow.input.datastoreID}}&rdquo;<br>
},<br>
&ldquo;target&rdquo;: {<br>
&ldquo;folder_id&rdquo;: &ldquo;{{.global.workflow.input.folderID}}&rdquo;,<br>
&ldquo;host_id&rdquo;: &ldquo;{{.global.workflow.input.hostID}}&rdquo;,<br>
&ldquo;resource_pool_id&rdquo;: &ldquo;{{.global.workflow.input.respoolID}}&rdquo;<br>
}<br>
}</p>
<p>The following is a sample response received from NetApp.</p>
<p>{<br>
&ldquo;value&rdquo;:<br>
{<br>
&ldquo;resource_id&rdquo;:<br>
{<br>
&ldquo;id&rdquo;:&ldquo;vm-52491&rdquo;<br>
&ldquo;type&rdquo;: &ldquo;VirtualMachine&rdquo;<br>
}<br>
&ldquo;succeeded&rdquo;:&ldquo;true&rdquo;<br>
}<br>
} </p>
<p>From the above response, the JSON path for the <strong>id</strong> value in the
<strong>resource_id</strong> parameter is <strong>$.value.resource_id.id</strong></p>
<p>The following table displays the required web API request task input and
response parser to achieve the above requirements.</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Target</td>
<td>External targets can be mapped to Targets either as custom value or workflow input.</td>
</tr>
<tr class="even">
<td>Method</td>
<td>"Method": "POST",</td>
</tr>
<tr class="odd">
<td>URL</td>
<td>"Url": "/rest/com/vmware/vcenter/ovf/library-item/id:{{.global.workflow.input.libraryID}}?~action=deploy ",</td>
</tr>
<tr class="even">
<td>Body</td>
<td><p>The request body has templates with values referred from workflow input as follows:</p>
<p>"Body": {<br />
"deployment_spec": {<br />
"accept_all_EULA": true,<br />
"default_datastore_id": "{{.global.workflow.input.datastoreID}}"<br />
},<br />
"target": {<br />
"folder_id": "{{.global.workflow.input.folderID}}",<br />
"host_id": "{{.global.workflow.input.hostID}}",<br />
"resource_pool_id": "{{.global.workflow.input.respoolID}}"<br />
}<br />
}</p></td>
</tr>
<tr class="odd">
<td>Content Type</td>
<td>"ContentType": "json",</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>"ResponseParser": {<br />
"Parameters": [<br />
{<br />
"Name": "vmID",<br />
"Path": "$.value.resource_id.id ",<br />
"Type": "string"<br />
}</td>
</tr>
</tbody>
</table>
<p>The following is a sample API request sent to VMware vCenter endpoint to
add SCSI controller using virtual machine ID:</p>
<p>POST /rest/vcenter/vm/vm-52491/hardware/adapter/scsi<br>
{&ldquo;spec&rdquo;: {&ldquo;type&rdquo;: &ldquo;LSILOGICSAS&rdquo;}} </p>
<p>The following is a sample response received from VMware vCenter.</p>
<p>{<br>
&ldquo;value&rdquo;:&ldquo;1000&rdquo;<br>
}</p>
<p>The URL input requires previous task’s <strong>vmID</strong> output. The name of web
API tasks within a workflow is named InvokeGenericWebApi&lt;number&gt;,
irrespective of what the user names it. To get previous task name
through workflow designer, click the JSON View button and make a note of
the Task Name, for example, InvokeGenericWebApi1.</p>
<p>The output mapping template format is as follows:</p>
<p>{{.global.InvokeGenericWebApi1.output.Parameters.vmID}}</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Target</td>
<td>External targets can be mapped to Targets either as custom value or workflow input.</td>
</tr>
<tr class="even">
<td>Method</td>
<td>"Method": "POST",</td>
</tr>
<tr class="odd">
<td>URL</td>
<td><p>"Url": "/rest/vcenter/vm/{{.global.InvokeGenericWebApi1.output.Parameters.vmID}}/hardware/adapter/scsi ",</p>
<p><strong>Note: InvokeGenericWebApi1</strong> is the task reference name of the previous task in the workflow.</p></td>
</tr>
<tr class="even">
<td>Body</td>
<td><p>The request body has templates with values referred from workflow input as follows:</p>
<p>"Body": {"spec": {"type": "LSILOGICSAS"}</p></td>
</tr>
<tr class="odd">
<td>Content Type</td>
<td>"ContentType": "json",</td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td>"ResponseParser": <br />
{ "Parameters": [ { "Name": "value", "Path": "$.value", "Type": "string" }</td>
</tr>
</tbody>
</table>
<p><span id="_Refd24e21884" class="anchor"></span>Upgrading Connector Packs
on UCS Director Instances</p>
<p>Cisco Intersight introduces the ability to update connector pack
versions that are installed on claimed UCS Director instances. After
claiming a UCS Director instance in Intersight, as an account
administrator, you can perform the following actions:</p>
<ul>
<li>View a list of updated versions for currently installed connector
packs on the UCS Director instance.</li>
</ul>
<!-- -->
<ul>
<li>The list of updated versions available for connector packs is based
on the UCS Director software version installed on the instance.</li>
</ul>
<!-- -->
<ul>
<li>Download and install the updated versions of the connector packs on
the UCS Director instance. You can either install the updated
versions immediately after downloading them or you can install it at
a later point in time.</li>
</ul>
<p>From Cisco Intersight, you can view and install updated versions of
connector packs only. You cannot download and install updated versions
of Cisco UCS Director. To install the latest versions of Cisco UCS
Director, you must download it from <a href="http://cisco.com/">Cisco.com</a>. For
more information, see the <a href="https://www.cisco.com/c/en/us/support/servers-unified-computing/ucs-director/products-installation-guides-list.html">Cisco UCS Director Installation and Upgrade
Guides</a>.</p>
<p>Prerequisites and Guidelines</p>
<ul>
<li>
<p>This feature is available only with UCS Director version 6.7(4.0)
and later versions.</p>
</li>
<li>
<p>In an optimized multi-node configuration, the updated connector pack
versions are installed on the primary node.</p>
</li>
<li>
<p>Installing updated versions of connector packs on a UCS Director
instance will result in the UCS Director services restarting. All
users who are logged in to the UCS Director instance will be
automatically logged out.</p>
</li>
<li>
<p>Prior to installing the updated versions of the connector packs,
take a backup of the data on the UCS Director instance. For more
information, see <a href="file://E:%5Chelp%5Cresources%5Cbackup_and_restore">Backup and Restore for Cisco UCS Director
Instances</a>.</p>
</li>
<li>
<p>From Cisco Intersight, you can download and update all connector
packs on a UCS Director instance. You cannot download and install
specific connector packs. If you want to install specific connector
packs, then you must use the UCS Director user interface. For more
information, see the <a href="https://www.cisco.com/c/en/us/support/servers-unified-computing/ucs-director/products-maintenance-guides-list.html">Cisco UCS Director Administration
Guide</a>.</p>
</li>
<li>
<p>For customers using Intersight Private Virtual Appliance, the
connector packs are available in the Intersight Private Virtual
Appliance account.</p>
</li>
</ul>
<p>Updating Connector Pack Versions on UCS Director Instances</p>
<ol>
<li>
<p>From the table view of the UCS Director instances, select a UCS
Director instance and click Update Software.</p>
</li>
<li>
<p>In the Update Software screen, wait for the screen to populate
information on the updated versions of connector packs. The
following information is displayed:</p>
</li>
</ol>
<ul>
<li>Connector Pack Version Information—Displays the names of the
connector packs, versions of the connector packs installed on the
UCS Director instance and the latest version number for each
connector pack.</li>
</ul>
<!-- -->
<ul>
<li>This information is based on the last inventory run on the UCS
Director instance. The inventory runs every 12 hours.</li>
</ul>
<!-- -->
<ul>
<li>UCS Director Instance Information—Displays the UCS Director instance
name, management IP address, environment in which the instance is
deployed, the installed UCS Director software version and the time
when the last inventory process was run on the instance.</li>
</ul>
<ol>
<li>Choose one of the following options:</li>
</ol>
<ul>
<li>Click Download to Instance to download the new versions of the
connector packs to the UCS Director instance.</li>
</ul>
<!-- -->
<ul>
<li>After the connector packs are downloaded, you can either choose to
install the updated connector packs right away, or at a later point.
If you want to install specific connector pack versions on the UCS
Director instance, then you must use the UCS Director user
interface.</li>
</ul>
<!-- -->
<ul>
<li>Click Download and Update to download the new versions of the
connector packs and install these versions on the UCS Director
instance immediately.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Installing latest versions of connector packs on the UCS
Director instance will result in a restart of the UCS Director
services. All logged in users are automatically logged out when the
services restart.</p>
</blockquote>
<ol>
<li>
<p>To view the progress of the installation process, choose Requests on
the header pane, and click View All.</p>
</li>
<li>
<p>Choose a workflow name to view the details.</p>
</li>
</ol>
<p><span id="_Toc105371570" class="anchor"></span>Backup and Restore for
UCS Director in Intersight</p>
<p>Overview</p>
<p>Cisco Intersight introduces the ability to take backups and restore
backups for claimed UCS Director instances. After claiming a UCS
Director instance in Intersight, as an account administrator, you can
perform the following tasks:</p>
<ul>
<li>
<p>Take a backup of Cisco UCS Director—You can either create a backup
policy to run at a scheduled time or you can perform an on-demand
backup. For either of these options, you can choose to have the
backed up files stored on the local UCS Director instance or you can
specify a system on the network.</p>
</li>
<li>
<p>View a list of backups—You can view the list of backup processes
that have run on all UCS Director instances.</p>
</li>
<li>
<p>Restore data from a backup image—You can choose a backup image and
restore it on a UCS Director instance.</p>
</li>
<li>
<p>Download Connector Packs—You can download the latest versions of
installed connector packs on a UCS Director instance.</p>
</li>
</ul>
<p>A user with read-only privileges can only view the list of backup
processes that have run on all UCS Director instances.</p>
<p>Prerequisites and Guidelines</p>
<ul>
<li>
<p>Device Connector version 1.0.9-1165 or higher must be installed.</p>
</li>
<li>
<p>Cisco UCS Director Base Platform Pack version 6.7.3.1 or later must
be installed on the UCS Director instance to use the backup and
restore feature. In an optimized multi-node setup, prior to
installing or upgrading the base platform pack to version 6.7.3.1 or
later, you must first configure passwordless authentication between
the primary node and the database node.</p>
</li>
<li>
<p>You can take backups and restore backups in both, single node and
optimized multi-node configurations. However, you cannot take
backups of a UCS Director instance in a single node configuration
and restore it on an instance in an optimized multi-node
configuration.</p>
</li>
<li>
<p>If the versions of the connector packs in the backup image are more
recent than the connector pack versions installed on the UCS
Director instance that you want to restore the backup to, then the
restore process upgrades the connector packs on the UCS Director
instance to the latest version.</p>
</li>
<li>
<p>If the file location specified for an on-demand backup process and a
scheduled backup process is the same, then the file created by the
on-demand backup process is deleted based on the retention copies
configured in the backup schedule.</p>
</li>
</ul>
<p>Running an Immediate Backup for UCS Director Instances</p>
<p>An immediate backup is a point-in-time process and is initiated
immediately after you provide the backup details. Prior to initiating
this backup, you must specify if the backup file must be stored on the
current UCS Director instance or on a specific system in the network.</p>
<ol>
<li>
<p>From the table view of the UCS Director instances, select a UCS
Director instance and click Backup.</p>
</li>
<li>
<p>In the General page, review the details of the UCS Director instance
that is displayed, and click Next.</p>
</li>
<li>
<p>In the Configure Backup page, specify the location of the backup
file.</p>
</li>
</ol>
<ul>
<li>
<p>Selected Instance—Implies that the backup file must be stored on the
current UCS Director instance.</p>
</li>
<li>
<p>Network Share—Implies that the backup file must be stored in a
location external to the current UCS Direct instance.</p>
</li>
</ul>
<ol>
<li>If you chose Selected Instance, provide the following information:</li>
</ol>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Backup Filename Prefix</td>
<td>A prefix for the name of the backup file. A unique file name is created for the backup image that includes the specified prefix and the timestamp.</td>
</tr>
</tbody>
</table>
<ol>
<li>If you chose Network Share, provide the following information:</li>
</ol>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Backup Filename Prefix</td>
<td>A prefix for the name of the backup file. A unique file name is created for the backup that includes the specified prefix and the timestamp.</td>
</tr>
<tr class="even">
<td>Protocol</td>
<td><p>Protocol to be used to transfer the backup file to the location where the file must be stored. It can be one of the following:</p>
<ul>
<li><p>SCP</p></li>
<li><p>SFTP</p></li>
<li><p>FTP</p></li>
</ul>
<blockquote>
<p><strong>Important:</strong> Storing backup files on anonymous FTP servers is currently not supported.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>File Location</td>
<td><p>The location where the backup file must be stored. You must provide the IP address or the hostname of the location and the complete file system path.</p>
<p>For example: 10.10.10.10/var/backup.</p></td>
</tr>
<tr class="even">
<td>Username</td>
<td>User name for the backup server.</td>
</tr>
<tr class="odd">
<td>Password</td>
<td>Password for the user name of the backup server.</td>
</tr>
</tbody>
</table>
<ol>
<li>Click Save.</li>
</ol>
<!-- -->
<ol>
<li>The backup process is initiated immediately. You can view the the
list of backup files from the Backups tab.</li>
</ol>
<p>Creating a Backup Schedule</p>
<p>You can create a backup schedule to ensure that backups run at a
stipulated time and backup images are stored at a specific location. You
can choose to store the backup files either in the root directory of the
UCS Director instance or choose a different location on the network.</p>
<ol>
<li>
<p>From the table view of the UCS Director instances, select a UCS
Director instance and click Schedule Backup.</p>
</li>
<li>
<p>In the General page, review the details of the UCS Director instance
that is displayed, and click Next.</p>
</li>
<li>
<p>In the Configure Backup page, specify the organization that the UCS
Director instance belongs to and the type of schedule you want to
create.</p>
</li>
</ol>
<ul>
<li>
<p>Organizations—Displays the list of organizations that the UCS
Director instance belongs to. By choosing a specific organization
from this list, it allows administrators of those specific
organizations to view backup images created for this instance, and
restore from those images.</p>
</li>
<li>
<p>Daily—The backup schedule runs every day, starting with the date and
time you select.</p>
</li>
<li>
<p>Periodic—The backup schedule runs periodically, starting with the
date and time interval you select. By default, a periodic backup
schedule runs every 8 hours. Other options include 4, 12, 16, or 20.</p>
</li>
</ul>
<ol>
<li>Specify the location where the backup file must be stored.</li>
</ol>
<!-- -->
<ol>
<li>It can be one of the following:</li>
</ol>
<ul>
<li>
<p>Selected Instance—Default option. The backup file is stored on the
current UCS Director instance.</p>
</li>
<li>
<p>Network Share—The backup file is stored in a location external to
the current UCS Direct instance.</p>
</li>
</ul>
<ol>
<li>If you chose Selected Instance, provide the following information:</li>
</ol>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Backup Filename Prefix</td>
<td>A prefix for the name of the backup file. A unique file name is created for the backup image that includes the specified prefix and the timestamp.</td>
</tr>
<tr class="even">
<td>Retention Copies</td>
<td>The number of backup copies maintained on the server.</td>
</tr>
</tbody>
</table>
<ol>
<li>If you chose Network Share, provide the following information:</li>
</ol>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Backup Filename Prefix</td>
<td>A prefix for the name of the backup file. A unique file name is created for the backup image that includes the specified prefix and the timestamp.</td>
</tr>
<tr class="even">
<td>Protocol</td>
<td><p>Protocol to be used to transfer the backup image to the location where the image must be stored. It can be one of the following:</p>
<ul>
<li><p>SCP</p></li>
<li><p>SFTP</p></li>
<li><p>FTP</p></li>
</ul>
<blockquote>
<p><strong>Important:</strong> Storing backup images on anonymous FTP servers is currently not supported.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>File Location</td>
<td>The location where the backup file must be stored. Provide the IP address or the hostname of the location and the complete file system path. For example: 10.10.10.10/var/backup.</td>
</tr>
<tr class="even">
<td>Username</td>
<td>User name for the backup server.</td>
</tr>
<tr class="odd">
<td>Password</td>
<td>Password for the user name of the backup server.</td>
</tr>
<tr class="even">
<td>Retention Copies</td>
<td>The number of backup copies maintained on the server.</td>
</tr>
</tbody>
</table>
<ol>
<li>Click Save.</li>
</ol>
<blockquote>
<p><strong>Note:</strong> To edit a backup schedule at a later point in time, select
the UCS Director instance and click Schedule Backup. In the subsequent
panes, edit the values of the fields and click Save.</p>
</blockquote>
<p>Viewing Backup Files for UCS Director Instances</p>
<p>The Backups tab displays the list of backup files that have been created
for all UCS Director instances claimed in Intersight. On this tab, you
can view the following information:</p>
<ul>
<li>
<p>Last Modified—The time when backups were performed on UCS Director
instances.</p>
</li>
<li>
<p>Status—The status of backup processes. It can be Failed or
Completed.</p>
</li>
<li>
<p>Backup Server IP—The IP address of the backup server where the
backup files are stored.</p>
</li>
<li>
<p>Location—The complete path to the backup file on the backup server.</p>
</li>
<li>
<p>Backup File Name—The name of the backup file created.</p>
</li>
<li>
<p>File Size (MB)—The size of the backup file.</p>
</li>
<li>
<p>Duration (minutes)—The duration of the backup process.</p>
</li>
<li>
<p>Instance—The IP address of the UCS Director instance.</p>
</li>
<li>
<p>Organizations—The organizations that the UCS Director instance is
associated with.</p>
</li>
</ul>
<p>Restoring a Backup Image for a UCS Director Instance</p>
<p>You can restore a backup image that is of the same version that is
running on the selected UCS Director instance. While restoring a backup
image, if more recent versions of connector packs that are currently
installed on the UCS Director instance are available, then the restore
process will also upgrade the connector pack versions to the latest
versions.</p>
<ol>
<li>
<p>From the table view of the UCS Director instances, select a UCS
Director instance and click Restore From Backup.</p>
</li>
<li>
<p>In the Backup Selection page, use the toggle bar to indicate if you
want to exclude the licensing information while restoring the backup
image.</p>
</li>
<li>
<p>Review the list of backup files available for the selected UCS
Director instance and select the backup file to restore.</p>
</li>
</ol>
<blockquote>
<p><strong>Important:</strong> The list of backup files displayed is dependent on the
platform version of the UCS Director instance that you selected in
step 1.</p>
</blockquote>
<ol>
<li>
<p>Click Next.</p>
</li>
<li>
<p>In the Backup Location page, modify the following fields, if
required:</p>
</li>
</ol>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Protocol</td>
<td><p>Protocol to transfer the backup image to the location where the image must be restored. It can be one of the following:</p>
<ul>
<li><p>SCP</p></li>
<li><p>SFTP</p></li>
<li><p>FTP</p></li>
</ul>
<p>This value is auto-populated. You cannot modify the protocol if you have chosen to restore from a local backup image.</p></td>
</tr>
<tr class="even">
<td>File Location</td>
<td>This field is auto-populated based on the backup image that you selected in the Backup Selection page.</td>
</tr>
<tr class="odd">
<td>Username</td>
<td>User name of the backup server name.</td>
</tr>
<tr class="even">
<td>Password</td>
<td>Password of the user name of the backup server name.</td>
</tr>
</tbody>
</table>
<ol>
<li>
<p>Click Next.</p>
</li>
<li>
<p>In the Summary page, review the information that is displayed and
click Restore.</p>
</li>
<li>
<p>To view the progress of the restore process, choose Requests on the
header pane and click View All.</p>
</li>
<li>
<p>Click a workflow name to view the details of the process.</p>
</li>
</ol>

	
	
	
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/twitter" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/stack" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 Cisco Systems All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small>
	
		<p class="mt-2"><a href="/about/">About Goldydocs</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js" integrity="sha512-E/owfVh8/U1xwhvIT4HSI064DRc1Eo/xf7AYax84rt9gVqA8tc/JNH/lvTl1tuw9PUHQIMGUtObkjYkgRjFqAA==" crossorigin="anonymous"></script>
<style>
.markmap > svg {
  width: 100%;
  height: 300px;
}
</style>
<script>
window.markmap = {
  autoLoader: {
      manual: true,
      onReady() {
        const { autoLoader, builtInPlugins } = window.markmap;
        autoLoader.transformPlugins = builtInPlugins.filter(plugin => plugin.name !== 'prism');
      },
  },
};
</script>
<script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>
<script src='/js/deflate.js'></script>
<script src="/js/main.min.0df8230201e8a69481dceaf8138a4187f74aaa2cbd4771f365bdf85869c9d57a.js" integrity="sha256-DfgjAgHoppSB3Or4E4pBh/dKqiy9R3HzZb34WGnJ1Xo=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>