<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.110.0">
<link rel="canonical" type="text/html" href="http://localhost:8080/docs/ico/executors/">
<link rel="alternate" type="application/rss&#43;xml" href="http://localhost:8080/docs/ico/executors/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Executors | Cisco Intersight Help Center</title>
<meta name="description" content="Intersight Orchestrator allows workflow designers to perform executor tasks on endpoint in workflows. For more information, see:
">
<meta property="og:title" content="Executors" />
<meta property="og:description" content="Intersight Orchestrator allows workflow designers to perform executor tasks on endpoint in workflows. For more information, see:
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:8080/docs/ico/executors/" /><meta property="og:site_name" content="Cisco Intersight Help Center" />
<meta itemprop="name" content="Executors">
<meta itemprop="description" content="Intersight Orchestrator allows workflow designers to perform executor tasks on endpoint in workflows. For more information, see:
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Executors"/>
<meta name="twitter:description" content="Intersight Orchestrator allows workflow designers to perform executor tasks on endpoint in workflows. For more information, see:
"/>




<link rel="preload" href="/scss/main.min.e11efc06b81857df9076372682bad7c32557f08e26a3110dc68e0400e7c28a9c.css" as="style">
<link href="/scss/main.min.e11efc06b81857df9076372682bad7c32557f08e26a3110dc68e0400e7c28a9c.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-00000000-0');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">Cisco Intersight Help Center</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/no/">Norsk</a>
	
	<a class="dropdown-item" href="/fa/">فارسی</a>
	
</div></li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.be7c0104b838904556a506e9b6669232.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/ico/executors/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Executors</h1>
<div class="lead">Intersight Orchestrator allows workflow designers to perform executor tasks on endpoint in workflows. For more information, see:</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-4cfa2155ed48e5d2c70094bc9e28d849">Ansible</a></li>


    
  
    
    
	
<li>2: <a href="#pg-44ac04f730d33a9fa74fb36f863cb2ce">Ansible Resuable</a></li>


    
  
    
    
	
<li>3: <a href="#pg-ab1b24fab9dd0f0511926c1acc3c654f">Powershell</a></li>


    
  
    
    
	
<li>4: <a href="#pg-0046162e1873ec9b264b5e8ca7cf2245">SSH Commands</a></li>


    
  
    
    
	
<li>5: <a href="#pg-f9a3efd1d619b84748a90c844dfa331b">SSH Commands - Reusable</a></li>


    
  
    
    
	
<li>6: <a href="#pg-7b3c262dd7e4461a6491d762ea4d9103">Sample File</a></li>


    
  
    
    
	
<li>7: <a href="#pg-c69e288e27b8f8f2f2965c7f6b956d58">WebAPI</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-4cfa2155ed48e5d2c70094bc9e28d849">1 - Ansible</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run Ansible Playbook on the Ansible Controller node using the <strong>Invoke Ansible Playbook</strong> reusable task in the workflow.</div>
	<p>This is a sample text.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;content-desktop&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">nav</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;collapse td-sidebar-nav&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;td-section-nav&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;td-sidebar-nav__section pr-md-3 ul-0&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;m-docs-li&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;/docs/&#34;</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;m-docs&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">span</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Documentation<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">span</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;ul-1&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;td-sidebar-nav__section-title td-sidebar-nav__section with-child&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;m-docsgettingstarted-li&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;/docs/gettingstarted/&#34;</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;align-left pl-0 td-sidebar-link td-sidebar-link__section&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;m-docsgettingstarted&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">span</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Getting Started<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">span</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;ul-2 foldable&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;m-docsgettingstartedoverview-li&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;/docs/gettingstarted/overview/&#34;</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;align-left pl-0 td-sidebar-link td-sidebar-link__page&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;m-docsgettingstartedoverview&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">span</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Overview<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">span</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="background-color:#dfdfdf"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span></span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="background-color:#dfdfdf"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></span><span style="background-color:#dfdfdf"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></span><span style="background-color:#dfdfdf"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000">Param</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">switch</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">EnableBasicAuth</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">switch</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">SKipNetworkProfileCheck</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">switch</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">ForceNewSSLCert</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">SubjectName</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#000">env</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">COMPUTERNAME</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">int</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">CertValidityDays</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1095</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex; background-color:#dfdfdf"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Function</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">SelfSignedCert</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Param</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">string</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">SubjectName</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">[</span><span style="color:#204a87;font-weight:bold">int</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">ValidDays</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1095</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex; background-color:#dfdfdf"><span>
</span></span><span style="display:flex; background-color:#dfdfdf"><span>    <span style="color:#a40000">$</span><span style="color:#000">hostnonFQDN</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#000">env</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">computerName</span>
</span></span><span style="display:flex; background-color:#dfdfdf"><span>    <span style="color:#a40000">$</span><span style="color:#000">hostFQDN</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">System</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Net</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Dns</span><span style="color:#000;font-weight:bold">]::</span><span style="color:#000">GetHostByName</span><span style="color:#000;font-weight:bold">((</span><span style="color:#a40000">$</span><span style="color:#000">env</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">computerName</span><span style="color:#000;font-weight:bold">)).</span><span style="color:#000">Hostname</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">SignatureAlgorithm</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;SHA256&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">name</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">COM</span> <span style="color:#4e9a06">&#34;X509Enrollment.CX500DistinguishedName.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Encode</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CN=$SubjectName&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">COM</span> <span style="color:#4e9a06">&#34;X509Enrollment.CX509PrivateKey.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ProviderName</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Microsoft Enhanced RSA and AES Cryptographic Provider&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">KeySpec</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Length</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">4096</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">SecurityDescriptor</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;D:PAI(A;;0xd01f01ff;;;SY)(A;;0xd01f01ff;;;BA)(A;;0x80120089;;;NS)&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">MachineContext</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">serverauthoid</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">COM</span> <span style="color:#4e9a06">&#34;X509Enrollment.CObjectId.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">serverauthoid</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">InitializeFromValue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1.3.6.1.5.5.7.3.1&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">ekuoids</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">COM</span> <span style="color:#4e9a06">&#34;X509Enrollment.CObjectIds.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">ekuoids</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#a40000">$</span><span style="color:#000">serverauthoid</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">ekuext</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">COM</span> <span style="color:#4e9a06">&#34;X509Enrollment.CX509ExtensionEnhancedKeyUsage.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">ekuext</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">InitializeEncode</span><span style="color:#000;font-weight:bold">(</span><span style="color:#a40000">$</span><span style="color:#000">ekuoids</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">cert</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">COM</span> <span style="color:#4e9a06">&#34;X509Enrollment.CX509CertificateRequestCertificate.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">InitializeFromPrivateKey</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#a40000">$</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Subject</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#000">name</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Issuer</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Subject</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NotBefore</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">Get</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Date</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">AddDays</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NotAfter</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#a40000">$</span><span style="color:#000">cert</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NotBefore</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">AddDays</span><span style="color:#000;font-weight:bold">(</span><span style="color:#a40000">$</span><span style="color:#000">ValidDays</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">SigOID</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">New</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">Object</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">ComObject</span> <span style="color:#000">X509Enrollment</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">CObjectId</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a40000">$</span><span style="color:#000">SigOID</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">InitializeFromValue</span><span style="color:#000;font-weight:bold">(([</span><span style="color:#000">Security</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Cryptography</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Oid</span><span style="color:#000;font-weight:bold">]</span><span style="color:#a40000">$</span><span style="color:#000">SignatureAlgorithm</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">Value</span><span style="color:#000;font-weight:bold">)</span></span></span></code></pre></td></tr></table>
</div>
</div>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-44ac04f730d33a9fa74fb36f863cb2ce">2 - Ansible Resuable</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run Ansible Playbook on the Ansible Controller node using the <strong>Invoke Ansible Playbook</strong> reusable task in the workflow.</div>
	<h1 id="executors--invoke-ansible-playbook---reusable-task">Executors – Invoke Ansible Playbook - Reusable Task</h1>
<h2 id="supported-targets">Supported Targets</h2>
<p>The Invoke Ansible Playbook task can be run only on the targets that are added as an Ansible Endpoint target type in Cisco Intersight.</p>
<p>The <strong>Invoke Ansible Playbook</strong> task is executed as an orchestrator task and does not include the management of the Ansible Controller node.</p>
<p>To run the Ansible Playbook task on the Ansible Controller node from Cisco Intersight, ensure that:</p>
<ul>
<li>
<p>The Ansible target is reachable through Intersight Assist when hosted on the customer premises.</p>
</li>
<li>
<p>The Ansible Playbook modules and Ansible Playbook executables required to run the playbooks are already installed on the Ansible Controller node.</p>
</li>
<li>
<p>The Ansible Controller node has password-less SSH access to the hosts.</p>
</li>
<li>
<p>The Ansible Controller node can resolve the endpoint hostnames if the Ansible Host Inventory file specifies the hostnames.</p>
</li>
</ul>
<p>For more information on Intersight Target Claim, see <a href="/help/getting_started/claim_targets#target_claim_using_intersight_assist">Target Claim Using Intersight Assist</a>.</p>
<h2 id="using-the-executor-ansible-playook-reusable-task">Using the Executor Ansible Playook Reusable Task</h2>
<p>Use the <strong>Invoke Ansible Playbook</strong> from the <strong>Executors</strong> section in the Intersight Orchestrator Task Designer UI to create a Invoke Ansible Playbook reusable task.</p>
<p>For more information on tasks, see <a href="/help/resources/Task_Designer#defining_a_task">Defining a Task</a></p>
<p>The following table explains the Invoke Ansible Playbook task properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>General</td>
<td>For more information, see <a href="/help/resources/Task_Designer#defining_a_task">Defining a Task</a>.</td>
</tr>
<tr>
<td>Inputs</td>
<td>Ansible Controller—The target on which the Ansible Playbook task is run. By default, the Ansible Controller task input is created for the task. <br>		The Ansible Playbook target must be in the Connected state.</td>
</tr>
<tr>
<td>Outputs</td>
<td>To extract the required values from the command responses and map it to task outputs, do the following:</td>
</tr>
</tbody>
</table>
<ol>
<li>
<p>Create Task Output—Specify the task output.</p>
</li>
<li>
<p>Map to Task Output—Check the check box to map the task output to an command response.</p>
</li>
<li>
<p>Task Output—Select the command response to which the task output is mapped. The options available are:</p>
<ul>
<li>
<p><em>Exit Code | Invoke Ansible Playbook</em></p>
</li>
<li>
<p><em>Execution Summary | Invoke Ansible Playbook</em></p>
</li>
<li>
<p><em>Execution Log Path | Invoke Ansible Playbook</em></p>
</li>
</ul>
</li>
</ol>
<p>|
|   |   |
|   |   |
|   |   |
|   |   |</p>
<p>.</p>
<p>For example, if you create two task outputs <em>Exitcode</em> and <em>Logapth</em> and map it to <em>Exit Code | Invoke Ansible Playbook</em> and <em>Execution Log Path | Invoke Ansible Playbook</em> respectively, after the workflow is executed, the output will show:</p>
<p>The following table explains the Invoke Ansible Playbook executor input:</p>
<p>Property</p>
<p>Description</p>
<p>Playbook Path</p>
<p>The path of the Ansible Playbook file that resides on the Ansible Controller node added as Ansible Endpoint target in Intersight.</p>
<ul>
<li>
<p>Static Value—The path of the Ansible Playbook.</p>
</li>
<li>
<p>Direct Mapping—Select an existing task input or task output field.</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task&rsquo;s input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>Host Inventory</p>
<p>The path of the host inventory file that resides on the Ansible Controller or a comma-separated list of hosts on which the Ansible Playbook task is run.</p>
<ul>
<li>
<p>Static Value—The path of the host inventory file that resides on the Ansible Controller or a comma-separated list of hosts.</p>
<p>For example, you can enter the hostname as <a href="mailto:root@10.10.10.10">root@10.10.10.10</a>,</p>
<p>Note:</p>
<p>The hostname must be suffixed with a comma (,).</p>
</li>
<li>
<p>Direct Mapping—Select the path from the task input or task output.</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task&rsquo;s input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>Command Timeout</p>
<p>The command timeout in seconds for the execution of the Ansible Playbook. The range is 10 to 7200 seconds.</p>
<p>The default timeout is 600 seconds.</p>
<ul>
<li>
<p>Static Value—The command timeout in seconds.</p>
</li>
<li>
<p>Direct Mapping—Select the command timeout from the task input or task output.</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task&rsquo;s input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>Command Line Argument</p>
<p>The optional command line arguments required to run the Ansible playbook.</p>
<ul>
<li>
<p>Static Value—The command line argument.</p>
</li>
<li>
<p>Direct Mapping—Select the input from the task input or task output.</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task&rsquo;s input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>Escape character backslash(\) needs to be used when the command line arguments contain double quotes(&quot;).</p>
<p>The following command line options are not supported by the Ansible Playbook task.</p>
<ul>
<li>
<p>-vvv</p>
</li>
<li>
<p>-vvvv</p>
</li>
<li>
<p>-k, -K</p>
</li>
<li>
<p>-c</p>
</li>
<li>
<p>--connection</p>
</li>
<li>
<p>--sftp-extra-args</p>
</li>
<li>
<p>--scp-extra-args</p>
</li>
<li>
<p>--ask-vault-password</p>
</li>
<li>
<p>--step</p>
<p>For information on the available command line arguments, see <a href="https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html">https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html</a>.</p>
</li>
</ul>
<p>The following table explains the Ansible Playbook executor Outputs:</p>
<p>Property</p>
<p>Description</p>
<p>Exit Code</p>
<p>The exit code after the execution of the Ansible Playbook against the given endpoint.</p>
<p>Execution Summary</p>
<p>The summary after the execution of Ansible Playbook against the given endpoint.</p>
<p>Execution Log Path</p>
<p>The Ansible execution log path on the Ansible Control node after the execution of Ansible Playbook against the given endpoint.</p>
<p>The following table explains the Invoke Ansible Playbook task Outcomes:</p>
<p>Property</p>
<p>Description</p>
<p>Outcomes</p>
<p>To set the custom execution status and status message based on the obtained outputs, do the following:</p>
<ol>
<li>
<p>Click Add Outcome.</p>
</li>
<li>
<p>Name—The name for the outcome.</p>
</li>
<li>
<p>Outcome Type—Select the outcome type. The options available are Success, Skip To Success, Error, Terminal Error, Skip Task Execution, or Status.</p>
<p>For more information on Outcomes, see <a href="/help/resources/Task_Designer#outcomes">Outcomes</a></p>
</li>
<li>
<p>Message—The message when the condition is met.</p>
</li>
<li>
<p>Condition—The condition for the outcome.</p>
<p>For example, {{eq .global.InvokeAnsiblePlaybook1.output.ExitCode &ldquo;0&rdquo;}}.</p>
<p>This condition checks whether the output `ExitCode` of the executor named `InvokeAnsiblePlaybook1` equals to 0. If the condition is true, the task status is set to the value provided in `Outcome Type` and task status message is set to value provided in `Message`.</p>
</li>
</ol>
<h2 id="template-parameters">Template Parameters</h2>
<p>The request body template can refer to values from task inputs, previous task outputs, or implicit parameters. The following table explains the template parameters.</p>
<p>Prefix/Format</p>
<p>Description</p>
<pre><code>{{.global.task.input.&lt;ParameterName&gt;}}
</code></pre>
<p>Task input reference.</p>
<pre><code>{{.global.&lt;ExecutorRefName&gt;.output.&lt;ParameterName&gt;}}
</code></pre>
<p>Previous executor output reference. <strong>ExecutorRefName</strong> is the name of the previous executor having output <strong>ParameterName</strong>.</p>
<pre><code>{{.security.AccountMoid}}
</code></pre>
<p>Implicit parameter reference to Account MoID under which the workflow is running.</p>
<pre><code>{{.security.OrganizationMoid}}
</code></pre>
<p>Implicit parameter reference to Organization MoID under which the workflow is running.</p>
<h2 id="template-functions">Template Functions</h2>
<p>The template engine has in-built functions to transform values before they are populated in the request templates. The following table explains the functions supported in <strong>Invoke SSH Commands</strong> task.</p>
<p>Function</p>
<p>Description</p>
<p>TrimSpace</p>
<p>Returns a string after removing white spaces from a the string.</p>
<p>Example:</p>
<pre><code>{{TrimSpace .global.task.input.HostName}}
</code></pre>
<p>ContainsString</p>
<p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<pre><code>{{if (ContainsString .global.task.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}
</code></pre>
<p>FindAllString</p>
<p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<pre><code>{{(FindAllString .global.task.input.NumberString \”([0-9]+)\”)}}
</code></pre>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p>
<p>ToJson</p>
<p>Converts a value to a JSON format.</p>
<p>Example:</p>
<pre><code>{{(FindAllString .global.task.input.NumberString \&quot;([0-9]+)\&quot;) | ToJson}}
</code></pre>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p>
<p>AsArray</p>
<p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<pre><code>{{AsArray .global.task.output.serverMo}}
</code></pre>
<p>The above example returns an array of one server Mo.</p>
<p>Substring</p>
<p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<pre><code>{{Substring .global.task.input.StorageId 2 6}}
</code></pre>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p>
<p>IpToCidr</p>
<p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<pre><code>{{IpToCidr .global.task.input.Ip .global.task.input.Netmask}}
</code></pre>
<p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p>
<p>LookupInSlice</p>
<p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<pre><code>{{LookupInSlice .global.task.input.IpAddressList \”10.10.10.10\”}}
</code></pre>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p>
<p>Index</p>
<p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<pre><code>{{ index .global.task.input.nodes .global.task.input.idx }} 
</code></pre>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p>
<p>Itob</p>
<p>Converts an integer to a boolean.</p>
<p>Example:</p>
<pre><code>{{ Itob global.task.input.OnOffFlip }} 
</code></pre>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p>
<p>Itoa</p>
<p>Converts a given number to a string value.</p>
<p>Example:</p>
<pre><code>{{ Itoa global.task.input.Port }} 
</code></pre>
<p>The above example returns “12345” for input 12345.</p>
<p>Itof</p>
<p>Converts a given integer to a float value.</p>
<p>Example:</p>
<pre><code>{{ Itof global.task.input.Rate }}
</code></pre>
<p>The above example returns 15.0 for an input 15.</p>
<p>Btoa</p>
<p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<pre><code>{{ Btoa global.task.input.OnOffFlip }}
</code></pre>
<p>The above example returns “true” for input true.</p>
<p>Btoi</p>
<p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<pre><code>{{ Btoi global.task.input.OnOffFlip }}
</code></pre>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p>
<p>Atob</p>
<p>Converts the given string into a boolean value.</p>
<p>Example:</p>
<pre><code>{{ Atob global.task.input.OnOffFlip }}Returns true for input “true”
</code></pre>
<p>Atoi</p>
<p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<pre><code>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”
</code></pre>
<p>Ftoa</p>
<p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<pre><code>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”
</code></pre>
<p>Ftoi</p>
<p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<pre><code>{{ Ftoi global.task.input.Rate }}
</code></pre>
<p>The above example returns 15 for an input 15.833.</p>
<p>Eval</p>
<p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<pre><code>{{Eval \&quot;{{.global.task.input.Size}} / 1024\&quot; .}}GB
</code></pre>
<h2 id="template-engine-syntax">Template Engine Syntax</h2>
<p>The template engine uses <code>prefix</code> notation for the statements. In case of operational statements, the operators are specified before the operands. All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check), <strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the client error code range 400 – 500. Note that the template engine supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and <strong>lt</strong> are specified before their operands.</p>
<pre><code>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}
</code></pre>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation syntax. This section has some examples of these conditional statements.</p>
<pre><code>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}

{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}

{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}
</code></pre>
<h2 id="invoke-ansible-playbook-reusable-task-example">Invoke Ansible Playbook Reusable Task Example</h2>
<p><strong>Example: <strong>Create a reusable task to run Ansible Playbook on the hosts</strong></strong></p>
<p>This example task runs on an Intersight Ansible Playbook controller. In this task, the Ansible Playbook path and host inventory list fields are provided by the task input fields.</p>
<p>The task properties required for this example are as following:</p>
<p>Property</p>
<p>Description</p>
<p>General</p>
<ul>
<li>
<p>Organization—The organization that you are creating the task in.</p>
</li>
<li>
<p>Display Name—A user friendly short name to identify the task definition.</p>
</li>
<li>
<p>Reference Name—The name of the Task definition.</p>
</li>
</ul>
<p>Inputs</p>
<ul>
<li>
<p>Ansible Controller—By default, the Ansible Controller task input is created for the task.</p>
<ul>
<li>
<p>Reference Name—AnsibleController</p>
</li>
<li>
<p>Type—Target Data Type</p>
</li>
</ul>
</li>
<li>
<p>Playbook Path—The user defined task input for the path of the Ansible Playbook.</p>
<ul>
<li>
<p>Reference Name—PlaybookPath</p>
</li>
<li>
<p>Type—String</p>
</li>
</ul>
</li>
<li>
<p>Host Inventory—The user defined task input for the path of the host inventory file.</p>
<ul>
<li>
<p>Reference Name—HostInventory</p>
</li>
<li>
<p>Type—String</p>
</li>
</ul>
</li>
</ul>
<p>Outputs</p>
<ul>
<li>
<p>ExitCode—Task output</p>
<ul>
<li>
<p>Reference Name—ExitCode</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Exit Code | Invoke Ansible Playbook</em></p>
</li>
</ul>
</li>
<li>
<p>Summary—Task output</p>
<ul>
<li>
<p>Reference Name—Summary</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Execution Summary | Invoke Ansible Playbook</em></p>
</li>
</ul>
</li>
<li>
<p>Logpath—Task output</p>
<ul>
<li>
<p>Reference Name—Logpath</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Execution Log Path | Invoke Ansible Playbook</em></p>
</li>
</ul>
</li>
</ul>
<p>The following table explains the Invoke Ansible Playbook executor inputs:</p>
<p>Property</p>
<p>Description</p>
<p>Playbook Path</p>
<p>Direct Mapping—{{.global.task.input.PlaybookPath}}</p>
<p>Host Inventory</p>
<p>Direct Mapping—{{.global.task.input.HostInventory}}</p>
<p>Command Timeout</p>
<p>Default value.</p>
<p>Command Line Argument</p>
<p>Static—-vv</p>
<p>Command line argument &ndash;vv is for the Ansible execution log verbosity.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ab1b24fab9dd0f0511926c1acc3c654f">3 - Powershell</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run PowerShell Script on a PowerShell target endpoint using the Invoke PowerShell Script embedded task in the workflow.</div>
	<h1 id="overview">Overview</h1>
<p>The Invoke PowerShell Script task is an out-of-box solution that allows you to automate PowerShell operations on the PowerShell target that is added as a PowerShell endpoint target in Cisco Intersight. This feature allows a workflow designer to extend the automation capabilities of the workflow engine beyond what is natively available in the task library and interact with the PowerShell target endpoint.
For more information, see <a href="Docs_on_Intersight_Help_Center">Intersight Kubernetes Service</a></p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/MldPSHPYslU" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h2 id="supported-targets">Supported Targets</h2>
<p>The Invoke PowerShell Script task can be run only on the targets that are added as a PowerShell endpoint target type in Cisco Intersight.</p>
<p>To run the PowerShell Script task on the PowerShell target endpoint from Cisco Intersight, ensure that:</p>
<ul>
<li>
<p>The endpoint is reachable through Intersight Assist.</p>
</li>
<li>
<p>The endpoint target is in the Connected state.</p>
</li>
<li>
<p>PowerShell Remoting is enabled on the target endpoint to allow the endpoint to receive PowerShell remote commands.</p>
</li>
</ul>
<p>To enable PowerShell Remoting on a PowerShell endpoint target, execute the following remoting script on the PowerShell target endpoint:</p>
<div class="td-card card">
  
  
    
  
  
  
  <div class="card-body code p-l0 m-0">
      <pre tabindex="0"><code class="language-none" data-lang="none">
Param (
    [switch]$EnableBasicAuth = $false,
    [switch]$SKipNetworkProfileCheck = $false,
    [switch]$ForceNewSSLCert = $false,
    [string]$SubjectName = $env:COMPUTERNAME,
    [int]$CertValidityDays = 1095
)

Function New-SelfSignedCert
{
    Param (
        [string]$SubjectName,
        [int]$ValidDays = 1095
    )

    $hostnonFQDN = $env:computerName
    $hostFQDN = [System.Net.Dns]::GetHostByName(($env:computerName)).Hostname
    $SignatureAlgorithm = &#34;SHA256&#34;

    $name = New-Object -COM &#34;X509Enrollment.CX500DistinguishedName.1&#34;
    $name.Encode(&#34;CN=$SubjectName&#34;, 0)

    $key = New-Object -COM &#34;X509Enrollment.CX509PrivateKey.1&#34;
    $key.ProviderName = &#34;Microsoft Enhanced RSA and AES Cryptographic Provider&#34;
    $key.KeySpec = 1
    $key.Length = 4096
    $key.SecurityDescriptor = &#34;D:PAI(A;;0xd01f01ff;;;SY)(A;;0xd01f01ff;;;BA)(A;;0x80120089;;;NS)&#34;
    $key.MachineContext = 1
    $key.Create()

    $serverauthoid = New-Object -COM &#34;X509Enrollment.CObjectId.1&#34;
    $serverauthoid.InitializeFromValue(&#34;1.3.6.1.5.5.7.3.1&#34;)
    $ekuoids = New-Object -COM &#34;X509Enrollment.CObjectIds.1&#34;
    $ekuoids.Add($serverauthoid)
    $ekuext = New-Object -COM &#34;X509Enrollment.CX509ExtensionEnhancedKeyUsage.1&#34;
    $ekuext.InitializeEncode($ekuoids)

    $cert = New-Object -COM &#34;X509Enrollment.CX509CertificateRequestCertificate.1&#34;
    $cert.InitializeFromPrivateKey(2, $key, &#34;&#34;)
    $cert.Subject = $name
    $cert.Issuer = $cert.Subject
    $cert.NotBefore = (Get-Date).AddDays(-1)
    $cert.NotAfter = $cert.NotBefore.AddDays($ValidDays)

    $SigOID = New-Object -ComObject X509Enrollment.CObjectId
    $SigOID.InitializeFromValue(([Security.Cryptography.Oid]$SignatureAlgorithm).Value)

    [string[]] $AlternativeName  += $hostnonFQDN
    $AlternativeName += $hostFQDN
    $IAlternativeNames = New-Object -ComObject X509Enrollment.CAlternativeNames

    foreach ($AN in $AlternativeName)
    {
        $AltName = New-Object -ComObject X509Enrollment.CAlternativeName
        $AltName.InitializeFromString(0x3,$AN)
        $IAlternativeNames.Add($AltName)
    }

    $SubjectAlternativeName = New-Object -ComObject X509Enrollment.CX509ExtensionAlternativeNames
    $SubjectAlternativeName.InitializeEncode($IAlternativeNames)

    [String[]]$KeyUsage = (&#34;DigitalSignature&#34;, &#34;KeyEncipherment&#34;)
    $KeyUsageObj = New-Object -ComObject X509Enrollment.CX509ExtensionKeyUsage
    $KeyUsageObj.InitializeEncode([int][Security.Cryptography.X509Certificates.X509KeyUsageFlags]($KeyUsage))
    $KeyUsageObj.Critical = $true

    $cert.X509Extensions.Add($KeyUsageObj)
    $cert.X509Extensions.Add($ekuext)
    $cert.SignatureInformation.HashAlgorithm = $SigOID
    $CERT.X509Extensions.Add($SubjectAlternativeName)
    $cert.Encode()

    $enrollment = New-Object -COM &#34;X509Enrollment.CX509Enrollment.1&#34;
    $enrollment.InitializeFromRequest($cert)
    $certdata = $enrollment.CreateRequest(0)
    $enrollment.InstallResponse(2, $certdata, 0, &#34;&#34;)

    # extract/return the thumbprint from the generated cert
    $parsed_cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2
    $parsed_cert.Import([System.Text.Encoding]::UTF8.GetBytes($certdata))

    return $parsed_cert.Thumbprint
}

# Setup error handling
Trap
{
    $_
    Exit 1
}

# Treat non terminating erros as terminating errors
$ErrorActionPreference = &#34;Stop&#34;

# Get the ID and security principal of the current user account
$myWindowsID=[System.Security.Principal.WindowsIdentity]::GetCurrent()
$myWindowsPrincipal=new-object System.Security.Principal.WindowsPrincipal($myWindowsID)

# Get the security principal for the Administrator role
$adminRole=[System.Security.Principal.WindowsBuiltInRole]::Administrator

# Check to see if we are currently running &#34;as Administrator&#34;
if (-Not $myWindowsPrincipal.IsInRole($adminRole))
{
    Write-Output &#34;ERROR: You need elevated Administrator privileges in order to run this script.&#34;
    Write-Output &#34;       Start Windows PowerShell by using the Run as Administrator option.&#34;
    Exit 2
}


# Ensure PowerShell version is greater that 3.0
if ($PSVersionTable.PSVersion.Major -lt 3) {
    Throw &#34;Minimum required PowerShell version is 3.0&#34;
}

# Ensure WinRM is present on the machine
if (!(Get-Service &#34;WinRM&#34; -ErrorAction SilentlyContinue)) {
    Throw &#34;WinRM service is not present on the machine&#34;
}

# Ensure WinRM is running on the machine
if (!(Get-Service &#34;WinRM&#34; -ErrorAction SilentlyContinue | where {$_.Status -eq &#34;Running&#34;})) {
    Write-Output &#34;WinRM service is not running&#34;
    Write-Output &#34;Attempting to start WinRM service&#34;
    Start-Service &#34;WinRM&#34;
}

# Check if PS Remoting is already enabled, if not enable it
# WinRM should be running; check that we have a PS session config.
if (!(Get-PSSessionConfiguration -Verbose:$false) -or (!(Get-ChildItem WSMan:\localhost\Listener)))
{
  if ($SkipNetworkProfileCheck) {
    Write-Verbose &#34;Enabling PS Remoting without checking Network profile.&#34;
    Enable-PSRemoting -SkipNetworkProfileCheck -Force -ErrorAction Stop
    Write-Output &#34;Enabled PS Remoting.&#34;
  }
  else {
    Write-Verbose &#34;Enabling PS Remoting.&#34;
    Enable-PSRemoting -Force -ErrorAction Stop
    Write-Output &#34;Enabled PS Remoting.&#34;
  }
}
else
{
    Write-Verbose &#34;PS Remoting is already enabled.&#34;
}

# Ensure LocalAccountTokenFilterPolicy is set to 1
# https://github.com/ansible/ansible/issues/42978
# Needed for NTLM authentication
$token_path = &#34;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&#34;
$token_prop_name = &#34;LocalAccountTokenFilterPolicy&#34;
$token_key = Get-Item -Path $token_path
$token_value = $token_key.GetValue($token_prop_name, $null)
if ($token_value -ne 1) {
    Write-Verbose &#34;Setting LocalAccountTOkenFilterPolicy to 1&#34;
    if ($null -ne $token_value) {
        Remove-ItemProperty -Path $token_path -Name $token_prop_name
    }
    New-ItemProperty -Path $token_path -Name $token_prop_name -Value 1 -PropertyType DWORD &gt; $null
}


# Make sure there is a SSL listener.
$listeners = Get-ChildItem WSMan:\localhost\Listener
if (!($listeners | Where-Object {$_.Keys -like &#34;TRANSPORT=HTTPS&#34;}))
{
    # We cannot use New-SelfSignedCertificate on 2012R2 and earlier
    $thumbprint = New-SelfSignedCert -SubjectName $SubjectName -ValidDays $CertValidityDays
    Write-Output &#34;Self-signed SSL certificate generated; thumbprint: $thumbprint&#34;
    # Create the hashtables of settings to be used.
    $valueset = @{
        Hostname = $SubjectName
        CertificateThumbprint = $thumbprint
    }
    $selectorset = @{
        Transport = &#34;HTTPS&#34;
        Address = &#34;*&#34;
    }
    Write-Verbose &#34;Enabling SSL listener.&#34;
    New-WSManInstance -ResourceURI &#39;winrm/config/Listener&#39; -SelectorSet $selectorset -ValueSet $valueset
    Write-Verbose &#34;Enabled SSL listener.&#34;
}
else
{
    Write-Verbose &#34;SSL listener is already active.&#34;
    # Force a new SSL cert on Listener if the $ForceNewSSLCert
    if ($ForceNewSSLCert)
    {
        # We cannot use New-SelfSignedCertificate on 2012R2 and earlier
        $thumbprint = New-SelfSignedCert -SubjectName $SubjectName -ValidDays $CertValidityDays
        Write-Verbose &#34;Self-signed SSL certificate generated; thumbprint: $thumbprint&#34;
        $valueset = @{
            CertificateThumbprint = $thumbprint
            Hostname = $SubjectName
        }
        # Delete the listener for SSL
        $selectorset = @{
            Address = &#34;*&#34;
            Transport = &#34;HTTPS&#34;
        }
        Remove-WSManInstance -ResourceURI &#39;winrm/config/Listener&#39; -SelectorSet $selectorset
        # Add new Listener with new SSL cert
        New-WSManInstance -ResourceURI &#39;winrm/config/Listener&#39; -SelectorSet $selectorset -ValueSet $valueset
    }
}

# Enable/Disable basic authentication as needed
$basicAuth = Get-Item WSMan:\localhost\Service\Auth\Basic
if ($EnableBasicAuth) {
    if ($basicAuth.Value -eq &#34;true&#34;) {
        Write-Output &#34;Basic authentication is already enabled&#34;
    } else {
        Write-Output &#34;Basic authentication is currently disabled&#34;
        Set-Item WSMan:\localhost\Service\Auth\Basic -Value $true
        Write-Output &#34;Basic authentication has been enabled&#34;
    }
} else {
    if ($basicAuth.Value -eq &#34;true&#34;) {
        Write-Output &#34;Basic authentication is currently enabled&#34;
        Set-Item WSMan:\localhost\Service\Auth\Basic -Value $false
        Write-Output &#34;Basic authentication has been disabled&#34;
    } else {
        Write-Output &#34;Basic authentication is already disabled&#34;
    }
}

# Check firewall
$rule = Get-NetFirewallRule | where {$_.DisplayName -eq &#34;Allow WinRM HTTPS&#34;}
if ($rule) {
    if ($rule.Profile.ToString() -eq &#34;Any&#34;) {
        Write-Output &#34;Firewall rule already exists for WinRM&#34;
    } else {
        Set-NetFirewallRule -DisplayName &#34;Allow WinRM HTTPS&#34; -Profile Any
    }
} else {
   Write-Output &#34;Creating firewall rule for WinRM&#34;
   New-NetFirewallRule -Profile Any -Name &#34;Allow WinRM HTTPS&#34; -DisplayName &#34;Allow WinRM HTTPS&#34; -Direction Inbound -LocalPort 5986 -Protocol &#34;TCP&#34; -Action Allow -Enabled True | Out-Null
}

# Test a remoting connection to localhost, which should work.
$httpResult = Invoke-Command -ComputerName &#34;localhost&#34; -ScriptBlock {$env:COMPUTERNAME} -ErrorVariable httpError -ErrorAction SilentlyContinue
$httpsOptions = New-PSSessionOption -SkipCACheck -SkipCNCheck -SkipRevocationCheck
$httpsResult = New-PSSession -UseSSL -ComputerName &#34;localhost&#34; -SessionOption $httpsOptions -ErrorVariable httpsError -ErrorAction SilentlyContinue
if ($httpResult -and $httpsResult)
{
    Write-Verbose &#34;HTTP: Enabled | HTTPS: Enabled&#34;
}
elseif ($httpsResult -and !$httpResult)
{
    Write-Verbose &#34;HTTP: Disabled | HTTPS: Enabled&#34;
}
elseif ($httpResult -and !$httpsResult)
{
    Write-Verbose &#34;HTTP: Enabled | HTTPS: Disabled&#34;
}
else
{
    Write-Output &#34;Unable to establish an HTTP or HTTPS remoting session.&#34;
    Throw &#34;Unable to establish an HTTP or HTTPS remoting session.&#34;
}
Write-Output &#34;PS Remoting has been successfully configured for Intersight.&#34;
</code></pre>
  </div>
</div>

<h2 id="using-the-executor-powershell-script-embedded-task">Using the Executor PowerShell Script embedded task</h2>
<p>Use the <strong>Invoke PowerShell Script</strong> from the <strong>Executors</strong> section in
the Intersight Orchestrator Workflow Designer UI to create a task for a
PowerShell Script target endpoint.</p>
<table>
<thead>
<tr>
<th>Product</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ABC</td>
<td>Sample Text</td>
</tr>
</tbody>
</table>
<p>The following table explains the PowerShell Script task properties:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>External Target</td>
<td><p>The PowerShell endpoint on which the PowerShell Script task is run.</p>
<p>The PowerShell Script target must be in the connected state.</p>
<ul>
<li><p>Static Value—Click Select External Target to select the PowerShell endpoint target from the Cisco Intersight target inventory.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Script</td>
<td><p>The PowerShell script to be executed on the endpoint.</p>
<ul>
<li><p>Static Value—The PowerShell script.</p></li>
<li><p>Direct Mapping—Select an existing workflow input or Task output field.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input. For example, FindAllString function returns a slice of all substrings that match the given regular expression in the given string.</p></li>
</ul>
<p><strong>Note:</strong> When you specify the PowerShell script statement and enable the Response Parser Type as JSON, at the time of execution of the workflow, Intersight pipes <em>ConvertTo-Json</em> to the script to get the corresponding responses as JSON output. However, PowerShell script statements do not output to the pipe command, and the workflow may fail and return the error "An empty pipe element is not allowed.". For example, for a script foreach ($x in 1,2,3,4,5) {$x} with Response Parser Type as JSON, when the workflow is executed the workflow fails and returns the error "<em>An empty pipe element is not allowed</em>".</p>
<p>You must wrap the PowerShell script statement with the $() operator, such as $(foreach ($x in 1,2,3,4,5) {$x} ) for the PowerShell script to work.</p></td>
</tr>
<tr class="odd">
<td>Timeout</td>
<td><p>The duration in seconds for which the task waits for a response from the PowerShell target endpoint.</p>
<p>The field corresponds to the wsman:OperationTimeout field in the WinRM SOAP/XML message.</p>
<ul>
<li><p>Static Value—The timeout in seconds.</p></li>
<li><p>Direct Mapping—Select the command timeout from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Response Parser</td>
<td><p>The response parser contains information about the required values, their types, and the location in the API responses. You specify the required values along with API request details. These details are used by the response parser to extract the values from the API responses.</p>
<ul>
<li><p>Static Value—Select the response type as JSON or Text.</p>
<ul>
<li><p>Enable JSON Parsing—Select enable to parse the script response and extract the data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Depth—The number of levels of the contained objects that must be included in the JSON representation.</p>
</blockquote></li>
<li><blockquote>
<p>Path—The content specific path information that identifies the parameter value within the content. The value is usually XPath or JSONPath.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Enable Text Parsing—Select enable to parse the script response and extract data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is $&lt;Name of the parameter&gt;. For example, if the value of the Regular Expression field is $&lt;ParameterName&gt;\@cisco\.com, then the Name field must be given the value - ParameterName.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$&lt;Name&gt;.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul></li>
<li><p>Direct Mapping—Select the command timeout from the Workflow input or Task output.</p></li>
</ul>
<ul>
<li><blockquote>
<p>To create a new Workflow input, select Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the task Output properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Exit Code</td>
<td>The exit code after the execution of the PowerShell script against the given endpoint.</td>
</tr>
<tr>
<td>Response</td>
<td>The response returned by the script.</td>
</tr>
<tr>
<td>Extracted Parameters</td>
<td>The list of output parameters extracted from the response.</td>
</tr>
</tbody>
</table>
<p>The following table explains the task Outcomes properties:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Outcomes</td>
<td><p>To use the extracted values from the API response to determine the task status and set the status with an appropriate message, when the conditions match, do the following:</p>
<ol type="1">
<li><p>Click Add Outcome.</p></li>
<li><p>Name—The name for the outcome.</p></li>
<li><p>Outcome Type—Select the outcome type as Success, Error, or Skip Task Execution.</p></li>
</ol>
<ol type="1">
<li><p>For more information on Outcomes, see <a href="file://E:\\help\\resources\\Task_Designer">Outcomes</a></p></li>
</ol>
<ol start="4" type="1">
<li><p>Message—The message when the condition is met.</p></li>
<li><p>Condition—The condition for the outcome.</p></li>
</ol>
<ol start="2" type="1">
<li><p>For example, {{eq .local.response.ExitCode "0"}}.</p></li>
<li><p>This condition checks whether the response exit code of API is 0.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<h2 id="using-the-executor-powershell-script-custom-task">Using the Executor PowerShell Script custom task</h2>
<p>Use the <strong>Invoke PowerShell Script</strong> from the <strong>Executors</strong> section in
the Intersight Orchestrator Task Designer UI .</p>
<p>For more information on custom tasks, see <a href="file://E:%5Chelp%5Cresources%5CTask_Designer">Defining a
Task</a></p>
<p>The following table explains the PowerShell Script custom task
properties:</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General</td>
<td><p>For more information, see <a href="file://E:\\help\\resources\\Task_Designer">Defining a Task</a></p>
<p>.</p></td>
</tr>
<tr class="even">
<td>Inputs</td>
<td>External Target—The PowerShell endpoint target on which the PowerShell script task is run.</td>
</tr>
<tr class="odd">
<td>Outputs</td>
<td><p>To extract the required values from the API responses and map it to task outputs, do the following:</p>
<ol type="1">
<li><p>Create Task Output—Specify the task output.</p></li>
<li><p>Map to Task Output—Check the check box to map the task output to an API response.</p></li>
<li><p>Task Output—Select the API response to which the task output is mapped. The options available are:</p></li>
</ol>
<ul>
<li><p><em>Exit Code | Invoke PowerShell Script</em></p></li>
<li><p><em>Response | Invoke PowerShell Script</em></p></li>
<li><p><em>Extracted Parameters | Invoke PowerShell Script</em></p></li>
</ul>
<p>For example, if you create a new task output <em>New Exit Code</em> and map it to <em>Exit Code | Invoke PowerShell Script</em>, after the workflow is executed, the output will show:</p>
<p>.<br />
└── Outputs/<br />
    ├── ConfigResults:[ 1 ]/<br />
    │   └── Object:{ 3 }/<br />
    │       ├── ConfigResCtx:{ 1 }/<br />
    │       │   └── EntityData:{ 1 }/<br />
    │       │       └── task:workflow.PowerShellApiTask<br />
    │       ├── State:Ok<br />
    │       └── Type:Config<br />
    ├── Custom_Task_Output:Handles NPM(K) PM(K) WS(K) CPU(s) Id SI ProcessName/<br />
    │                        ----- ------ ----- ----- ------ -- -- -----------<br />
    │                       264 16 4880 24808 1.11 2600 2 ApplicationFrameHost<br />
    │                       405 28 109036 5628 85.55 2112 2 chrome<br />
    │                       ...<br />
    └── New Exit Code:0</p></td>
</tr>
</tbody>
</table>
<p>The following table explains the PowerShell Script custom task input:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Script</td>
<td><p>The PowerShell script to be executed on the target endpoint.</p>
<ul>
<li><p>Static Value—The PowerShell Script.</p></li>
<li><p>Direct Mapping—Select an existing Task input or Task output field.</p></li>
</ul>
<blockquote>
<p><strong>Note:</strong> When you use Direct Mapping and select a task input, and then execute the workflow it fails and returns the error <em>map[Text:get-service : The term 'map[Text:get-service' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.</em>.</p>
<p>You must prefix <em>.Text</em> to the Direct Mapping input in Advanced Mapping. For example, for a task input Script, the Advanced Mapping input should be{{.global.task.input.Script.Text}}</p>
</blockquote>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Timeout</td>
<td><p>The duration in seconds for which the task waits for a response from the PowerShell target endpoint.</p>
<p>The field corresponds to the wsman:OperationTimeout field in the WinRM SOAP/XML message.</p>
<ul>
<li><p>Static Value—The timeout in seconds.</p></li>
<li><p>Direct Mapping—Select the command timeout from the Task input or Task output.</p></li>
<li><p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task's input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p></li>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Response Parser</td>
<td><p>The response parser contains information about the required values, their types, and the location in the API responses. You specify the required values along with API request details. These details are used by the response parser to extract the values from the API responses.</p>
<ul>
<li><p>Static Value—Select the response type as JSON or Text.</p>
<ul>
<li><p>Enable JSON Parsing—Select enable to parse the script response and extract the data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Depth—The number of levels of the contained objects that must be included in the JSON representation.</p>
</blockquote></li>
<li><blockquote>
<p>Path—The content specific path information that identifies the parameter value within the content. The value is usually XPath or JSONPath.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul>
<ul>
<li><p>Enable Text Parsing—Select enable to parse the script response and extract data from it.</p></li>
</ul>
<ul>
<li><blockquote>
<p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is $&lt;Name of the parameter&gt;. For example, if the value of the Regular Expression field is $&lt;ParameterName&gt;\@cisco\.com, then the Name field must be given the value - ParameterName.</p>
</blockquote></li>
<li><blockquote>
<p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$&lt;Name&gt;.</p>
</blockquote></li>
<li><blockquote>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
</blockquote></li>
</ul></li>
<li><p>Direct Mapping—Select the input from the Task input or Task output.</p></li>
</ul>
<blockquote>
<p><strong>Note:</strong> When you use Direct Mapping and select a task input, and execute the workflow it fails and returns the error <em>Error in execution: API request cannot be populated: invalid character 'm' looking for beginning of value</em>.</p>
<p>You must pipe <em>ToJson</em> to Direct Mapping in Advanced Mapping. For example, for a task input ResponseParser, the Advanced Mapping input should be {{.global.task.input.ResponseParser| ToJson}}.</p>
</blockquote>
<ul>
<li><p>Advanced Mapping—Map a Golang template to the task input.</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>The following table explains the PowerShell Script custom task Outcomes:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Outcomes</td>
<td><p>To use the extracted values from the API response to determine the task status and set the status with an appropriate message, when the conditions match, do the following:</p>
<ol type="1">
<li><p>Click Add Outcome.</p></li>
<li><p>Name—The name for the outcome.</p></li>
<li><p>Outcome Type—Select the outcome type. The options available are Success, Skip To Success, Error, Terminal Error, Skip Task Execution, or Status.</p></li>
</ol>
<ol start="4" type="1">
<li><p>For more information on Outcomes, see <a href="file://E:\\help\\resources\\Task_Designer">Outcomes</a></p></li>
</ol>
<ol start="4" type="1">
<li><p>Message—The message when the condition is met.</p></li>
<li><p>Condition—The condition for the outcome.</p></li>
</ol>
<ol start="5" type="1">
<li><p>For example, {{eq .global.InvokePowerShellScript1.output.ExitCode "0"}}.</p></li>
<li><p>This condition checks whether the response exit code of the API named ‘InvokePowerShellScript1’ used in a custom task is 0.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<h2 id="template-parameters">Template Parameters</h2>
<p>The request body template can refer to values from workflow inputs,
previous task outputs, or implicit parameters for Intersight API calls.
The following table explains the template parameters.</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>Prefix/Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{{.global.workflow.input.&lt;ParameterName&gt;}}</td>
<td>Workflow input reference.</td>
</tr>
<tr class="even">
<td>{{.global.&lt;TaskRefName&gt;.output.<br />
Parameters.&lt;ParameterName&gt;}}</td>
<td>Previous task output reference. <strong>TaskRefName</strong> is the name of the previous task having output <strong>ParameterName</strong>.</td>
</tr>
<tr class="odd">
<td>{{.security.AccountMoid}}</td>
<td>Implicit parameter reference to Account MoID under which the workflow is running.</td>
</tr>
<tr class="even">
<td>{{.security.OrganizationMoid}}</td>
<td>Implicit parameter reference to Organization MoID under which the workflow is running.</td>
</tr>
</tbody>
</table>
<h2 id="template-engine-syntax">Template Engine Syntax</h2>
<p>The template engine uses prefix notation for the statements. In case of
operational statements, the operators are specified before the operands.
All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check),
<strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or
equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or
equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the
client error code range 400 – 500. Note that the template engine
supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and
<strong>lt</strong> are specified before their operands.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{{<span style="color:#000">and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation
syntax. This section has some examples of these conditional statements.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{{<span style="color:#000">if \&lt;comparision_statement&gt;}} Template to be used {{end}}  </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>{{<span style="color:#000">if \&lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}  </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>{{<span style="color:#000">if \&lt;comparision_statement&gt;}} Template to be used {{else if \&lt;comparision_statement}} Tempalte to be used {{end}}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0046162e1873ec9b264b5e8ca7cf2245">4 - SSH Commands</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run commands over SSH by using the <strong>Invoke SSH Commands</strong> reusable task in the workflows.</div>
	<pre tabindex="0"><code>Test
</code></pre><p>Sample Text</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f9a3efd1d619b84748a90c844dfa331b">5 - SSH Commands - Reusable</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run commands over SSH by using the <strong>Invoke SSH Commands</strong> reusable task in the workflows.</div>
	<h1 id="executors--invoke-ssh-commands---reusable-task">Executors – Invoke SSH Commands - Reusable Task</h1>
<p>The <strong>Invoke SSH Commands</strong> task executes SSH commands against the given Intersight SSH endpoint target.</p>
<h2 id="supported-targets">Supported Targets</h2>
<p>The Invoke SSH Commands task can be run only on the targets that are added as an SSH or Ansible endpoint target type in Cisco Intersight.</p>
<p>To run the SSH Command task on the SSH or Ansible endpoint target from Cisco Intersight, ensure that:</p>
<ul>
<li>
<p>The endpoint is reachable through Intersight Assist.</p>
</li>
<li>
<p>The endpoint target is in the Connected state.</p>
</li>
<li>
<p>The endpoint credentials are valid.</p>
</li>
</ul>
<p>For more information on Intersight Target Claim, see <a href="/help/getting_started/claim_targets#target_claim_using_intersight_assist">Target Claim Using Intersight Assist</a>.</p>
<h2 id="using-the-executor-ssh-commands-reusable-task">Using the Executor SSH Commands Reusable Task</h2>
<p>Use the <strong>Invoke SSH Commands</strong> from the <strong>Executors</strong> section in the Intersight Orchestrator Task Designer UI to create a Invoke SSH Commands reusable task.</p>
<p>For more information on tasks, see <a href="/help/resources/Task_Designer#defining_a_task">Defining a Task</a>.</p>
<p>The following table explains the Invoke SSH Commands task properties:</p>
<p>Property</p>
<p>Description</p>
<p>General</p>
<p>For more information, see <a href="/help/resources/Task_Designer#defining_a_task">Defining a Task</a>.</p>
<p>Inputs</p>
<p>External Target—The external target on which the SSH commands are run. By default, the External Target task input is created for the task.</p>
<p>The SSH commands can be run only on targets added as SSH or Ansible endpoint target in Intersight and are in the connected state.</p>
<p>Outputs</p>
<p>To extract the required values from the command responses and map it to task outputs, do the following:</p>
<ol>
<li>
<p>Create Task Output—Specify the task output.</p>
</li>
<li>
<p>Map to Task Output—Check the check box to map the task output to an command response.</p>
</li>
<li>
<p>Task Output—Select the command response to which the task output is mapped. The options available are:</p>
<ul>
<li>
<p><em>Exit Code | Invoke SSH Commands</em></p>
</li>
<li>
<p><em>Command Output | Invoke SSH Commands</em></p>
</li>
<li>
<p><em>Command Execution Error| Invoke SSH Commands</em></p>
</li>
<li>
<p><em>Extracted Parameters | Invoke SSH Commands</em></p>
</li>
</ul>
<p>For more information on task outputs, see Executor Output properties.</p>
</li>
</ol>
<p>The following table explains the Invoke SSH Commands executor input:</p>
<p>Property</p>
<p>Description</p>
<p>SSH Command</p>
<p>The SSH commands that need to be executed on the remote server along with the details of command type.</p>
<p>Command— The SSH command string to execute against the given target. You need to specify only the command string.</p>
<p>You can specify multiple commands that need to run on the given target. For more information, see <a href="/help/resources/Executor_SSH#using_ssh_commands">Using SSH Commands</a>.</p>
<p>Note:</p>
<p>The command chaining is allowed only when the command type is non-interactive.</p>
<ul>
<li>
<p>Static Value—The SSH commands that are to be run on the remote server.</p>
<ul>
<li>
<p>Non-Interactive Command—The SSH command that does not require user prompts.</p>
</li>
<li>
<p>Interactive Command—The SSH commands that require user prompts. For example, the Sudo or install packages command prompts for the user inputs. To specify the user inputs for the command, do the following:</p>
<ul>
<li>
<p>Expect —The regular expression of the expect prompt of the interactive command. You must provide the complete regular expression of the Expect string and the expression must end with the special character &lsquo;$&rsquo; to match the end of the Expect string.</p>
</li>
<li>
<p>Send—The answer string to the expect prompt. You can specify a string value.</p>
</li>
<li>
<p>End prompt—The regular expression of the Shell Prompt of the remote server or target. You must provide the complete regular expression of the Shell Prompt and it must end with special character &lsquo;$&rsquo; to match the end of the Shell Prompt string.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Direct Mapping—Select an existing task input or task output field.</p>
<p>You can map only a custom data type of type SSH Command.</p>
<p>Note:</p>
<p>Direct mapping of task input or output of string data type is not valid.</p>
</li>
<li>
<p>Advanced Mapping—You can use Go template expressions for advance use cases where data manipulation is required.</p>
<p>For example, to use substring of the task input StringInput in the SSH command, the advanced mapping can be:</p>
<pre><code>{Command: &quot;{{Substring .global.task.input.StringInput 5 15}}&quot;, 
CommandType: &quot;NonInteractiveCmd&quot;}
</code></pre>
<p>The <em>CommandType</em> can be `NonInteractiveCmd` and `InteractiveCmd`.</p>
<p>Following is an example for the &lsquo;InteractiveCmd&rsquo;:</p>
<pre><code>{
&quot;Command&quot;: &quot;{{Substring .global.task.input.StringInput 5 15}}&quot;,
&quot;CommandType&quot;: &quot;InteractiveCmd&quot;,
&quot;ExpectPrompts&quot;: [
{
&quot;Expect&quot;: &quot;Password:\\s+$&quot;,
&quot;Send&quot;: &quot;dummyValue&quot;
}
],
&quot;ShellPrompt&quot;: &quot;\\[root\\@onprem-appliance\\]\\s+$&quot;
}
</code></pre>
<p>For more information on template functions, see <a href="/help/resources/Executor_SSH_Reusable#template_functions">Template Functions</a>.</p>
</li>
</ul>
<p>Command Timeout</p>
<p>The command timeout in seconds for the execution of the command against the given endpoint. The range is 10 to 7200 seconds.</p>
<p>The default timeout value is 600 seconds.</p>
<ul>
<li>
<p>Static Value—The command timeout in seconds for the execution of the command against the given target.</p>
</li>
<li>
<p>Direct Mapping——Select an existing task input or task output field.</p>
</li>
<li>
<p>Transformed Mapping—Allows applying data transformation through a combination of one or more transformation stages for a task&rsquo;s input. In each transformation stage, you can select a transformation function along with its inputs. The transformation stages will be converted into a template.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>Expected Exit Codes</p>
<p>The list of expected exit codes for the SSH command that is run by the task. Task status is set to Success if the obtained exit code is present in the list of expected exit codes.</p>
<p>If this input is not specified, then the default exit code is 0 and is used to determine the status of command execution.</p>
<ul>
<li>
<p>Static Value—The exit code for the SSH command that is run by the task.</p>
</li>
<li>
<p>Direct Mapping—Select the expected exit codes from the task input or task output.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>Response Parser</p>
<p>The response parser specification which is used to extract the values from the command response.</p>
<ul>
<li>
<p>Static Value</p>
<ul>
<li>
<p>Regular Expression—The regular expression of the line in the command response where the interested capture value resides. The format to specify the capture value in this input is &lsquo;$<Name of the parameter>&rsquo;. For example, if we need to capture <em>&lsquo;intersight&rsquo;</em> in the sample response &lsquo;<a href="mailto:intersight@cisco.com">intersight@cisco.com</a>&rsquo;, the regular expression looks like $<Name>\@cisco\.com where &lsquo;<em>Name</em>&rsquo; is the name given to this captured parameter.</p>
</li>
<li>
<p>Name—The name of the output under which the captured value is saved. This name should be the same that is provided in the Regular Expression—$<Name>.</p>
</li>
<li>
<p>Type—The response parameter type—String, Integer, Float, or Boolean.</p>
<p>The default value is String.</p>
</li>
</ul>
</li>
<li>
<p>Direct Mapping—Select a task input or task output field.</p>
<p>To create a new Workflow input, select the Create Workflow Input from the drop-down. The Add Input screen appears with auto-populated fields.</p>
</li>
<li>
<p>Advanced Mapping—Map a Golang template to the task input. For example, <code>FindAllString</code> function returns a slice of all substrings that match the given regular expression in the given string.</p>
</li>
</ul>
<p>For more information, see <a href="/help/resources/Executor_SSH#response_parser">Response Parser</a>.</p>
<p>The following table explains the SSH Command executor Outputs :</p>
<p>Property</p>
<p>Description</p>
<p>Exit Code</p>
<p>The exit code after the execution of the command against the given endpoint.</p>
<p>Command Output</p>
<p>The complete response after the execution of the command against the given endpoint.</p>
<p>Command Execution Error</p>
<p>Captures the error encountered while executing the command.</p>
<p>Extracted Parameters</p>
<p>The response parser extracted outputs from the command execution response.</p>
<p>The following table explains the Invoke SSH Commands task Outcomes:</p>
<p>Property</p>
<p>Description</p>
<p>Outcomes</p>
<p>To set the custom execution status and status message based on the obtained outputs, do the following:</p>
<ol>
<li>
<p>Click Add Outcome.</p>
</li>
<li>
<p>Name—The name for the outcome.</p>
</li>
<li>
<p>Outcome Type—Select the outcome type. The options available are Success, Skip To Success, Error, Terminal Error, Skip Task Execution, or Status.</p>
<p>For more information on Outcomes, see <a href="/help/resources/Task_Designer#outcomes">Outcomes</a></p>
</li>
<li>
<p>Message—The message when the condition is met.</p>
</li>
<li>
<p>Condition—The condition for the outcome.</p>
<p>For example, {{eq .global.InvokeSshCommands1.output.ExitCode &ldquo;0&rdquo;}}.</p>
<p>This condition checks whether the output `ExitCode` of the executor named `InvokeSshCommands1` equals to 0. If the condition is true, the task status is set to the value provided in `Outcome Type` and task status message is set to value provided in `Message`.</p>
</li>
</ol>
<h2 id="using-ssh-commands">Using SSH Commands</h2>
<p>You can specify multiple commands that need to run on the given target by chaining the commands with special characters. The following table explains the operators.</p>
<p>Operators</p>
<p>Function</p>
<p>&amp;&amp; (Logical AND)</p>
<p>The command following this operator will only execute if the command preceding this operator has been successfully executed.</p>
<p>; (Semi-colon)</p>
<p>The command following this operator will execute even if the command preceding this operator is not successfully executed.</p>
<p>|| ( Logical OR)</p>
<p>The command succeeding this operator is only executed if the command preceding it has failed.</p>
<p>| (Pipe)</p>
<p>The output of the first command acts as input to the second command.</p>
<p>! (NOT)</p>
<p>Negates an expression within a command. It is much like an “except” statement.</p>
<p>&gt;,&raquo;, &lt; (Redirection)</p>
<p>Redirects the output of a command or a group of commands to a file or stream.</p>
<h2 id="template-parameters">Template Parameters</h2>
<p>The request body template can refer to values from task inputs, previous task outputs, or implicit parameters. The following table explains the template parameters.</p>
<p>Prefix/Format</p>
<p>Description</p>
<pre><code>{{.global.task.input.&lt;ParameterName&gt;}}
</code></pre>
<p>Task input reference.</p>
<pre><code>{{.global.&lt;ExecutorRefName&gt;.output.&lt;ParameterName&gt;}}
</code></pre>
<p>Previous executor output reference. <strong>ExecutorRefName</strong> is the name of the previous executor having output <strong>ParameterName</strong>.</p>
<pre><code>{{.security.AccountMoid}}
</code></pre>
<p>Implicit parameter reference to Account MoID under which the workflow is running.</p>
<pre><code>{{.security.OrganizationMoid}}
</code></pre>
<p>Implicit parameter reference to Organization MoID under which the workflow is running.</p>
<h2 id="template-functions">Template Functions</h2>
<p>The template engine has in-built functions to transform values before they are populated in the request templates. The following table explains the functions supported in <strong>Invoke SSH Commands</strong> task.</p>
<p>Function</p>
<p>Description</p>
<p>TrimSpace</p>
<p>Returns a string after removing white spaces from a the string.</p>
<p>Example:</p>
<pre><code>{{TrimSpace .global.task.input.HostName}}
</code></pre>
<p>ContainsString</p>
<p>Returns a boolean if a substring is present in a given string.</p>
<p>Example:</p>
<pre><code>{{if (ContainsString .global.task.input.SizeAsString \”MB\”)}}Mega Bytes{{else}}Bytes{{end}}
</code></pre>
<p>FindAllString</p>
<p>Returns a slice of substrings matching the regular expression in a given string.</p>
<p>Example:</p>
<pre><code>{{(FindAllString .global.task.input.NumberString \”([0-9]+)\”)}}
</code></pre>
<p>The above example returns array [“123”, “456”] for input string “123 some text 456.”</p>
<p>ToJson</p>
<p>Converts a value to a JSON format.</p>
<p>Example:</p>
<pre><code>{{(FindAllString .global.task.input.NumberString \&quot;([0-9]+)\&quot;) | ToJson}}
</code></pre>
<p>The above example returns JSON array literal [“123”, “456”] for input string “123 some text 456.”</p>
<p>AsArray</p>
<p>Takes in an element and returns an array of one element.</p>
<p>Example:</p>
<pre><code>{{AsArray .global.task.output.serverMo}}
</code></pre>
<p>The above example returns an array of one server Mo.</p>
<p>Substring</p>
<p>Returns a substring within the given index bounds.</p>
<p>Example:</p>
<pre><code>{{Substring .global.task.input.StorageId 2 6}}
</code></pre>
<p>The above example returns “ABCD” for string “12ABCD3456.”</p>
<p>IpToCidr</p>
<p>Returns the classless inter-domain routing (CIDR) notation of an IPv4 address and subnet mask.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>{{<span style="color:#000">IpToCidr .global.task.input.Ip .global.task.input.Netmask}}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>The above example returns “10.10.10.10/24” for the input parameters “10.10.10.10” and “255.255.255.0.”</p>
<p>LookupInSlice</p>
<p>Checks if a given value is present in given slice or array and returns true if it exists. This function can be used for any value.</p>
<p>Example:</p>
<pre><code>{{LookupInSlice .global.task.input.IpAddressList \”10.10.10.10\”}}
</code></pre>
<p>The above example returns true for input [”10.10.10.10”, “20.20.20.20”].</p>
<p>Index</p>
<p>Returns a value from an array when an input index exists.</p>
<p>Example:</p>
<pre><code>{{ index .global.task.input.nodes .global.task.input.idx }} 
</code></pre>
<p>In the above example, if nodes is an array of devices and idx is 2, the index function returns the second device in the array.</p>
<p>Itob</p>
<p>Converts an integer to a boolean.</p>
<p>Example:</p>
<pre><code>{{ Itob global.task.input.OnOffFlip }} 
</code></pre>
<p>The above example returns true and false for inputs 1 and 0 respectively.</p>
<p>Itoa</p>
<p>Converts a given number to a string value.</p>
<p>Example:</p>
<pre><code>{{ Itoa global.task.input.Port }} 
</code></pre>
<p>The above example returns “12345” for input 12345.</p>
<p>Itof</p>
<p>Converts a given integer to a float value.</p>
<p>Example:</p>
<pre><code>{{ Itof global.task.input.Rate }}
</code></pre>
<p>The above example returns 15.0 for an input 15.</p>
<p>Btoa</p>
<p>Converts a given boolean to a string value.</p>
<p>Example:</p>
<pre><code>{{ Btoa global.task.input.OnOffFlip }}
</code></pre>
<p>The above example returns “true” for input true.</p>
<p>Btoi</p>
<p>Converts a given boolean to a integer value.</p>
<p>Example:</p>
<pre><code>{{ Btoi global.task.input.OnOffFlip }}
</code></pre>
<p>The above example returns 1 and 0 for inputs true and false respectively.</p>
<p>Atob</p>
<p>Converts the given string into a boolean value.</p>
<p>Example:</p>
<pre><code>{{ Atob global.task.input.OnOffFlip }}Returns true for input “true”
</code></pre>
<p>Atoi</p>
<p>Converts a given number in string format to the integer type.</p>
<p>Example:</p>
<pre><code>{{Atoi .global.task.input.SizeString}} returns integer 2048 for input string “2048”
</code></pre>
<p>Ftoa</p>
<p>Converts a given number into the string form based on the given precision.</p>
<p>Example:</p>
<pre><code>{{Ftoa .global.task.input.Size 2}} returns the following output: 123.456 =&gt; “123.45”, 1028 =&gt; “1028.00”
</code></pre>
<p>Ftoi</p>
<p>Converts a given float input to a integer value.</p>
<p>Example:</p>
<pre><code>{{ Ftoi global.task.input.Rate }}
</code></pre>
<p>The above example returns 15 for an input 15.833.</p>
<p>Eval</p>
<p>Supports an expression evaluation function. The below example returns 2GB for a input value of 2048. Note that the second argument is passed as ‘.’ in the template, which represents the map of all parameters.</p>
<pre><code>{{Eval \&quot;{{.global.task.input.Size}} / 1024\&quot; .}}GB
</code></pre>
<h2 id="template-engine-syntax">Template Engine Syntax</h2>
<p>The template engine uses <code>prefix</code> notation for the statements. In case of operational statements, the operators are specified before the operands. All the operations are invoked after all the operands are evaluated.</p>
<p><strong>Comparison Statements</strong></p>
<p>The comparison statements can be written using <strong>eq</strong> (equal check), <strong>ne</strong> (not equal check), <strong>lt</strong> (less than check), <strong>le</strong> (less than or equal check), <strong>gt</strong> (greater than check), and <strong>ge</strong> (greater than or equal check).</p>
<p>Here is an example that checks the parameter HttpStatusCode is in the client error code range 400 – 500. Note that the template engine supports prefix notation and hence the operators <strong>and</strong>, <strong>ge</strong>, and <strong>lt</strong> are specified before their operands.</p>
<pre><code>{{and (ge .local.response.HttpStatusCode 400) (lt .local.response.HttpStatusCode 500)}}
</code></pre>
<p><strong>Conditional Statements</strong></p>
<p>The template engine supports conditional statements in prefix notation syntax. This section has some examples of these conditional statements.</p>
<pre><code>{{if &lt;comparision_statement&gt;}} Template to be used {{end}}

{{if &lt;comparision_statement&gt;}} Template to be used {{else}} Template to be used {{end}}

{{if &lt;comparision_statement&gt;}} Template to be used {{else if &lt;comparision_statement}} Tempalte to be used {{end}}
</code></pre>
<h2 id="response-parser">Response Parser</h2>
<p>A response parser is a collection of parameters that model values to be extracted from the SSH command response.</p>
<p><strong>Example: Create a response parser to get the IP address for a ping command</strong></p>
<p>To get the IP address for the host such as <em><a href="https://www.example.com">www.example.com</a></em>, you can use the ping command:</p>
<p><div class="td-card card">
  
  
  
  
  <div class="card-body code p-l0 m-0">
      <pre tabindex="0"><code>
    ping example.com -4
    Pinging example.com [93.184.216.34] with 32 bytes of data:
    Reply from 93.184.216.34: bytes=32 time=229ms TTL=53
    Reply from 93.184.216.34: bytes=32 time=230ms TTL=53
    Reply from 93.184.216.34: bytes=32 time=230ms TTL=53
    Reply from 93.184.216.34: bytes=32 time=229ms TTL=53ping example.com
</code></pre>
  </div>
</div>

To extract the IP address from the command output for an SSH Command task, you can configure the response parser as:</p>
<ul>
<li>
<p>Regular Expression—Pinging\s+example.com\s+\[$<IP>\]\s+.*</p>
</li>
<li>
<p>Name—IP</p>
<p>Note:</p>
<p>This name should be the same that is provided in the Regular Expression field. In the above example, the Regular Expression uses name $<IP> so the Name specified must be &ldquo;IP&rdquo;.</p>
<p>Type—String</p>
</li>
</ul>
<h2 id="invoke-ssh-command-reusable-task-examples">Invoke SSH Command Reusable Task Examples</h2>
<p><strong>Example 1: Create a reusable SSH Command task to list the current working directory on the host</strong></p>
<p>This example task runs on an Intersight SSH endpoint target. This task runs the <em>pwd</em> command on the SSH endpoint target and obtains the current working directory in the output.</p>
<p>Property</p>
<p>Description</p>
<p>General</p>
<ul>
<li>
<p>Organization—The organization that you are creating the task in.</p>
</li>
<li>
<p>Display Name—A user friendly short name to identify the task definition.</p>
</li>
<li>
<p>Reference Name—The name of the Task definition.</p>
</li>
</ul>
<p>Inputs</p>
<ul>
<li>
<p>External Target—By default, the External Target task input is created for the task.</p>
<ul>
<li>
<p>Reference Name—Target</p>
</li>
<li>
<p>Type—Target Data Type</p>
</li>
</ul>
</li>
</ul>
<p>Outputs</p>
<ul>
<li>
<p>ExitCode—Task output</p>
<ul>
<li>
<p>Reference Name—ExitCode</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Exit Code | Invoke SSH Command</em></p>
</li>
</ul>
</li>
<li>
<p>Response—Task output</p>
<ul>
<li>
<p>Reference Name—Response</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Command Output| Invoke SSH Command</em></p>
</li>
</ul>
</li>
<li>
<p>Lastline—Task output</p>
<ul>
<li>
<p>Reference Name—Response</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Extracted Parameters | Invoke SSH Command</em> - <em>WorkingDirectory</em></p>
</li>
</ul>
</li>
<li>
<p>Error—Task output</p>
<ul>
<li>
<p>Reference Name—Error</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Extracted Parameters | Invoke SSH Command</em> - <em>CommandExecutionError</em></p>
</li>
</ul>
</li>
</ul>
<p>The following table explains the Invoke SSH Command executor inputs:</p>
<p>Property</p>
<p>Description</p>
<p>SSH Command</p>
<p>Static | Non-interactive—Command—pwd</p>
<p>Command Timeout</p>
<p>Default value.</p>
<p>Expected Exit Codes</p>
<p>Default value.</p>
<p>Response Parser</p>
<p>When you run the pwd command, you get the following output:</p>
<pre><code>$pwd
/home/user
</code></pre>
<p>To extracts the path and display it, configure the response parser as:</p>
<ul>
<li>
<p>Regular Expression—$<WorkingDirectory></p>
</li>
<li>
<p>Name—WorkingDirectory</p>
</li>
<li>
<p>Type—String</p>
</li>
</ul>
<p>The configured response parser captures the entire response line.</p>
<p><strong>Example 2: Create a reusable SSH Command task to install jq Linux command line utility on a host using interactive SSH commands</strong></p>
<p>This example task runs on an Intersight SSH endpoint target. In this task, the <em>Sudo</em> password is provided by the command input field, and jq Linux command line utility is installed on the SSH endpoint target.</p>
<p>The task properties required for this example are as following:</p>
<p>Property</p>
<p>Description</p>
<p>General</p>
<ul>
<li>
<p>Organization—The organization that you are creating the task in.</p>
</li>
<li>
<p>Display Name—A user friendly short name to identify the task definition.</p>
</li>
<li>
<p>Reference Name—The name of the Task definition.</p>
</li>
</ul>
<p>Inputs</p>
<ul>
<li>
<p>External Target—By default, the External Target task input is created for the task.</p>
<ul>
<li>
<p>Reference Name—Target</p>
</li>
<li>
<p>Type—Target Data Type</p>
</li>
</ul>
</li>
</ul>
<p>Outputs</p>
<ul>
<li>
<p>ExitCode—Task output</p>
<ul>
<li>
<p>Reference Name—ExitCode</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Exit Code | Invoke SSH Command</em></p>
</li>
</ul>
</li>
<li>
<p>Response—Task output</p>
<ul>
<li>
<p>Reference Name—Response</p>
</li>
<li>
<p>Type—String</p>
</li>
<li>
<p>Map to Task Output—<em>Command Output| Invoke SSH Command</em></p>
</li>
</ul>
</li>
</ul>
<p>The following table explains the Invoke SSH Command executor inputs:</p>
<p>Property</p>
<p>Description</p>
<p>SSH Command</p>
<p>Static | Interactive—Command—<em>sudo yum install -y jq</em> | Interactive</p>
<ul>
<li>
<p>Expect—The Expect string obtained while executing the SSH command is <em>[sudo]</em> password for <em>qali:</em>. You need to specify the Expect input as the regular expression of the Obtained prompt <em>\[sudo\]\spassword\sfor\sqali:\s$</em>.</p>
</li>
<li>
<p>Send—<em>testPasswd</em>.</p>
</li>
<li>
<p>Shell Prompt—The shell prompt obtained before executing the SSH command is <em>qali@automationvm-15:~$</em>. You need to specify the regular expression of the obtained shell prompt <em>qali\@automationvm-15:~\$\s?$</em>.</p>
</li>
</ul>
<p>Command Timeout</p>
<p>Default value.</p>
<p>Expected Exit Codes</p>
<p>Default value.</p>
<p>Response Parser</p>
<p>Default value.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7b3c262dd7e4461a6491d762ea4d9103">6 - Sample File</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run commands over SSH by using the <strong>Invoke SSH Commands</strong> reusable task in the workflows.</div>
	<h1 id="ariaid-title1" class="title topictitle1">Sample</h1>
<p>::: {.body .refbody}
::: section
The Workflow Designer helps you create new workflows (as well as tasks
and data types) and also edit existing workflows to manage targets in
Cisco Intersight.</p>
<p>::: {.note .note}
[Note:]{.notetitle}</p>
<p>To execute the new tasks for VMware vCenter networking operations, you
should upgrade to Intersight Assist version 1.0.9-278.
:::</p>
<p>::: {.note .important}
[Important:]{.importanttitle}</p>
<ul>
<li>
<p>The [Orchestration]{.ph .uicontrol} option is visible in the left
panel only if you have installed the Intersight Premier license.</p>
</li>
<li>
<p>Only an Account Administrator or a user with the Workflow Designer
privilege can use the Workflow Designer to create and edit
workflows.
:::</p>
</li>
</ul>
<p>To launch the Workflow Designer, choose [[Orchestration]{.ph .uicontrol}
&gt; [Workflows]{.ph .uicontrol}]{.ph .menucascade}. A dashboard displays
the following details under these tabs, namely, [My Workflows]{.ph
.uicontrol}, [Sample Workflows]{.ph .uicontrol}, and [All Workflows]{.ph
.uicontrol}:</p>
<ul>
<li>
<p>[Validation Status]{.ph .uicontrol}</p>
</li>
<li>
<p>[Last Execution Status]{.ph .uicontrol}</p>
</li>
<li>
<p>[Top Workflows by Execution Count]{.ph .uicontrol}</p>
</li>
<li>
<p>[Top Workflow Categories]{.ph .uicontrol}</p>
</li>
<li>
<p>[Number of System Defined Workflows]{.ph .uicontrol}</p>
</li>
<li>
<p>[Top Workflows by Targets]{.ph .uicontrol}</p>
</li>
</ul>
<p>Using the dashboard, you can create, edit, clone, or delete a tab. To
create your own custom view tab, click + and specify a name and then
choose the required parameters that need to be displayed in the columns,
tag columns, and widgets. You can rename the tabs if it does not have a
Lock icon.</p>
<p>Below the dashboard is a tabular list of workflows displaying the
following information:</p>
<ul>
<li>
<p>[Display Name]{.ph .uicontrol}</p>
</li>
<li>
<p>[Description]{.ph .uicontrol}</p>
</li>
<li>
<p>[System Defined]{.ph .uicontrol}</p>
</li>
<li>
<p>[Default Version]{.ph .uicontrol}</p>
</li>
<li>
<p>[Executions]{.ph .uicontrol}</p>
</li>
<li>
<p>[Last Execution Status]{.ph .uicontrol}</p>
</li>
<li>
<p>[Validation Status]{.ph .uicontrol}</p>
</li>
<li>
<p>[Last Update]{.ph .uicontrol}</p>
</li>
<li>
<p>[Organization]{.ph .uicontrol}</p>
</li>
</ul>
<p>The [Actions]{.ph .uicontrol} column allows you to do the following
actions:</p>
<ul>
<li>
<p>[Execute]{.ph .uicontrol}&mdash;Executes the workflow.</p>
</li>
<li>
<p>[History]{.ph .uicontrol}&mdash;Displays workflow execution history.</p>
</li>
<li>
<p>[Manage Versions]{.ph .uicontrol}&mdash;create and manage versions for
workflows. See <em>Managing Versions for Workflows</em> later in this
document.</p>
</li>
<li>
<p>[Delete]{.ph .uicontrol}&mdash;Delete a workflow.</p>
</li>
<li>
<p>[Retry]{.ph .uicontrol}&mdash;Retry a failed workflow.
:::</p>
</li>
</ul>
<p>::: section</p>
<h2 id="creating-a-workflow" class="title sectiontitle">Creating a Workflow</h2>
<p>Workflow creation can be broken down into the following sequence of
steps:</p>
<ol>
<li>
<p>[Defining a workflow]{.ph .uicontrol}&mdash;you specify the display
name, description, and other important attributes.</p>
</li>
<li>
<p>[Defining workflow inputs, workflow variables, and workflow
outputs]{.ph .uicontrol}&mdash;you can specify which input parameters
are mandatory for the workflow execution, define variable(s) for
workflow, and the output(s) generated on successful execution.</p>
</li>
<li>
<p>[Adding workflow tasks]{.ph .uicontrol}&mdash;you can add one or more
workflow tasks in the Workflow Designer that are needed for the
workflow to carry out its function.</p>
</li>
<li>
<p>[Validate the workflow]{.ph .uicontrol}&mdash;you can validate a
workflow to ensure that there are no errors in connecting task
inputs and outputs.
:::</p>
</li>
</ol>
<p>::: section</p>
<h2 id="defining-a-workflow" class="title sectiontitle">Defining a Workflow</h2>
<ol>
<li>
<p>Choose [Orchestration]{.ph .uicontrol} from the left navigation
pane.</p>
</li>
<li>
<p>Choose [Create Workflow]{.ph .uicontrol}. The [Create
Workflow]{.keyword .wintitle} screen is categorized into the
following areas to help you create a workflow:</p>
<p>The following table describes the options available to you while
creating a workflow:</p>
<p>::: tablenoborder
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| Workflow Designer    | Description          | Details              |
| Area/Option          |                      |                      |
+======================+======================+======================+
| [General Tab]{.ph    | Displays workflow    | You can add a        |
| .uicontrol}          | details, and also    | user-friendly short  |
|                      | inputs, variables,   | name, reference      |
|                      | and outputs of the   | name, description,   |
|                      | workflow.            | and assign an        |
|                      |                      | organization to the  |
|                      |                      | workflow. You can    |
|                      |                      | also specify a       |
|                      |                      | version or set a tag |
|                      |                      | to the workflow. In  |
|                      |                      | order to categorize  |
|                      |                      | your workflow, use   |
|                      |                      | the tag key          |
|                      |                      | [Category]{.ph       |
|                      |                      | .uicontrol} and      |
|                      |                      | provide an           |
|                      |                      | appropriate category |
|                      |                      | value. Use the       |
|                      |                      | following checkboxes |
|                      |                      | to:                  |
|                      |                      |                      |
|                      |                      | [Set as Default      |
|                      |                      | Version]{.ph         |
|                      |                      | .uicontrol}&mdash;Sets   |
|                      |                      | this version as the  |
|                      |                      | default version for  |
|                      |                      | the workflow.        |
|                      |                      |                      |
|                      |                      | [Retryable]{.ph      |
|                      |                      | .                    |
|                      |                      | uicontrol}&mdash;Execute |
|                      |                      | the workflow from    |
|                      |                      | the point of a       |
|                      |                      | failure or retry the |
|                      |                      | execution of the     |
|                      |                      | entire workflow. You |
|                      |                      | can retry the        |
|                      |                      | execution of the     |
|                      |                      | workflow for up to   |
|                      |                      | two weeks after the  |
|                      |                      | last update to the   |
|                      |                      | workflow.            |
|                      |                      |                      |
|                      |                      | [Enable Debug        |
|                      |                      | Logs]{.ph            |
|                      |                      | .u                   |
|                      |                      | icontrol}&mdash;Collects |
|                      |                      | the workflow logs    |
|                      |                      | for each tasks. You  |
|                      |                      | can analyze and      |
|                      |                      | debug the workflow   |
|                      |                      | execution.           |
|                      |                      |                      |
|                      |                      | [Workflow            |
|                      |                      | Inputs]{.ph          |
|                      |                      | .uicontrol}&mdash;You    |
|                      |                      | can click [Add       |
|                      |                      | Workflow Input]{.ph  |
|                      |                      | .uicontrol} and add  |
|                      |                      | workflow inputs.     |
|                      |                      | Each input has a     |
|                      |                      | user-friendly        |
|                      |                      | display name, a      |
|                      |                      | reference name,      |
|                      |                      | description,         |
|                      |                      | restrictions, and    |
|                      |                      | data type. Also, you |
|                      |                      | can set a default    |
|                      |                      | value and encrypt    |
|                      |                      | it. For more         |
|                      |                      | information, see     |
|                      |                      | [Defining Workflow   |
|                      |                      | Inputs, Variables,   |
|                      |                      | and                  |
|                      |                      | Outputs](/help/res   |
|                      |                      | ources/Workflow_Desi |
|                      |                      | gner#defining_workfl |
|                      |                      | ow_inputs_variables_ |
|                      |                      | and_outputs){.xref}. |
|                      |                      |                      |
|                      |                      | [Workflow            |
|                      |                      | Variable]{.ph        |
|                      |                      | .uicontrol}&mdash;You    |
|                      |                      | can click [Add       |
|                      |                      | Workflow             |
|                      |                      | Variable]{.ph        |
|                      |                      | .uicontrol} and add  |
|                      |                      | a workflow variable. |
|                      |                      | Each workflow        |
|                      |                      | variable has a       |
|                      |                      | reference name, data |
|                      |                      | type, and so on.     |
|                      |                      | Also, you can set a  |
|                      |                      | default value. For   |
|                      |                      | more information,    |
|                      |                      | see [Defining        |
|                      |                      | Workflow Inputs,     |
|                      |                      | Variables, and       |
|                      |                      | Outputs](/help/res   |
|                      |                      | ources/Workflow_Desi |
|                      |                      | gner#defining_workfl |
|                      |                      | ow_inputs_variables_ |
|                      |                      | and_outputs){.xref}. |
|                      |                      |                      |
|                      |                      | [Workflow            |
|                      |                      | Outputs]{.ph         |
|                      |                      | .uicontrol}&mdash;You    |
|                      |                      | can click [Add       |
|                      |                      | Workflow Output]{.ph |
|                      |                      | .uicontrol} and add  |
|                      |                      | workflow outputs.    |
|                      |                      | Each output has a    |
|                      |                      | user-friendly        |
|                      |                      | display name, a      |
|                      |                      | reference name,      |
|                      |                      | description,         |
|                      |                      | restrictions, and    |
|                      |                      | data type. Also, you |
|                      |                      | can encrypt a value  |
|                      |                      | and map it to task   |
|                      |                      | output.              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [Designer Tab]{.ph   | Displays the design  | Categorized into the |
| .uicontrol}          | area where you       | following areas to   |
|                      | synthesize your      | help you create a    |
|                      | workflow.            | workflow:            |
|                      |                      |                      |
|                      |                      | -   Tools            |
|                      |                      |     Area&mdash;lists all |
|                      |                      |     the tasks,       |
|                      |                      |     workflows, and   |
|                      |                      |     operations that  |
|                      |                      |     are currently    |
|                      |                      |     available in     |
|                      |                      |     Intersight. You  |
|                      |                      |     can drag and     |
|                      |                      |     drop a task or a |
|                      |                      |     workflow to the  |
|                      |                      |     canvas to create |
|                      |                      |     or edit the      |
|                      |                      |     workflow. You    |
|                      |                      |     can collapse or  |
|                      |                      |     expand the Tools |
|                      |                      |     area. You can    |
|                      |                      |     use the Search   |
|                      |                      |     feature to find  |
|                      |                      |     a specific task  |
|                      |                      |     or workflow.     |
|                      |                      |                      |
|                      |                      | -   Design           |
|                      |                      |     Area&mdash;where you |
|                      |                      |     can build your   |
|                      |                      |     workflow. Drag   |
|                      |                      |     and drop tasks   |
|                      |                      |     and workflows    |
|                      |                      |     from the Tools   |
|                      |                      |     area to this     |
|                      |                      |     area of the      |
|                      |                      |     screen. This     |
|                      |                      |     area includes    |
|                      |                      |     the following    |
|                      |                      |     options that you |
|                      |                      |     can use while    |
|                      |                      |     creating the     |
|                      |                      |     workflow:        |
|                      |                      |                      |
|                      |                      |     -   Zoom in and  |
|                      |                      |         Zoom         |
|                      |                      |                      |
|                      |                      |        out&mdash;Magnify |
|                      |                      |         or reduce    |
|                      |                      |         the view of  |
|                      |                      |         the          |
|                      |                      |         workflow.    |
|                      |                      |                      |
|                      |                      |     -   Auto Align   |
|                      |                      |         Work         |
|                      |                      | flow&mdash;Automatically |
|                      |                      |         align the    |
|                      |                      |         workflow     |
|                      |                      |         tasks in the |
|                      |                      |         design area. |
|                      |                      |                      |
|                      |                      |     -   Auto Align   |
|                      |                      |         Selected     |
|                      |                      |         Workflow     |
|                      |                      |                      |
|                      |                      |     Entities&mdash;Align |
|                      |                      |         selected     |
|                      |                      |         workflow     |
|                      |                      |         entities in  |
|                      |                      |         the design   |
|                      |                      |         area.        |
|                      |                      |                      |
|                      |                      |     -   Toggle Task  |
|                      |                      |                      |
|                      |                      |      Search&mdash;Search |
|                      |                      |         for a        |
|                      |                      |         specific     |
|                      |                      |         task within  |
|                      |                      |         the          |
|                      |                      |         workflow.    |
|                      |                      |         This is      |
|                      |                      |         useful when  |
|                      |                      |         you have     |
|                      |                      |         several      |
|                      |                      |         tasks within |
|                      |                      |         the          |
|                      |                      |         workflow.    |
|                      |                      |                      |
|                      |                      |     -   Auto Connect |
|                      |                      |         Selected     |
|                      |                      |         Workflow     |
|                      |                      |         Entity&mdash;Add |
|                      |                      |         the workflow |
|                      |                      |         entity in    |
|                      |                      |         the design   |
|                      |                      |         area. You    |
|                      |                      |         can drag and |
|                      |                      |         drop a task  |
|                      |                      |         in between   |
|                      |                      |         the tasks.   |
|                      |                      |         The possible |
|                      |                      |         locations    |
|                      |                      |         where the    |
|                      |                      |         selected     |
|                      |                      |         task can be  |
|                      |                      |         added is     |
|                      |                      |         denoted with |
|                      |                      |         [+ ]{.ph     |
|                      |                      |         .uicontrol}  |
|                      |                      |         icon.        |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [Mapping Tab]{.ph    | Displays the         | Expand and collapse  |
| .uicontrol}          | relationship between | the [Task            |
|                      | the task inputs and  | Inputs]{.ph          |
|                      | the outputs of the   | .uicontrol} and      |
|                      | selected workflow.   | [Task Outputs]{.ph   |
|                      |                      | .uicontrol} pane.    |
|                      | Information on       |                      |
|                      | workflow inputs and  |                      |
|                      | workflow outputs is  |                      |
|                      | also displayed.      |                      |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [Code Tab]{.ph       | Displays the code    | Read-only view of    |
| .uicontrol}          | view of the workflow | the workflow. You    |
|                      | definition           | can copy the code,   |
|                      |                      | use this as a sample |
|                      |                      | to create a workflow |
|                      |                      | using Intersight     |
|                      |                      | APIs.                |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [History Tab]{.ph    | Status of the        | View workflow        |
| .uicontrol}          | executed/in-progress | execution history,   |
|                      | workflows. This tab  | retry or clone a     |
|                      | appears after        | previous execution.  |
|                      | executing a          | The system displays  |
|                      | workflow.            | a maximum of 100     |
|                      |                      | instances of the     |
|                      |                      | workflow execution.  |
|                      |                      | The workflow         |
|                      |                      | execution is         |
|                      |                      | populated for each   |
|                      |                      | version of the       |
|                      |                      | workflow.            |
|                      |                      |                      |
|                      |                      | ::: {.note .note}    |
|                      |                      | [Note:]{.notetitle}  |
|                      |                      | When a workflow is   |
|                      |                      | successfully         |
|                      |                      | executed, the        |
|                      |                      | options for retrying |
|                      |                      | the workflow are not |
|                      |                      | displayed. You can   |
|                      |                      | retry a failed       |
|                      |                      | workflow only when   |
|                      |                      | the [Retryable]{.ph  |
|                      |                      | .uicontrol} option   |
|                      |                      | is enabled in the    |
|                      |                      | [General]{.ph        |
|                      |                      | .uicontrol} tab.     |
|                      |                      | :::                  |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [Execute]{.ph        | Launches the [Enter  | Choose the           |
| .uicontrol}          | Workflow             | Organization and the |
|                      | Inputs]{.keyword     | Workflow instance    |
|                      | .wintitle} window.   | name to execute the  |
|                      |                      | workflow.            |
|                      |                      |                      |
|                      |                      | For user-created     |
|                      |                      | workflows, the       |
|                      |                      | organization must    |
|                      |                      | match where it was   |
|                      |                      | created.             |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [Save Workflow]{.ph  | Validates and saves  | Review validation    |
| .uicontrol}          | the workflow.        | errors, if any, and  |
|                      |                      | rectify them.        |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| [Close Designer]{.ph | Closes the Workflow  | Closes the Workflow  |
| .uicontrol}          | Designer.            | Designer and         |
|                      |                      | displays the table   |
|                      |                      | view of available    |
|                      |                      | workflows.           |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
:::
:::</p>
</li>
</ol>
<p>::: section</p>
<h2 id="requests" class="title sectiontitle">Requests</h2>
<p>Requests are closely related to workflows. You create requests by
running workflows; a request is generated every time you execute a
workflow in Cisco Intersight. A request is a process under the control
of Cisco Intersight.</p>
<p>You can schedule a workflow for later execution, and Cisco Intersight
stores details of completed requests. To view the detailed information
of a request, choose a request. The following information is displayed
in the <strong>Requests</strong> screen:</p>
<ul>
<li>
<p>Status&mdash;Displays the status of a workflow. Request can have one of
several states depending on its execution status:</p>
<ul>
<li>
<p>Running</p>
</li>
<li>
<p>Blocked (for example, awaiting an approval)</p>
</li>
<li>
<p>Completed</p>
</li>
<li>
<p>Failed (a request can fail when one of its component tasks fails
to execute properly)</p>
</li>
</ul>
</li>
<li>
<p>Details&mdash;Displays the request details such as name, request ID,
target name and type, source name and type, name of the user who has
executed the request along with the start time and end time, and
duration of the request.</p>
</li>
<li>
<p>Inputs&mdash;Displays the workflow input details</p>
</li>
<li>
<p>Outputs&mdash;Displays the workflow output details</p>
</li>
<li>
<p>Execution Flow&mdash;Enable [Show Additional Details]{.ph .uicontrol} to
view the logs, input, and output mapping details of the user-defined
workflows. Displays the workflow execution history details similar
to the details displayed in the [History]{.ph .uicontrol} tab.
:::</p>
</li>
</ul>
<p>::: {#id_131513__Defining_WF_IO .section}</p>
<h2 id="defining-workflow-inputs-variables-and-outputs" class="title sectiontitle">Defining Workflow Inputs, Variables, and Outputs</h2>
<p>Workflows can have any number of tasks, inputs, variables, and outputs.</p>
<p>Any task or workflow input can be either mandatory or optional. A task
or workflow cannot run without all of its mandatory inputs. You define
whether an input is mandatory or optional when you create the task or
workflow.</p>
<p>After specifying the generic properties for a task or workflow, you
define the input parameters and variables required for task or workflow
execution. In addition, you can set workflow input Parameter Set or
Progressive Disclosure rules. These rules control the availability of
workflow inputs or filter the data based on the preceding selection
during the workflow execution. The Task Designer uses the same
parameters and information types as the workflow designer to validate
the mappings of task input and output parameters when a task is used in
a workflow along with other tasks. Task designer uses the same form as
workflow designer to obtain the parameter and information type so as
provide same user experience between workflow designer and task
designer.</p>
<ol>
<li>
<p>Choose [Orchestration]{.ph .uicontrol} from the left navigation pane
and click [Create Workflow]{.ph .uicontrol}.</p>
</li>
<li>
<p>In the [General]{.ph .uicontrol} tab, click [Add Workflow Input]{.ph
.uicontrol} in the [Workflow Inputs]{.ph .uicontrol} tab.</p>
</li>
<li>
<p>In the [Add Workflow Input]{.ph .uicontrol} screen, enter the
following details:</p>
<p>a.  [Display Name]{.ph .uicontrol}&mdash;Enter user-friendly short name.</p>
<p>b.  [Reference Name]{.ph .uicontrol}</p>
<p>c.  [Description]{.ph .uicontrol}&mdash;Detailed description of the
input</p>
<p>d.  [Value Restrictions]{.ph .uicontrol}&mdash;Choose [Required]{.ph
.uicontrol}, [Collection/Multiple]{.ph .uicontrol}, or can be
left blank</p>
<p>e.  [Type]{.ph .uicontrol}&mdash;Select a data type. For example,
String, Integer, Float, Boolean, Json, Enum, MoReference, Target
Data Type, or a custom data type.</p>
<pre><code>The fields displayed depend on the value you select for the Type
field.
</code></pre>
<p>f.  If you select the data type as [Enum]{.ph .uicontrol}, specify
the following:</p>
<pre><code>i.  [Enum List]{.ph .uicontrol}---Label for the Enum value.

ii. [Widget type]{.ph .uicontrol}.

iii. [Set Default Value]{.ph .uicontrol}---Select the checkbox
     and select the corresponding default value.

iv. [Override]{.ph .uicontrol}---Allow the user to override the
    default value.
</code></pre>
<p>g.  If you select the data type as [String]{.ph .uicontrol}, specify
the following:</p>
<pre><code>i.  [Minimum]{.ph .uicontrol} and [Maximum Range]{.ph
    .uicontrol}

ii. [Regex]{.ph .uicontrol}---Validates the regular expression
    when you select [String]{.ph .uicontrol} in the [Type]{.ph
    .uicontrol} field.

iii. [Secure]{.ph .uicontrol}---Indicates that the values of
     these properties are encrypted and stored in Cisco
     Intersight.

iv. [Object Selector]{.ph .uicontrol}---Enable to configure the
    Intersight managed object selectors. This attribute is
    available only when the primitive data is [String]{.ph
    .uicontrol}.

    Specify the Intersight API Reference and selector attributes
    to feed the input from the table selection. Value will be
    passed according to the configuration set in the Value
    attribute.
</code></pre>
<p>h.  If you select the data type as [Integer]{.ph .uicontrol} or
[Float]{.ph .uicontrol}, specify the following:</p>
<pre><code>i.  [Minimum]{.ph .uicontrol} and [Maximum Range]{.ph
    .uicontrol}

ii. [Set Default Value]{.ph .uicontrol}---Select the checkbox
    and the corresponding default value.
</code></pre>
<p>i.  If you select the data type as [Target Data Type]{.ph
.uicontrol} or [MoReference]{.ph .uicontrol}, specify the
following:</p>
<pre><code>i.  [Intersight API Reference]{.ph .uicontrol}---Enter the URL
    of the Intersight API configured with parameters.

ii. [Selector Attribute]{.ph .uicontrol}---Enter the attribute
    name(s) that needs to be displayed in the input table
    column. You can add multiple selector attributes by clicking
    [+]{.ph .uicontrol}.
</code></pre>
<p>j.  If you select the data type as [Composite Data Type]{.ph
.uicontrol}, you can specify the field mapping for the input
field. With field mapping, you can pass the value of workflow
input to a composite data field.</p>
<pre><code>To pass the value from the parent composite data type to a child
composite data type, you must specify the field mapping in the
composite data type field. For more information, see [Creating a
Data
Type](../../../../../../../../help/resources/Data_Types#creating_a_data_type){.xref}.

To specify the field mapping, do the following:

i.  [Key]{.ph .uicontrol}---The input field that you want to
    hide.

ii. [Value Attribute]{.ph .uicontrol}---The value in a template
    style to be passed dynamically during the execution.

    If the data type is Object Selector, Enum, or Boolean then
    the input is referenced as
    `${workflow.input.InputReferenceName`{.ph .codeph}}.

    If the data type is MoReference or Target Data Type the
    input is referenced as
    `${workflow.input.InputReferenceName.AttributeName}`{.ph
    .codeph}.

    The `InputReferenceName`{.ph .codeph} is the Reference Name
    given to the input field and not the Display Name or Label.
</code></pre>
</li>
<li>
<p>Click [Add]{.ph .uicontrol}.</p>
</li>
<li>
<p>Repeat this procedure to create multiple inputs.</p>
</li>
<li>
<p>To add a Parameter Set rule, click [Add Rule]{.ph .uicontrol} &gt;
[Parameter Set]{.ph .uicontrol}.</p>
<p>For more information, see Workflow <a href="../../../../../../../../help/resources/Workflow_Designer#workflow_input_parameter_set_and_progressive_disclosure_rules">Workflow Input Parameter Set and
Progressive Disclosure
Rules</a>{.xref}.</p>
<p>a.  [Name]{.ph .uicontrol}&mdash;The name of the Parameter Set rule.</p>
<p>b.  [If Field]{.ph .uicontrol}&mdash;Select the input field and the
properties that will be used to define the Parameter Set rule.</p>
<pre><code>The inputs are referenced as *InputName* or
*InputName.Properties*.

::: {.note .note}
[Note:]{.notetitle}
The properties are applicable only if the data type is
[MoRefefence]{.ph .uicontrol} or [Target Data Type]{.ph
.uicontrol}. For example, for a Target Data Type input field
(DeviceRegistrations), you can specify *Hypervisor Manager.IP
Address*.
:::
</code></pre>
<p>c.  [Condition]{.ph .uicontrol}&mdash;The condition for the rule. The
condition can be Equal to, Not equal to, Contains, or Matches
Pattern.</p>
<p>d.  [Value]{.ph .uicontrol}&mdash;Select or enter the value. The
Parameter Set rule uses this value along with the Condition
specified to compare the value from the [If Field]{.ph
.uicontrol}.</p>
<p>e.  [Field to be shown]{.ph .uicontrol}&mdash;Select the input field(s)
that should be made available when the Parameter Set rule
condition is satisfied.</p>
<p>f.  Click [Save]{.ph .uicontrol}.</p>
</li>
<li>
<p>To add a Progressive Disclosure rule, click [Add Rule]{.ph
.uicontrol} &gt; [Progressive Disclosure]{.ph .uicontrol}.</p>
<p>For more information, see <a href="../../../../../../../../help/resources/Workflow_Designer#workflow_input_parameter_set_and_progressive_disclosure_rules">Workflow Input Parameter Set and
Progressive Disclosure
Rules</a>{.xref}.</p>
<p>a.  [Target Field]{.ph .uicontrol}&mdash;The target input field on which
the progressive disclosure is applied.</p>
<p>b.  [Attribute ]{.ph .uicontrol}&mdash;The inputs are referenced as
<em>AttributeName.ParameterName</em>. For example, for an input field,
Virtual Manager, you can specify the attribute name as
<em>RegisteredDevice.Moid</em> or <em>ConnectionStatus</em>.</p>
<p>c.  [Condition]{.ph .uicontrol}&mdash;The rule condition for the rule.
The condition can be Equal to, Not equal to, or Contains.</p>
<p>d.  [Value]{.ph .uicontrol}&mdash;The inputs are referenced as
<code>${InputReferenceName.Attribute</code>{.ph .codeph}} or
<code>${InputReferenceName.ParameterName}</code>{.ph .codeph}. For example,
for a VM input field, you can specify the value as
<code>${HypervisorManager.Moid}</code>{.ph .codeph} or
<code>${Target.ConnectionStatus}</code>{.ph .codeph}.</p>
<pre><code>::: {.note .note}
[Note:]{.notetitle}
For a [String]{.ph .uicontrol} input field, if you have selected
the Object Selector option then you need not specify the
Attribute or Parameter value.
:::
</code></pre>
</li>
<li>
<p>In the [General]{.ph .uicontrol} tab, click [Add Workflow
Variables]{.ph .uicontrol} in the [Workflow Variables]{.ph
.uicontrol} tab. For more information, see <a href="/help/resources/Workflow_Designer#workflow_variables">Workflow
Variables</a>{.xref}.</p>
</li>
<li>
<p>In the [Add Workflow Variable]{.ph .uicontrol} screen, enter the
following details:</p>
<p>a.  [Reference Name]{.ph .uicontrol}&mdash;Enter user-friendly short
name.</p>
<p>b.  [Type]{.ph .uicontrol}&mdash;Select the data type. For example,
String, Integer, Float, Boolean, Json, Enum, MoReference, or
Target Data Type.</p>
<pre><code>The fields displayed depend on the value you select for the Type
field.
</code></pre>
<p>c.  If you select the data type as [String]{.ph .uicontrol}, specify
the following:</p>
<pre><code>i.  [Object Selector]{.ph .uicontrol}---Enable to configure the
    Intersight managed object selectors.

    The Object Selector field is optional.

ii. Specify the Intersight API Reference and selector attributes
    to feed the input from the table selection. The value will
    be passed according to the configuration set in the Value
    attribute.
</code></pre>
<p>d.  If you select the data type as [Enum]{.ph .uicontrol}, specify
the following:</p>
<pre><code>i.  [Enum List]{.ph .uicontrol}---Label and value for the Enum
    list.

ii. [Widget type]{.ph .uicontrol}---The widget type as Radio or
    none.
</code></pre>
<p>e.  If you select the data type as [Target Data Type]{.ph
.uicontrol} or [MoReference]{.ph .uicontrol}, specify the
following:</p>
<pre><code>i.  [Intersight API Reference]{.ph .uicontrol}---Enter the URL
    of the Intersight API configured with parameters.

ii. [Selector Attribute]{.ph .uicontrol}---Enter the attribute
    name(s) that needs to be displayed in the input table
    column. You can add multiple selector attributes by clicking
    [+]{.ph .uicontrol}.
</code></pre>
<p>f.  Select the [Initial Mapping To]{.ph .uicontrol} type and specify
the corresponding variable value.</p>
<p>g.  Click [Add]{.ph .uicontrol}.</p>
</li>
<li>
<p>Click [Workflow Outputs]{.ph .uicontrol} and click [Add Workflow
Output]{.ph .uicontrol}.</p>
</li>
<li>
<p>Choose a parameter and click [Add]{.ph .uicontrol}.</p>
</li>
<li>
<p>Click [Save]{.ph .uicontrol}.
:::</p>
</li>
</ol>
<p>::: {#id_131513__section_z2q_jns_drb .section}</p>
<h2 id="workflow-input-parameter-set-and-progressive-disclosure-rules" class="title sectiontitle">Workflow Input Parameter Set and Progressive Disclosure Rules</h2>
<p>When you create a workflow, you can specify the inputs for the workflow
execution. After you define the workflow inputs, you can set Parameter
Set or Progressive Disclosure rules. These rules control the
availability of workflow inputs or filter the data based on the
preceding selection during the workflow execution.</p>
<p>::: {.note .note}
[Note:]{.notetitle}</p>
<p>You can define a Parameter Set or Progressive Disclosure rule only for a
workflow that has more than two input fields with the supported data
type.
:::</p>
<p><strong>Parameter Set Rule</strong></p>
<p>The Parameter Set rules control the availability of specific parameters
or inputs during the execution. After the first input is specified, the
Parameter Set rule controls which subsequent input fields are made
available during the workflow execution.</p>
<p><strong>Example:</strong> The following example shows how to create a Parameter Set
rule for a workflow with three input fields. The workflow input fields
are:</p>
<ul>
<li>
<p>[Enum]{.ph .uicontrol}&mdash;[Type]{.ph .uicontrol} is <em>Enum</em> and [Enum
list]{.ph .uicontrol} is <em>VM</em> and <em>HX</em>.</p>
</li>
<li>
<p>[Input1]{.ph .uicontrol}&mdash;[Type]{.ph .uicontrol} is <em>String</em>.</p>
</li>
<li>
<p>[Input2]{.ph .uicontrol}&mdash;[Type]{.ph .uicontrol} is <em>String</em>.</p>
</li>
</ul>
<p>You can create two workflow input Parameter Set rules. During the
workflow execution when the [Enum]{.ph .uicontrol} value is <em>VM</em> only
[Input1]{.ph .uicontrol} field is made available. Alternately, when the
[Enum]{.ph .uicontrol} value is <em>HX</em>, only [Input2]{.ph .uicontrol} is
made available. The details of the Parameter Set rules are:</p>
<ul>
<li>
<p>[Rule1]{.ph .uicontrol}&mdash;[If Field]{.ph .uicontrol} is <em>Enum</em>,
[Condition]{.ph .uicontrol} is <em>Equal to</em>, [Value ]{.ph
.uicontrol}is <em>VM</em>, and [Fields to be shown ]{.ph .uicontrol}is
<em>Input1.</em></p>
</li>
<li>
<p>[Rule2]{.ph .uicontrol}&mdash;[If Field]{.ph .uicontrol} is <em>Enum</em>,
[Condition]{.ph .uicontrol} is <em>Equal to</em>, [Value ]{.ph
.uicontrol}is <em>HX</em>, and [Fields to be shown ]{.ph .uicontrol}is
<em>Input2.</em></p>
</li>
</ul>
<p>The following is a sample of the API request.</p>
<pre tabindex="0"><code>  &#34;InputParameterSet&#34;: [
    {
      &#34;Condition&#34;: &#34;eq&#34;,
      &#34;ControlParameter&#34;: &#34;Enum&#34;,
      &#34;EnableParameters&#34;: [
        &#34;Input1&#34;
      ],
      &#34;Name&#34;: &#34;Rule1&#34;,
      &#34;ObjectType&#34;: &#34;workflow.ParameterSet&#34;,
      &#34;Value&#34;: &#34;VM&#34;
    },
    {
      &#34;Condition&#34;: &#34;eq&#34;,
      &#34;ControlParameter&#34;: &#34;Enum&#34;,
      &#34;EnableParameters&#34;: [
        &#34;Input2&#34;
      ],
      &#34;Name&#34;: &#34;Rule2&#34;,
      &#34;ObjectType&#34;: &#34;workflow.ParameterSet&#34;,
      &#34;Value&#34;: &#34;HX&#34;
    },
</code></pre><p>The supported data types for Parameter Set rules are:</p>
<ul>
<li>
<p>Boolean</p>
</li>
<li>
<p>Enum</p>
</li>
<li>
<p>String Object Selector</p>
</li>
<li>
<p>MoReference</p>
</li>
<li>
<p>Target</p>
</li>
</ul>
<p><strong>Progressive Disclosure Rule</strong></p>
<p>The Progressive Disclosure rules filter the data available in an input
field based on the preceding selection during a workflow execution. The
first input field is populated with broadest options. The subsequent
input fields are populated with options based on the previous selection.</p>
<p><strong>Example 1:</strong> The following example shows how to create a Progressive
Disclosure rule for a workflow with two input fields. Both these input
fields are MoReference data type. The workflow input fields are:</p>
<ul>
<li>
<p>[Field1]{.ph .uicontrol}&mdash;[Type]{.ph .uicontrol} is <em>MoReference</em>,
[Intersight API Reference]{.ph .uicontrol} is
<code>/api/v1/asset/DeviceRegistrations</code>{.ph .codeph}, and [Selector
attribute]{.ph .uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}.</p>
</li>
<li>
<p>[Field2]{.ph .uicontrol}&mdash;[Type ]{.ph .uicontrol}is <em>MoReference</em>,
[Intersight API Reference]{.ph .uicontrol} is
<code>/api/v1/asset/DeviceRegistrations</code>{.ph .codeph}, and [Selector
attribute]{.ph .uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}.</p>
</li>
</ul>
<p>You can create a Progressive Disclosure rule so that during the workflow
execution, the data is filtered for [Field2 ]{.ph .uicontrol}fields
based on value in the [Field1 ]{.ph .uicontrol}field. The details of the
Progressive Disclosure rule are:</p>
<ul>
<li>[Field2 Rule]{.ph .uicontrol}&mdash;[Target Field]{.ph .uicontrol} is
<code>Field2</code>{.ph .codeph}, [Attribute]{.ph .uicontrol} is
<code>ConnectionStatus</code>{.ph .codeph}, [Condition]{.ph .uicontrol} is
<em>Equal to</em>, and [Value]{.ph .uicontrol} is
<code>${Field1.ConnectionStatus}.</code>{.ph .codeph}</li>
</ul>
<p><strong>Example 2:</strong>: The following example shows how to create a Progressive
Disclosure rule for a workflow with two input fields. Both these input
fields are composite custom data type. The workflow input fields are:</p>
<ul>
<li>
<p>[Input1]{.ph .uicontrol}&mdash;Composite data type with two fields
(Field1 and Field2)</p>
<ul>
<li>
<p>[Field1]{.ph .uicontrol}&mdash;[Type]{.ph .uicontrol} is
<em>MoReference</em>, [Intersight API Reference]{.ph .uicontrol} is
<code>/api/v1/asset/DeviceRegistrations</code>{.ph .codeph}, and [Selector
attribute]{.ph .uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}.</p>
</li>
<li>
<p>[Field2]{.ph .uicontrol}&mdash;[Type ]{.ph .uicontrol}is
<em>MoReference</em>, [Intersight API Reference]{.ph .uicontrol} is
<code>/api/v1/asset/DeviceRegistrations</code>{.ph .codeph}, and [Selector
attribute]{.ph .uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}.</p>
</li>
</ul>
</li>
<li>
<p>[Input2]{.ph .uicontrol}&mdash;Composite data type with two fields
(Field3 and Field4)</p>
<ul>
<li>
<p>[Field3]{.ph .uicontrol}&mdash;[Type]{.ph .uicontrol} is
<em>MoReference</em>, [Intersight API Reference]{.ph .uicontrol} is
<code>/api/v1/asset/DeviceRegistrations</code>{.ph .codeph}, and [Selector
attribute]{.ph .uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}.</p>
</li>
<li>
<p>[Field4]{.ph .uicontrol}&mdash;[Type ]{.ph .uicontrol}is
<em>MoReference</em>, [Intersight API Reference]{.ph .uicontrol} is
<code>/api/v1/asset/DeviceRegistrations</code>{.ph .codeph}, and [Selector
attribute]{.ph .uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}.</p>
</li>
</ul>
</li>
</ul>
<p>You can create two Progressive Disclosure rules. During the workflow
execution, the data is filtered for [Input2 ]{.ph .uicontrol}fields
based on value in the [Input1]{.ph .uicontrol} fields. The details of
the two Progressive Disclosure rules are:</p>
<ul>
<li>
<p>[Input2.Field3 Rule]{.ph .uicontrol}&mdash;[Target Field]{.ph
.uicontrol} is <code>Input2.Field3</code>{.ph .codeph}, [Attribute]{.ph
.uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}, [Condition]{.ph
.uicontrol} is <em>Equal to</em>, and [Value]{.ph .uicontrol} is
<code>${Input1.Field1.ConnectionStatus}.</code>{.ph .codeph}</p>
</li>
<li>
<p>[Input2.Field4 Rule]{.ph .uicontrol}&mdash;[Target Field]{.ph
.uicontrol} is <code>Input2.Field4</code>{.ph .codeph}, [Attribute]{.ph
.uicontrol} is <code>ConnectionStatus</code>{.ph .codeph}, [Condition]{.ph
.uicontrol} is <em>Equal to</em>, and [Value]{.ph .uicontrol} is
<code>${Input1.Field2.ConnectionStatus}.</code>{.ph .codeph}</p>
</li>
</ul>
<p>The following is a sample of the API request.</p>
<pre tabindex="0"><code>  &#34;UiInputFilters&#34;: [
    {
      &#34;Filters&#34;: [
        &#34;ConnectionStatus eq &#39;${Input1.Field1.ConnectionStatus}&#39;&#34;
      ],
      &#34;Name&#34;: &#34;Input2.Field3&#34;,
      &#34;ObjectType&#34;: &#34;workflow.UiInputFilter&#34;,
      &#34;UserHelpMessage&#34;: &#34;&#34;
    },
    {
      &#34;Filters&#34;: [
        &#34;ConnectionStatus eq &#39;${Input1.Field2.ConnectionStatus}&#39;&#34;
      ],
      &#34;Name&#34;: &#34;Input2.Field4&#34;,
      &#34;ObjectType&#34;: &#34;workflow.UiInputFilter&#34;,
      &#34;UserHelpMessage&#34;: &#34;&#34;
    }
  ]
</code></pre><p>The supported data types for the Progressive Disclosure rules are:</p>
<ul>
<li>
<p>MoReference</p>
</li>
<li>
<p>Target</p>
</li>
<li>
<p>String Object Selector
:::</p>
</li>
</ul>
<p>::: section</p>
<h2 id="workflow-variables" class="title sectiontitle">Workflow Variables</h2>
<p>Workflow variables are similar to local variables within functions of a
programming language. You define variables for workflows in Workflow
Designer, and the scope of the workflow variables lies within the
defined workflow. In a workflow, all tasks are bound to the scope of the
workflow and have access to the workflow variables that are defined for
the workflow. You can use the workflow variable to do the following:</p>
<ul>
<li>
<p>Simplify complex workflows which have multiple branches based on the
conditional operator. Save the output of tasks that get executed in
different branches of the workflow into a single variable. This
variable can then be mapped in the downstream tasks irrespective of
the branch from which it was taken.</p>
</li>
<li>
<p>Evaluate the workflow input using a complex expression, save the
result as a variable, and reuse the variable in the subsequent
tasks.</p>
</li>
<li>
<p>Transform the output of a task with the help of template functions
and map the value into a workflow variable. The variables can then
be used in multiple mappings without having to redo the
transformation in every mapping.</p>
</li>
</ul>
<p>To define the workflow variable and specify the corresponding value, you
can do the following:</p>
<ul>
<li>
<p>In the [General]{.ph .uicontrol} tab, click [Add Workflow
Variable]{.ph .uicontrol} and define the variable properties.</p>
</li>
<li>
<p>In the [Designer]{.ph .uicontrol} tab, click the task, and then
click the [Variables]{.ph .uicontrol} tab.</p>
<ul>
<li>
<p>To add a new workflow variable, click [Add Workflow
Variable]{.ph .uicontrol} and define the variable properties.</p>
</li>
<li>
<p>To add or edit a mapping to an existing variable, click [Edit
Mapping]{.ph .uicontrol} and specify the new value.</p>
<p>::: {.note .note}
[Note:]{.notetitle}
To view events for a workflow variable, click the [View]{.ph
.uicontrol} icon.
:::</p>
</li>
</ul>
</li>
</ul>
<p>The workflow variables can be assigned one of the following values:</p>
<ul>
<li>
<p>[Static value]{.ph .uicontrol}&mdash;Either the default value of the
variable or the value specified in the workflow tasks.</p>
</li>
<li>
<p>[Direct mapping ]{.ph .uicontrol}&mdash;Mapped to a workflow input, task
output, or another workflow variable.</p>
</li>
<li>
<p>[Advanced or Transformational mapping]{.ph .uicontrol}&mdash;Evaluate a
complex expression and save the result in a variable.</p>
</li>
</ul>
<p>After you define the workflow variable, you can map the workflow
variable to task input, workflow output, or as an input for another
variable. For more information, see <a href="file:/help/resources/Workflow_Designer#input_variable_and_output_mapping">Input, Variable, and Output
Mapping</a>{.xref}.</p>
<p>Following is a simple example which explains static mapping for a
workflow variable. A workflow has two tasks <em>Task1</em> and <em>Task2</em> and a
workflow variable <em>Variable1</em> is defined with a default value as <em>100</em>.
For <em>Task1</em>, in the [Variable]{.ph .uicontrol} tab for the task, you can
specify a static mapping for the workflow variable value as 90.
Similarly, for <em>Task2</em>, in the [Variable]{.ph .uicontrol} tab for the
task, you can specify the workflow variable value as 80 by mapping the
<em>Variable1</em> value.</p>
<p>When you execute the workflow, the start value of <em>Variable1</em> is the
default value <em>100</em> . After <em>Task1</em> is executed, the value of
<em>Variable1</em> is set to <em>90</em> based on the static value that is mapped for
the task. After <em>Task2</em> is executed, the value of <em>Variable1</em> is set to
<em>80</em> based on the static value that is mapped for the task.
:::</p>
<p>::: {#id_131513__section_ycb_mjr_4sb .section}</p>
<h2 id="input-variable-and-output-mapping" class="title sectiontitle">Input, Variable, and Output Mapping</h2>
<p>Workflows inputs, variables, and task outputs can be used for mapping
and they can be used as direct, transformed, or advanced mapping. The
syntax to refer to these will depend on the type of mapping.</p>
<ul>
<li>
<p>Workflow inputs are referenced as <code>${workflow.input.InputName}</code>{.ph
.codeph} where [InputName]{.ph .uicontrol} is the Reference Name
given to the workflow input and not the Display Name or Label.</p>
</li>
<li>
<p>Workflow variables are referenced as
<code>${workflow.variable.InputName}</code>{.ph .codeph} , where
[InputName]{.ph .uicontrol} is the Reference Name for the workflow
variable.</p>
</li>
<li>
<p>Task outputs are referenced as <code>${TaskName.output.OutputName}</code>{.ph
.codeph} where [TaskName]{.ph .uicontrol} is the Instance Name for
the task and not the Display Name or Label and [OutputName]{.ph
.uicontrol} is the Reference Name for the task output.</p>
</li>
</ul>
<p>To specify an input mapping, select a task and click [Edit]{.ph
.uicontrol} against a task input parameter.</p>
<p>To specify a workflow variable mapping, select a task and click
[Map]{.ph .uicontrol} against a workflow variable parameter.</p>
<p>Following are the available options:</p>
<ul>
<li>
<p>[Static Value]{.ph .uicontrol}&mdash;Enter a value that is assigned to
the task input or workflow variable field.</p>
</li>
<li>
<p>[Direct Mapping]{.ph .uicontrol}&mdash;Map an existing input, workflow
variable, or task output to the task input.</p>
</li>
<li>
<p>[Transformed Mapping]{.ph .uicontrol}&mdash;Allows applying data
transformation through a combination of one or more transformation
stages for a task's input. In each transformation stage, you can
select a transformation function along with its inputs. The
transformation stages will be converted into a template. You can
then preview the template and test the transformation with sample
values.</p>
<p>::: {.note .note}
[Note:]{.notetitle}
Transformed mapping is only supported for task inputs of primitive
data types, such as <em>string</em>, <em>integer</em>, <em>boolean</em>, and <em>float</em>.
:::</p>
</li>
<li>
<p>::: p
[Advanced Mapping]{.ph .uicontrol}&mdash;Map a Golang template to the
task input or workflow variable. For example, <code>FindAllString</code>{.ph
.codeph} function returns a slice of all substrings that match the
given regular expression in the given string.</p>
<pre tabindex="0"><code>FindAllString(s, regex string) ([]string, error)
Example: {{(FindAllString .global.task.input.NumberString \&#34;([0-9]+)\&#34;)}} 
returns array [“123”, “456”] for input string “123 some text 456”.
</code></pre><p>For example, <code>Atoi</code>{.ph .codeph} function converts the given number
in string format to integer type.</p>
<pre tabindex="0"><code>Atoi(s string) (int, error)
Example: {{Atoi .global.task.input.SizeString}} 
returns integer 2048 for input string “2048”
</code></pre><p>:::
:::</p>
</li>
</ul>
<p>::: section</p>
<h2 id="operations---conditional-task" class="title sectiontitle">Operations - Conditional Task</h2>
<p>Operations can be used to control the execution path of the workflows.
Orchestrator supports Condition tasks which can be used to control the
tasks that need to be executed.</p>
<p><strong>Tasks to Control Execution Flow of Workflows</strong></p>
<p>The [Conditional Task]{.ph .uicontrol} under [Operations]{.ph
.uicontrol} allows you to perform programmatic decisional expressions in
a conditional task during a workflow execution. The conditional
expression can be simple expression or a combined compound expression.</p>
<p>::: {.note .note}
[Note:]{.notetitle}</p>
<p>Only JSON style template is supported with conditional expressions.
:::</p>
<p>Conditional expressions support the following operators:</p>
<ul>
<li>
<p><strong>Comparison operators</strong> such as === (Equal to), != (Not equal to),
&gt; (Greater than), &lt; (Less than), &gt;= (Greater than or equal to),
&lt;= (Less than or equal to)</p>
</li>
<li>
<p><strong>Arithmetic operators</strong> such as =, -, * (Multiplication), /
(division), % (Modulo), ** (Logical AND)</p>
</li>
<li>
<p><strong>Logical operators</strong> such as &amp;&amp; (Logical AND), || (Logical OR), !
((Logical NOT)</p>
</li>
<li>
<p><strong>Ternary operator</strong> such as condition ? val1 : val2</p>
</li>
</ul>
<p>The syntax for workflow input is
<code>${workflow.input.&lt;workflow input ReferenceName&gt;}</code>{.ph .codeph} and the
syntax for task output is <code>${&lt;Task Name&gt;.output.&lt;Task Output Name&gt;}</code>{.ph
.codeph}. You can get the values for the task name and task output name
from the Code view.</p>
<p>::: p
Following is an example for conditional expressions:</p>
<pre tabindex="0"><code>if ( (${workflow.input.name} != &#39;test&#39; || ${workflow.input.name} != &#39;test123’)) &#39;bad input&#39;; else if((${workflow.input.id} != null &amp;&amp; ${workflow.input.id} % 2 == 0)) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name} != &#39;test123’ || ${workflow.input.name} != &#39;test123’)) &#39;bad input&#39;; else if((${workflow.input.id} != null &amp;&amp; ${workflow.input.id} % 2 == 0)) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}.length === 12 || ${workflow.input.name} !== ‘test’ )) &#39;even&#39;; else &#39;odd&#39;; &lt;&lt; fgfgfgfgfgfg , even
if ( (${workflow.input.name}.length === 12 || ${workflow.input.name} !== ‘test’ )) &#39;even&#39;; else &#39;odd&#39;; &lt;&lt; test , odd
if ( (${workflow.input.name} != null &amp;&amp; &#39;decisionTest&#39;.indexOf(${workflow.input.name}) != -1 )) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}.toLowerCase() == ‘testing’)) &#39;even&#39;; else &#39;odd&#39;; &lt;&lt; used integers as input name to try odd path
if ( (${workflow.input.name}.search(/\s/g) != -1)) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}.match(/\s/g) != -1)) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}.startsWith(&#39;Not&#39;,0) || ${workflow.input.name}.endsWith(&#39;.&#39;))) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}.length &gt;= 3 &amp;&amp; ${workflow.input.name}.length &lt;= 20)) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}. === undefined)) ‘odd’; else ‘even’;
if ( (${workflow.input.name}.search(&#39;Failed&#39;) != -1)) &#39;even&#39;; else &#39;odd&#39;;
if ( (${workflow.input.name}.toLowerCase() != &#39;&#39; || ${workflow.input.name}.toUpperCase() != ‘Not-assigned’ )) &#39;even&#39;; else &#39;odd&#39;;
</code></pre><p>:::</p>
<p>The expression is executed during runtime and depending on the result,
the respective path is chosen. If none of the conditions match, the
default path is chosen.</p>
<p>For example, you can have a conditional task that follows a path of
execution depending on the profile state. You can create a condition in
a workflow to check the state of the profile. If the profile is in the
[Assigned]{.ph .uicontrol} state then you can deploy the profile, else
delete the profile.</p>
<p>After choosing the conditional task, use the [Conditions]{.ph
.uicontrol} tab to specify expressions in the [Condition]{.ph
.uicontrol} field of the tab. The values for the condition are specified
in the [Value]{.ph .uicontrol} field of the [Cases]{.ph .uicontrol}
area. Expressions are validated for syntax accuracy when workflow is
saved.</p>
<p>The following examples return the value of the condition.</p>
<p>::: p</p>
<pre tabindex="0"><code>${workflow.input.Names}.length
${workflow.input.ArrayOfIds}.length              (here ArrayOfIds represent an array)
${workflow.input.Names}.toLowerCase()
${workflow.input.Names}.toUpperCase()
</code></pre><p>:::</p>
<p>The following examples return the boolean value 'true' or 'false'.</p>
<p>::: p</p>
<pre tabindex="0"><code>${workflow.input.Names}.startsWith(&#39;Te&#39;)
${workflow.input.Names}.endsWith(&#39;st&#39;)
${workflow.input.Names} == null
${workflow.input.Names} != null
</code></pre><p>:::</p>
<p>In addition to workflow, task output can also be used. Here a boolean
value is used in a ternary operation. If True, branch1 executes,
otherwise branch2 executes <em>${task1.output.IsValid} ? branch1 :
branch2</em>.
:::</p>
<p>::: {#id_131513__section_j5c_qy5_rrb .section}</p>
<h2 id="operations---parallel-loop-task" class="title sectiontitle">Operations - Parallel Loop Task</h2>
<p>Operations can be used to control the execution path of the workflows.
Orchestrator supports the Parallel Loop operation task that can be used
to run a single task or sub-workflow, iteratively, based on a specified
count input.</p>
<p>The iteration count can either be a static value that is specified when
the workflow is created or a dynamic value that is derived from a
workflow input or task output.</p>
<p>When the task is executed, the count 'N' is determined, and the tasks
or sub-workflows are scheduled for execution in parallel. When all the
instances of the task or sub-workflow reach a final state, the parallel
loop operation completes, and the workflow execution moves on to the
next task.</p>
<p>::: {.note .note}
[Note:]{.notetitle}</p>
<p>If one of the tasks or sub-workflows fails then the entire parallel loop
task fails.
:::</p>
<p>The dynamic values for the count must be specified as a template
function. For example, if a loop must run for a count which matches the
length of a workflow input called [StringArray]{.ph .uicontrol}, then
the count must be specified using a template function <em>{{ len
.global.workflow.input.StringArray }}</em>.</p>
<p>In addition, you can use the keyword <em>.iteration</em> in a workflow template
input to control the inputs that feed into the task. For example, the
task within the loop needs to take one value from the workflow input
[StringArray]{.ph .uicontrol}, then the task string input can be mapped
to the template <em>HostGroupName{{.iteration}}</em> during the workflow
creation.</p>
<p>Use the <strong>Parallel Loop</strong> task from the <strong>Operations</strong> section in the
Intersight Orchestrator Workflow Designer UI to build the workflow.</p>
<p>To add a task or a sub-workflow to a Parallel Loop task, you must drag
and drop the single task or sub-workflow inside the Parallel Loop task
in the Workflow Designer UI.</p>
<p>The following table explains the Parallel Loop task input properties:</p>
<p>::: tablenoborder
+&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| Property | Description                                              |
+==========+==========================================================+
| Count    | The iteration count value for the parallel loop. The     |
|          | count can either be a static value defined as a constant |
|          | or a dynamic value defined as an expression that is      |
|          | evaluated to an integer value at execution time.         |
|          |                                                          |
|          | The dynamic values for the count must be specified as a  |
|          | template function. For example, if a loop must run for a |
|          | count which matches the length of a workflow input       |
|          | called <code>StringArray</code>{.ph .codeph}, then the count must   |
|          | be specified using a template function                   |
|          | <code>{{ len .global.workflow.input.StringArray }}</code>{.ph       |
|          | .codeph}.                                                |
|          |                                                          |
|          | The count must be less than or equal to 100.             |
+&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
:::</p>
<p><strong>Example: <strong>Create a workflow with the Parallel Loop task to create
multiple storage host groups</strong></strong></p>
<p>The following example workflow has two tasks&mdash;Parallel Loop and New
Storage Host Group. The first task runs the Parallel Loop task. In this
task, the Count input is a static value and is set to <em>2</em>. The second
task, New Storage Host Group, creates storage host groups with the host
group name as a workflow input.</p>
<p>When the workflow is executed, the count 'N' is determined as 2, and
two create storage host group tasks are executed in parallel. When all
the instances of the task reach a final state, the parallel loop
completes.</p>
<p>The workflow input field required for this example is as follows:</p>
<p>::: tablenoborder
+&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| Property       | Description                                        |
+================+====================================================+
| Storage Device | -   [Reference Name]{.ph                           |
|                |     .uicontrol}&mdash;<em>StorageDevice</em>                  |
|                |                                                    |
|                | -   [Type]{.ph .uicontrol}&mdash;<em>Target Data Type</em>    |
|                |                                                    |
|                | -   [Intersight API Reference]{.ph                 |
|                |     .uicontrol}&mdash;<em>/api/v1/storage/PureArrays</em>     |
|                |                                                    |
|                | -   [Selector Attribute]{.ph .uicontrol}&mdash;<em>Name</em>  |
|                |                                                    |
|                | -   [Selector Attribute]{.ph                       |
|                |     .uicontrol}&mdash;<em>Vendor</em>                         |
+&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
:::</p>
<p>The following table lists the properties for the Parallel Loop task:</p>
<p>::: tablenoborder
Property   Description</p>
<hr>
<p>Count      [Count]{.ph .uicontrol}&mdash;<em>2</em>
:::</p>
<p>The following table lists the properties for the New Storage Host Group
task:</p>
<p>::: tablenoborder
+&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| Property       | Description                                        |
+================+====================================================+
| Storage Device | [Workflow Input]{.ph                               |
|                | .uicontrol}&mdash;<em>${workflow.input.StorageDevice}</em>   |
+&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| Host Group     | [Custom Value]{.ph                                 |
|                | .uicontrol}&mdash;<em>HostGroupName{{.iteration}}</em>        |
|                |                                                    |
|                | The keyword <em>.iteration</em> in a workflow template    |
|                | input to control the inputs that feed into the     |
|                | task.                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
:::</p>
<p>After you execute the workflow, you would see the following output:</p>
<pre tabindex="0"><code>├── New Storage Host Group
├── ...
│   ├── Inputs
│   │   └── Host Group: HostGroupName0
│   │       └── Storage Device:{ 2 }
│   │           ├── Moid: 619efa1d6e64612d317a248a
│   │           └── ObjectType: storage.PureArray
│   └── Outputs
│       ├── ConfigResults:[ 1 ]
│       │   └── Object: { 4 }
│       │       ├── ConfigResCtx: { 1 }
│       │       │   └── EntityData: { 1 }
│       │       │       └── task: workflow.ApiTask
│       │       ├── Message: Host group created successfully.
│       │       ├── State: Ok
│       │       └── Type: Config
│       └── Host Group: HostGroupName0
├── New Storage Host Group
└── ...
    ├── Inputs
    │   └── Host Group: HostGroupName1
    │       └── Storage Device:{ 2 }
    │           ├── Moid: 619efa1d6e64612d317a248a
    │           └── ObjectType: storage.PureArray
    └── Outputs
        ├── ConfigResults:[ 1 ]
        │   └── Object: { 4 }
        │       ├── ConfigResCtx: { 1 }
        │       │   └── EntityData: { 1 }
        │       │       └── task: workflow.ApiTask
        │       ├── Message: Host group created successfully.
        │       ├── State: Ok
        │       └── Type: Config
        └── Host Group: HostGroupName1
</code></pre><p>The following is a sample code view:</p>
<pre tabindex="0"><code>{
  &#34;Catalog&#34;: {
    &#34;Moid&#34;: &#34;5e6109bc696f6e2d31f856e5&#34;,
    &#34;ObjectType&#34;: &#34;workflow.Catalog&#34;,
    &#34;link&#34;: &#34;https://www.intersightcom/api/v1/workflow/Catalogs/5e6109bc696f6e2d31f856e5&#34;
  },
  &#34;DefaultVersion&#34;: true,
  &#34;Description&#34;: &#34;&#34;,
  &#34;InputDefinition&#34;: [
    {
      &#34;CustomDataTypeProperties&#34;: {
        &#34;CatalogMoid&#34;: &#34;&#34;,
        &#34;CustomDataTypeId&#34;: &#34;&#34;,
        &#34;CustomDataTypeName&#34;: &#34;&#34;,
        &#34;ObjectType&#34;: &#34;workflow.CustomDataProperty&#34;
      },
      &#34;Default&#34;: {
        &#34;IsValueSet&#34;: false,
        &#34;ObjectType&#34;: &#34;workflow.DefaultValue&#34;,
        &#34;Override&#34;: false,
        &#34;Value&#34;: null
      },
      &#34;Description&#34;: &#34;&#34;,
      &#34;DisplayMeta&#34;: {
        &#34;InventorySelector&#34;: true,
        &#34;ObjectType&#34;: &#34;workflow.DisplayMeta&#34;,
        &#34;WidgetType&#34;: &#34;None&#34;
      },
      &#34;InputParameters&#34;: null,
      &#34;IsArray&#34;: false,
      &#34;Label&#34;: &#34;Storage Device&#34;,
      &#34;Max&#34;: 0,
      &#34;Min&#34;: 0,
      &#34;Name&#34;: &#34;StorageDevice&#34;,
      &#34;ObjectType&#34;: &#34;workflow.TargetDataType&#34;,
      &#34;Properties&#34;: [
        {
          &#34;ConnectorAttribute&#34;: &#34;RegisteredDevice.Moid&#34;,
          &#34;ConstraintAttributes&#34;: [
            &#34;ObjectType&#34;
          ],
          &#34;DisplayAttributes&#34;: [
            &#34;Name&#34;,
            &#34;Vendor&#34;
          ],
          &#34;ObjectType&#34;: &#34;workflow.TargetProperty&#34;,
          &#34;Selector&#34;: &#34;/api/v1/storage/PureArrays&#34;,
          &#34;SelectorProperty&#34;: {
            &#34;Body&#34;: null,
            &#34;Method&#34;: &#34;GET&#34;,
            &#34;ObjectType&#34;: &#34;workflow.SelectorProperty&#34;
          },
          &#34;SupportedObjects&#34;: [
            &#34;storage.PureArray&#34;
          ]
        }
      ],
      &#34;Required&#34;: true
    }
  ],
  &#34;InputParameterSet&#34;: [],
  &#34;Label&#34;: &#34;Parallel Loop&#34;,
  &#34;Name&#34;: &#34;ParallelLoop&#34;,
  &#34;OutputDefinition&#34;: [],
  &#34;OutputParameters&#34;: null,
  &#34;Properties&#34;: {
    &#34;Cloneable&#34;: true,
    &#34;EnableDebug&#34;: false,
    &#34;ExternalMeta&#34;: true,
    &#34;ObjectType&#34;: &#34;workflow.WorkflowProperties&#34;,
    &#34;Retryable&#34;: false,
    &#34;SupportStatus&#34;: &#34;Supported&#34;
  },
  &#34;Tags&#34;: [],
  &#34;Tasks&#34;: [
    {
      &#34;Description&#34;: &#34;&#34;,
      &#34;Label&#34;: &#34;&#34;,
      &#34;Name&#34;: &#34;StartTask&#34;,
      &#34;NextTask&#34;: &#34;parallelLoop1&#34;,
      &#34;ObjectType&#34;: &#34;workflow.StartTask&#34;
    },
    {
      &#34;Description&#34;: &#34;&#34;,
      &#34;Label&#34;: &#34;&#34;,
      &#34;Name&#34;: &#34;SuccessEndTask&#34;,
      &#34;ObjectType&#34;: &#34;workflow.SuccessEndTask&#34;
    },
    {
      &#34;Description&#34;: &#34;&#34;,
      &#34;Label&#34;: &#34;&#34;,
      &#34;Name&#34;: &#34;FailureEndTask&#34;,
      &#34;ObjectType&#34;: &#34;workflow.FailureEndTask&#34;
    },
    {
      &#34;Count&#34;: &#34;2&#34;,
      &#34;Description&#34;: &#34;A Parallel Loop is a control task that runs one task or one sub-workflow multiple times based on a specified count.  The count can be a static value that is specified during design time or a dynamic value that is derived from workflow inputs or task outputs.  When the loop is executed, the count &#39;N&#39; is determined, N tasks or sub-workflows are scheduled for execution in parallel.  When all N instances of the task or sub-workflow reach a final state the parallel loop will complete and workflow execution will move on to the next task.  If any one of the tasks or sub-workflows fails, then the entire loop will fail.  Dynamic values for count must be specified as a template.  For example, if a loop must run for a count which matches the length of a workflow input called StringArray, then the count must be specified using a template &#39;{{ len .global.workflow.input.StringArray }}&#39;.  The iteration of the loop is available using the keyword &#39;.iteration&#39; and it can be used to control inputs that feed into the task.  For example, the task inside the loop needs to take one value from the workflow input StringArray, then the task string input can be mapped to the template &#39;{{ index .global.workflow.input.StringArray .iteration}}&#39; during design.&#34;,
      &#34;Label&#34;: &#34;Parallel Loop&#34;,
      &#34;LoopStartTask&#34;: &#34;NewStorageHostGroup1&#34;,
      &#34;Name&#34;: &#34;parallelLoop1&#34;,
      &#34;NumberOfBatches&#34;: 1,
      &#34;ObjectType&#34;: &#34;workflow.LoopTask&#34;,
      &#34;OnSuccess&#34;: &#34;SuccessEndTask&#34;,
      &#34;Parallel&#34;: true
    },
    {
      &#34;CatalogMoid&#34;: &#34;5c2fc884696f6e2d316c5d59&#34;,
      &#34;Description&#34;: &#34;Create a host group with host group name as input. On successful execution, the newly created host group name is generated as output.&#34;,
      &#34;InputParameters&#34;: {
        &#34;HostGroupName&#34;: &#34;HostGroupName{{.iteration}}&#34;,
        &#34;StorageDevice&#34;: &#34;${workflow.input.StorageDevice}&#34;
      },
      &#34;Label&#34;: &#34;New Storage Host Group&#34;,
      &#34;Name&#34;: &#34;NewStorageHostGroup1&#34;,
      &#34;ObjectType&#34;: &#34;workflow.WorkerTask&#34;,
      &#34;OnFailure&#34;: &#34;&#34;,
      &#34;OnSuccess&#34;: &#34;&#34;,
      &#34;RollbackDisabled&#34;: false,
      &#34;TaskDefinitionId&#34;: &#34;5f7ed8a2696f6e2d30eb388b&#34;,
      &#34;TaskDefinitionName&#34;: &#34;NewStorageHostGroup&#34;,
      &#34;UseDefault&#34;: false,
      &#34;Version&#34;: 2
    }
  ],
  &#34;UiInputFilters&#34;: [],
  &#34;UiRenderingData&#34;: {
    &#34;Positions&#34;: [
      {
        &#34;Name&#34;: &#34;StartTask&#34;,
        &#34;X&#34;: 269.5,
        &#34;Y&#34;: 45.5
      },
      {
        &#34;Name&#34;: &#34;SuccessEndTask&#34;,
        &#34;X&#34;: 269.5,
        &#34;Y&#34;: 303
      },
      {
        &#34;Name&#34;: &#34;FailureEndTask&#34;,
        &#34;X&#34;: 412.5,
        &#34;Y&#34;: 303
      },
      {
        &#34;Name&#34;: &#34;parallelLoop1&#34;,
        &#34;X&#34;: 149.01800537109375,
        &#34;Y&#34;: 116.75314331054688
      },
      {
        &#34;Name&#34;: &#34;NewStorageHostGroup1&#34;,
        &#34;X&#34;: 185,
        &#34;Y&#34;: 177
      }
    ]
  },
  &#34;Version&#34;: 1,
  &#34;WorkflowMetadata&#34;: null
}
</code></pre><p>:::</p>
<p>::: section</p>
<h2 id="managing-the-lifecycle-of-a-workflow" class="title sectiontitle">Managing the Lifecycle of a Workflow</h2>
<p>Workflow management consists of organizing, creating, updating, and
deletion of workflows. The following table describes the set of actions
that you can perform with workflows in Cisco Intersight.</p>
<p>::: tablenoborder
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Actions                           | Description                       |
+===================================+===================================+
| View Workflows                    | Choosing [Orchestration]{.ph      |
|                                   | .uicontrol} from the left         |
|                                   | navigation pane will display all  |
|                                   | workflows in a tabular format.    |
|                                   | You can view information such as  |
|                                   | the workflow name and             |
|                                   | description, the number of        |
|                                   | versions available, the number of |
|                                   | times the workflow has been       |
|                                   | executed, the last execution      |
|                                   | status, validation information    |
|                                   | and the last update time and      |
|                                   | date.                             |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Create a New Workflow             | Choose [Orchestration]{.ph        |
|                                   | .uicontrol} from the left         |
|                                   | navigation pane and click [Create |
|                                   | Workflow]{.ph .uicontrol}. This   |
|                                   | option opens up the Workflow      |
|                                   | Designer, using which you can     |
|                                   | create a new workflow.            |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Create a Version for a Workflow   | You can create multiple versions  |
|                                   | for a workflow. In addition, you  |
|                                   | can set a specific version of the |
|                                   | workflow as the default version   |
|                                   | for the workflow. See [Managing   |
|                                   | Versions for                      |
|                                   | Workflows                         |
|                                   | ](../../../../../../../../help/re |
|                                   | sources/Workflow_Designer#managin |
|                                   | g_versions_for_workflows){.xref}. |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Delete a Workflow                 | From the tabular list of          |
|                                   | workflows, you can select a       |
|                                   | workflow and click [Delete]{.ph   |
|                                   | .uicontrol}. This will remove the |
|                                   | workflow and all versions of the  |
|                                   | workflow.                         |
|                                   |                                   |
|                                   | You cannot delete a workflow when |
|                                   | :                                 |
|                                   |                                   |
|                                   | -   workflow is used as           |
|                                   |     sub-workflow task in another  |
|                                   |     workflow.                     |
|                                   |                                   |
|                                   | -   workflow is in running state. |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Execute a Workflow                | Select a workflow from the        |
|                                   | tabular list of workflows and     |
|                                   | choose [Execute]{.ph .uicontrol}. |
|                                   | Alternatively, you can click the  |
|                                   | workflow name, and then choose    |
|                                   | [Execute]{.ph .uicontrol} in the  |
|                                   | Workflow Designer.                |
|                                   |                                   |
|                                   | ::: {.note .important}            |
|                                   | [Important:]{.importanttitle}     |
|                                   |                                   |
|                                   | Workflow execution includes       |
|                                   | privilege-based validation for    |
|                                   | tasks. With the introduction of   |
|                                   | privilege-based validation for    |
|                                   | virtualization, compute and       |
|                                   | storage tasks, a user must have   |
|                                   | all the required privileges to    |
|                                   | execute all the domain tasks      |
|                                   | within a workflow. For example, a |
|                                   | user can successfully execute a   |
|                                   | workflow that includes storage    |
|                                   | and virtualization tasks only if  |
|                                   | the user has both Storage and     |
|                                   | Virtualization Administrator      |
|                                   | privileges. In the absence of     |
|                                   | either one of these privileges,   |
|                                   | the [Execute]{.ph .uicontrol}     |
|                                   | button will not be displayed and  |
|                                   | the user cannot execute the       |
|                                   | workflow.                         |
|                                   |                                   |
|                                   | However, an Account Administrator |
|                                   | can execute all workflow.         |
|                                   | :::                               |
|                                   |                                   |
|                                   | While configuring the properties  |
|                                   | of a workflow, if you selected    |
|                                   | the [Retryable]{.ph .uicontrol}   |
|                                   | option, then in the event of a    |
|                                   | workflow failure, you can either  |
|                                   | choose to execute the workflow    |
|                                   | again from the point of failure,  |
|                                   | or you can execute the entire     |
|                                   | workflow again.                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Clone a Workflow                  | From the tabular list of          |
|                                   | workflows, you can select a       |
|                                   | workflow and click [Clone]{.ph    |
|                                   | .uicontrol}. This will clone the  |
|                                   | selected workflow.                |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Save a Workflow as                | From the tabular list of          |
|                                   | workflows, you can choose a       |
|                                   | workflow and click. By default,   |
|                                   | the workflow details are          |
|                                   | displayed in the [Designer]{.ph   |
|                                   | .uicontrol} tab. You can choose   |
|                                   | [Save As]{.ph .uicontrol} option  |
|                                   | from the [Action]{.ph .uicontrol} |
|                                   | drop-down list to clone or create |
|                                   | a new version of the existing     |
|                                   | workflow.                         |
|                                   |                                   |
|                                   | You can also perform this         |
|                                   | operation in the [General]{.ph    |
|                                   | .uicontrol} tab.                  |
|                                   |                                   |
|                                   | In the [Save As]{.ph .uicontrol}  |
|                                   | screen, you can choose one of the |
|                                   | following:                        |
|                                   |                                   |
|                                   | -   [New Version]{.ph             |
|                                   |     .uicontrol}&mdash;Specify a new   |
|                                   |     version and related           |
|                                   |     description. Click [Save]{.ph |
|                                   |     .uicontrol}.                  |
|                                   |                                   |
|                                   |     This option is not available  |
|                                   |     for a system generated        |
|                                   |     workflow.                     |
|                                   |                                   |
|                                   | -   [Clone]{.ph                   |
|                                   |     .uicontrol}&mdash;Specify         |
|                                   |     user-friendly short name,     |
|                                   |     reference name, description,  |
|                                   |     and tag key. Click [Save]{.ph |
|                                   |     .uicontrol}. For more         |
|                                   |     information, see [Cloning a   |
|                                   |     Workflow](../../../../../../  |
|                                   | ../../help/resources/Workflow_Des |
|                                   | igner#cloning_a_workflow){.xref}. |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
:::
:::</p>
<p>::: {#id_131513__CloningWorkflow .section}</p>
<h2 id="cloning-a-workflow" class="title sectiontitle">Cloning a Workflow</h2>
<p>You can clone a workflow. The cloned workflow is identical to the
original workflow. You can edit the new workflow immediately. You might
do this, for example, to create a workflow that is similar to the source
workflow that can be edited based on your requirements. The new workflow
has a new, separate version history.</p>
<p>To clone a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose [Orchestration]{.ph .uicontrol} from the left navigation
pane.</p>
</li>
<li>
<p>From the tabular list of workflows, select a workflow and choose
[Clone]{.ph .uicontrol}.</p>
</li>
<li>
<p>In the [Clone Workflow]{.ph .uicontrol} screen, edit the
user-friendly short name, reference name, description, and
organization details. The organization mappings are displayed only
for pre-canned workflows and not for the custom workflows.</p>
</li>
<li>
<p>Check the [Open Clone in Editor]{.ph .uicontrol} check box if you
want to open the cloned workflow in the workflow designer and edit
the details.</p>
<p>::: {.note .note}
[Note:]{.notetitle}
[Open Clone in Editor]{.ph .uicontrol} check box is not displayed
when you clone a workflow using the [Save As]{.ph .uicontrol}
option.
:::</p>
</li>
<li>
<p>Click [Clone]{.ph .uicontrol}.
:::</p>
</li>
</ol>
<p>::: {#id_131513__section_azj_mg5_dpb .section}</p>
<h2 id="managing-versions-for-workflows" class="title sectiontitle">Managing Versions for Workflows</h2>
<p>Cisco Intersight allows you to create and manage versions for workflows.
In addition to creating versions, you can also set a specific version as
the default version for the workflow. You can create a version of a
workflow and execute it only if you are one of the following users:</p>
<ul>
<li>
<p>Account Administrator</p>
</li>
<li>
<p>User with Workflow Designer privileges</p>
</li>
</ul>
<p>Read-Only users can only view versions of a workflow. They cannot
create, edit, execute or delete versions. Users with Storage
Administrator and Virtualization Administrator privileges can only view
and execute specific versions of a workflow.</p>
<p>To create a version for a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose [Orchestration]{.ph .uicontrol} from the left navigation
pane.</p>
</li>
<li>
<p>From the tabular list of workflows, select a workflow and choose
[Manage Versions]{.ph .uicontrol}.</p>
</li>
<li>
<p>In the [Manage Versions]{.keyword .wintitle} screen, you can perform
the following tasks:</p>
<ul>
<li>
<p>Create a new version for the workflow</p>
</li>
<li>
<p>Execute a specific version of the workflow</p>
</li>
<li>
<p>Delete a specific version. You cannot directly delete the
default version of a workflow. To delete the default version,
perform the following:</p>
<ul>
<li>
<p>Make another version the default.</p>
</li>
<li>
<p>Change the workflow version to be deleted as non-default.</p>
</li>
<li>
<p>Delete the workflow version that was changes as non-default.</p>
</li>
</ul>
</li>
<li>
<p>Set a specific version of the workflow as the default version</p>
</li>
</ul>
</li>
<li>
<p>Choose [Create a New Version]{.ph .uicontrol} and enter the
following details:</p>
<ul>
<li>
<p>[Source Version]{.ph .uicontrol}&mdash;Choose a specific version
that will form the source for the new version that you are
creating.</p>
</li>
<li>
<p>[Version]{.ph .uicontrol}&mdash;Specify a version number for the
workflow.</p>
</li>
<li>
<p>[Description]{.ph .uicontrol}&mdash;Enter a description for the
version so that you can identify it.</p>
</li>
<li>
<p>[Set as Default Version]{.ph .uicontrol}&mdash;Check this check box
to set this new version as the default version for the workflow.</p>
</li>
</ul>
</li>
<li>
<p>Click [Create]{.ph .uicontrol}.</p>
<p>After creating a version for a workflow, clicking on the version
number on the [Manage Versions]{.keyword .wintitle} screen opens the
workflow in Workflow Designer.</p>
</li>
</ol>
<p>::: {.note .note}
[Note:]{.notetitle}</p>
<p>Deleting a workflow will delete all versions created for the workflow.
:::
:::</p>
<p>::: section</p>
<h2 id="exporting-a-workflow" class="title sectiontitle">Exporting a Workflow</h2>
<p>Intersight Cloud Orchestrator enables you to export workflows from an
account to your system and then import them to another account.</p>
<p>To export a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose [Orchestration]{.ph .uicontrol} from the left navigation
pane.</p>
</li>
<li>
<p>Click the [Workflow]{.ph .uicontrol} tab.</p>
</li>
<li>
<p>From the tabular list of workflows, do one of the following:</p>
<ul>
<li>
<p>Select a workflow, click the [Ellipsis (&hellip;)]{.ph .uicontrol}
icon in the same row, and then choose [Export Workflow]{.ph
.uicontrol}.</p>
</li>
<li>
<p>Select multiple workflows, click the [Ellipsis (&hellip;)]{.ph
.uicontrol} icon from the header or footer of the tabular list,
and then choose [Export Workflow]{.ph .uicontrol}.</p>
<p>::: {.note .note}
[Note:]{.notetitle} You can also export workflows from the
[Actions]{.ph .uicontrol} menu in the [Workflow
Designer]{.keyword .wintitle} window.
:::</p>
</li>
</ul>
</li>
<li>
<p>In the [Export Workflow]{.ph .uicontrol} screen:</p>
<p>a.  In the [JSON File Name]{.ph .uicontrol} field, use the default
filename or enter a filename of your choice for the JSON file
that stores the workflow components.</p>
<p>b.  Use the [Export Tags]{.ph .uicontrol} toggle button to include
or exclude the user-defined tags. ICO does not export the
system-defined tags.</p>
<p>c.  Click [Export]{.ph .uicontrol}.</p>
<p>d.  Save a local copy of the JSON file.</p>
</li>
</ol>
<h2 id="importing-a-workflow" class="title sectiontitle">Importing a Workflow</h2>
<p>Intersight Cloud Orchestrator enables you to import workflows to your
account by importing a JSON file that contains the workflow components.
You can create the JSON file by exporting the workflow components from
another account.</p>
<p>To import a workflow, complete the following steps:</p>
<ol>
<li>
<p>Choose [Orchestration]{.ph .uicontrol} from the left navigation
pane.</p>
</li>
<li>
<p>Click [Import]{.ph .uicontrol}.</p>
<p>The [Import]{.keyword .wintitle} wizard appears.</p>
</li>
<li>
<p>In the [Select File]{.keyword .wintitle} screen:</p>
<p>a.  From the [Organization]{.ph .uicontrol} drop-down list, choose
the organization to which you want to import the workflow(s).</p>
<p>b.  Click [Browse]{.ph .uicontrol}, and then select the JSON file
that contains the Workflow(s).</p>
<pre><code>::: {.note .note}
[Note:]{.notetitle} Ensure that the file size of the JSON file
is not more than 1MB. If the file size is more than 1MB, export
the workflow(s) in batches, and then try import.
:::
</code></pre>
<p>c.  Click [Next]{.ph .uicontrol}.</p>
<pre><code>Intersight Cloud Orchestrator validates the JSON file and
displays the workflow(s) in the [Details]{.keyword .wintitle}
screen.
</code></pre>
</li>
<li>
<p>In the [Details]{.keyword .wintitle} screen:</p>
<p>a.  To associate an additional tag to the components listed in the
table, enter the tag in the [Set Tags]{.ph .uicontrol} field.</p>
<pre><code>::: {.note .note}
[Note:]{.notetitle} [Set Tags]{.ph .uicontrol} is an optional
field. You must enter the tag in the `key:value`{.ph .codeph}
format.
:::
</code></pre>
<p>b.  If one or more workflow components are already available in the
system, choose a rule to replace or skip the duplicate
components.</p>
<p>c.  Click [Import]{.ph .uicontrol}.</p>
</li>
<li>
<p>In the [Import Result]{.keyword .wintitle} screen:</p>
<p>a.  Verify the status of the imported workflow.</p>
<p>b.  If you want to view the details of the import request:</p>
<pre><code>-   Click the link displayed above the table.

-   Alternatively, click the [Requests]{.ph .uicontrol} icon
    displayed in the menu bar.

    For more information, see
    [Requests](../../../../../../../../help/resources/Workflow_Designer#requests){.xref}.
</code></pre>
<p>c.  Click [Close]{.ph .uicontrol}.</p>
</li>
</ol>
<p>You can execute the imported workflow from the [Workflows]{.ph
.uicontrol} tab.
:::</p>
<p>::: section</p>
<h2 id="defining-workflow-input-rules" class="title sectiontitle">Defining Workflow Input Rules</h2>
<p>Intersight Cloud Orchestrator allows you to configure input rules that
control the display of fields in the workflow execution screen. You can
define these input rules for a workflow by using the Intersight API and
while creating a composite data type. By default, all input fields for a
workflow are displayed in the workflow execution screen. By configuring
input rules, the fields in this screen are displayed or hidden based on
the value selected for a previous input field.</p>
<p>After configuring input rules in the workflow definition using the
Intersight API, you can view the input rules using the [Code]{.ph
.uicontrol} tab in the Workflow Designer.</p>
<p>Following is a sample of a simple input rule set for a workflow:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#4e9a06">&#34;InputParameterSet&#34;</span><span style="color:#a40000">:</span><span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;ObjectType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;workflow.ParameterSet&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;Name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;rule-1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;ControlParameter&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;input-1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;Condition&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;eq&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;Value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;EnableParameters&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">&#34;input-2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;ObjectType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;workflow.ParameterSet&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;Name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;rule-2&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;ControlParameter&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;input-1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;Condition&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ne&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;Value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;true&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&#34;EnableParameters&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">&#34;input-3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span></code></pre></div><p>Following is an example for the parameter sets defined at workflow
level:</p>
<pre tabindex="0"><code>{
  &#34;Label&#34;: &#34;Provision VM&#34;,
  &#34;Name&#34;: &#34;ProvisionVM&#34;,
  &#34;DefaultVersion&#34;: true,
  &#34;Description&#34;: &#34;&#34;,
  // Parameter set defintion 
  &#34;InputParameterSet&#34;: [
    {
      // rule-1 enables &#39;vmwarehost&#39; input when value of &#39;vmtype&#39; is &#39;vmware&#39;
      &#34;Name&#34;: &#34;rule-1&#34;,
      &#34;ControlParameter&#34;: &#34;vmtype&#34;,
      &#34;Condition&#34;: &#34;eq&#34;,
      &#34;Value&#34;: &#34;vmware&#34;,
      &#34;EnableParameters&#34;: [
        &#34;vmwarehost&#34;
      ]
    },
    {
      // rule-2 enables &#39;hxcluster&#39; input when value of &#39;vmtype&#39; is &#39;hx&#39;
      &#34;Name&#34;: &#34;rule-2&#34;,
      &#34;ControlParameter&#34;: &#34;vmtype&#34;,
      &#34;Condition&#34;: &#34;eq&#34;,
      &#34;Value&#34;: &#34;hx&#34;,
      &#34;EnableParameters&#34;: [
        &#34;hxcluster&#34;
      ]
    }
  ],
  &#34;InputDefinition&#34;: [
    {
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;,
      &#34;InputParameters&#34;: null,
      &#34;Label&#34;: &#34;VM Type&#34;,
      &#34;Name&#34;: &#34;vmtype&#34;,
      &#34;Required&#34;: false,
      &#34;Properties&#34;: {
        &#34;ClassId&#34;: &#34;workflow.PrimitiveDataProperty&#34;,
        &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataProperty&#34;,
        &#34;Constraints&#34;: {
          &#34;ClassId&#34;: &#34;workflow.Constraints&#34;,
          &#34;ObjectType&#34;: &#34;workflow.Constraints&#34;,
          &#34;EnumList&#34;: [
            {
              &#34;ClassId&#34;: &#34;workflow.EnumEntry&#34;,
              &#34;ObjectType&#34;: &#34;workflow.EnumEntry&#34;,
              &#34;Label&#34;: &#34;VMWare&#34;,
              &#34;Value&#34;: &#34;vmware&#34;
            },
            {
              &#34;ClassId&#34;: &#34;workflow.EnumEntry&#34;,
              &#34;ObjectType&#34;: &#34;workflow.EnumEntry&#34;,
              &#34;Label&#34;: &#34;HX&#34;,
              &#34;Value&#34;: &#34;hx&#34;
            }
          ],
          &#34;Max&#34;: 0,
          &#34;Min&#34;: 0,
          &#34;Regex&#34;: &#34;&#34;
        },
        &#34;InventorySelector&#34;: [],
        &#34;Secure&#34;: false,
        &#34;Type&#34;: &#34;enum&#34;
      }
    },
    {
      &#34;Name&#34;: &#34;vmname&#34;,
      &#34;Label&#34;: &#34;VM Name&#34;,
      &#34;Required&#34;: false,
      &#34;Properties&#34;: {
        &#34;Type&#34;: &#34;string&#34;,
        &#34;Constraints&#34;: {
          &#34;Min&#34;: 0,
          &#34;Max&#34;: 0
        },
        &#34;Secure&#34;: false
      },
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;
    },
    {
      &#34;Name&#34;: &#34;vmwarehost&#34;,
      &#34;Label&#34;: &#34;Host&#34;,
      &#34;Required&#34;: false,
      &#34;Properties&#34;: {
        &#34;Type&#34;: &#34;string&#34;,
        &#34;Constraints&#34;: {
          &#34;Min&#34;: 0,
          &#34;Max&#34;: 0
        },
        &#34;Secure&#34;: false
      },
      &#34;Default&#34;: {
        &#34;Override&#34;: false,
        &#34;Value&#34;: null
      },
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;
    },
    {
      &#34;Name&#34;: &#34;hxcluster&#34;,
      &#34;Label&#34;: &#34;Cluster&#34;,
      &#34;Required&#34;: false,
      &#34;Properties&#34;: {
        &#34;Type&#34;: &#34;string&#34;,
        &#34;Constraints&#34;: {
          &#34;Min&#34;: 0,
          &#34;Max&#34;: 0
        },
        &#34;Secure&#34;: false
      },
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;
    }
  ],
  &#34;OutputDefinition&#34;: [],
  &#34;OutputParameters&#34;: null,
  &#34;Tasks&#34;: [
    {
      &#34;ClassId&#34;: &#34;workflow.StartTask&#34;,
      &#34;Description&#34;: &#34;&#34;,
      &#34;Label&#34;: &#34;&#34;,
      &#34;Name&#34;: &#34;StartTask&#34;,
      &#34;NextTask&#34;: &#34;NewProfile1596244596840&#34;,
      &#34;ObjectType&#34;: &#34;workflow.StartTask&#34;
    },
    {
      &#34;ClassId&#34;: &#34;workflow.SuccessEndTask&#34;,
      &#34;Description&#34;: &#34;&#34;,
      &#34;Label&#34;: &#34;&#34;,
      &#34;Name&#34;: &#34;SuccessEndTask&#34;,
      &#34;ObjectType&#34;: &#34;workflow.SuccessEndTask&#34;
    },
    {
      &#34;ClassId&#34;: &#34;workflow.FailureEndTask&#34;,
      &#34;Description&#34;: &#34;&#34;,
      &#34;Label&#34;: &#34;&#34;,
      &#34;Name&#34;: &#34;FailureEndTask&#34;,
      &#34;ObjectType&#34;: &#34;workflow.FailureEndTask&#34;
    },
    {
      &#34;CatalogMoid&#34;: &#34;5dd45ab6696f6e2d301e2df6&#34;,
      &#34;ClassId&#34;: &#34;workflow.WorkerTask&#34;,
      &#34;Description&#34;: &#34;Task to create a Profile&#34;,
      &#34;InputParameters&#34;: null,
      &#34;Label&#34;: &#34;Provision VM&#34;,
      &#34;Name&#34;: &#34;ProvisionVM1596244596840&#34;,
      &#34;ObjectType&#34;: &#34;workflow.WorkerTask&#34;,
      &#34;OnFailure&#34;: &#34;&#34;,
      &#34;OnSuccess&#34;: &#34;SuccessEndTask&#34;,
      &#34;TaskDefinitionId&#34;: &#34;5efd7c84696f6e2d309e6877&#34;,
      &#34;TaskDefinitionName&#34;: &#34;NewProfile&#34;,
      &#34;Version&#34;: 1
    }
  ],
  &#34;Version&#34;: 1
}
</code></pre><p>Following is an example for the parameter sets defined at custom data
type level:</p>
<pre tabindex="0"><code>{
  &#34;Label&#34;: &#34;ClusterType&#34;,
  &#34;Name&#34;: &#34;ClusterType&#34;,
  &#34;CompositeType&#34;: true,
  &#34;Description&#34;: &#34;Type definition for a cluster information.&#34;,
  &#34;TypeDefinition&#34;: [
    {
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;,
      &#34;Label&#34;: &#34;Cluster Type&#34;,
      &#34;Name&#34;: &#34;clustertype&#34;,
      &#34;Properties&#34;: {
        &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataProperty&#34;,
        &#34;Constraints&#34;: {
          &#34;ObjectType&#34;: &#34;workflow.Constraints&#34;,
          &#34;EnumList&#34;: [
            {
              &#34;ObjectType&#34;: &#34;workflow.EnumEntry&#34;,
              &#34;Label&#34;: &#34;VM Ware&#34;,
              &#34;Value&#34;: &#34;vmware&#34;
            },
            {
              &#34;ObjectType&#34;: &#34;workflow.EnumEntry&#34;,
              &#34;Label&#34;: &#34;HX AP&#34;,
              &#34;Value&#34;: &#34;hxap&#34;
            }
          ]
        },
        &#34;Type&#34;: &#34;enum&#34;
      }
    },
    {
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;,
      &#34;Label&#34;: &#34;VMware Cluster&#34;,
      &#34;Name&#34;: &#34;vmwarecluster&#34;
    },
    {
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;,
      &#34;Label&#34;: &#34;HX Cluster&#34;,
      &#34;Name&#34;: &#34;hxcluster&#34;
    },
    {
      &#34;ObjectType&#34;: &#34;workflow.PrimitiveDataType&#34;,
      &#34;Label&#34;: &#34;Cluster Description&#34;,
      &#34;Name&#34;: &#34;clusterdescr&#34;
    }
  ],
  &#34;ParameterSet&#34;: [
    {
      &#34;Name&#34;: &#34;rule-1&#34;,
      &#34;Field&#34;: &#34;clustertype&#34;,
      &#34;Condition&#34;: &#34;eq&#34;,
      &#34;Value&#34;: &#34;vmware&#34;,
      &#34;ShowFields&#34;: [
        &#34;vmwarecluster&#34;
      ]
    },
    {
      &#34;Name&#34;: &#34;rule-2&#34;,
      &#34;Field&#34;: &#34;clustertype&#34;,
      &#34;Condition&#34;: &#34;eq&#34;,
      &#34;Value&#34;: &#34;hxap&#34;,
      &#34;ShowFields&#34;: [
        &#34;hxcluster&#34;
      ]
    }
  ]
}
</code></pre><p>:::</p>
<h2 id="supported-workflows-for-storage-targets">Supported Workflows for Storage Targets</h2>
<p>The following table lists workflows supported in the various storage
targets available on Intersight:</p>
<table>
<thead>
<tr>
<th>List of Storage Workflows</th>
<th style="text-align:center">Pure Storage</th>
<th style="text-align:center">NetApp</th>
<th style="text-align:center">Hitachi</th>
</tr>
</thead>
<tbody>
<tr>
<td>New Storage Host</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td>New Storage Host Group</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>New VMFS Datastore</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td>New NAS Datastore</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>Remove NFS Datastore</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>Remove Storage Host</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td>Remove Storage Export Policy</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>Remove Storage Host Group</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>Remove VMFS Datastore</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>Update Storage Host</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td>Update NAS Datastore</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>Update VMFS Datastore</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>New Storage Interface</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>New Storage Export Policy</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td>New Storage Virtual Machine</td>
<td style="text-align:center">N</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">N</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c69e288e27b8f8f2f2965c7f6b956d58">7 - WebAPI</h1>
    <div class="lead">Intersight Cloud Orchestrator allows workflow designers to run commands over SSH by using the <strong>Invoke SSH Commands</strong> reusable task in the workflows.</div>
	<h1 id="webapi">WebAPI</h1>
<p>Param (
[switch]$EnableBasicAuth = $false,
[switch]$SKipNetworkProfileCheck = $false,
[switch]$ForceNewSSLCert = $false,
[string]$SubjectName = $env:COMPUTERNAME,
[int]$CertValidityDays = 1095
)</p>
<p>Function New-SelfSignedCert
{
Param (
[string]$SubjectName,
[int]$ValidDays = 1095
)</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/twitter" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/stack" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 Cisco Systems All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small>
	
		<p class="mt-2"><a href="/about/">About Goldydocs</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js" integrity="sha512-E/owfVh8/U1xwhvIT4HSI064DRc1Eo/xf7AYax84rt9gVqA8tc/JNH/lvTl1tuw9PUHQIMGUtObkjYkgRjFqAA==" crossorigin="anonymous"></script>
<style>
.markmap > svg {
  width: 100%;
  height: 300px;
}
</style>
<script>
window.markmap = {
  autoLoader: {
      manual: true,
      onReady() {
        const { autoLoader, builtInPlugins } = window.markmap;
        autoLoader.transformPlugins = builtInPlugins.filter(plugin => plugin.name !== 'prism');
      },
  },
};
</script>
<script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>
<script src='/js/deflate.js'></script>
<script src="/js/main.min.0df8230201e8a69481dceaf8138a4187f74aaa2cbd4771f365bdf85869c9d57a.js" integrity="sha256-DfgjAgHoppSB3Or4E4pBh/dKqiy9R3HzZb34WGnJ1Xo=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
